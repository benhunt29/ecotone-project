var app=angular.module("ecotoneApp",["ngRoute","ngMaterial","ngMessages","validation.match"]);app.config(["$mdThemingProvider","$routeProvider","$locationProvider","$httpProvider",function(e,t,o,r){o.html5Mode(!0),e.theme("default").primaryPalette("green").accentPalette("blue-grey",{"default":"600"}).warnPalette("orange"),t.when("/",{templateUrl:"/views/calculator.html",controller:"calculateCtrl as ctrl"}).when("/login",{templateUrl:"/views/login.html",controller:"loginCtrl"}).when("/register",{templateUrl:"/views/register.html",controller:"createAccountCtrl"}).when("/admin",{templateUrl:"/views/admin.html",controller:"adminCtrl as ctrl"}).when("/account",{templateUrl:"/views/account.html",controller:""}).when("/dashboard",{templateUrl:"/views/dashboard.html",controller:"dashboardCtrl"}).when("/projects",{templateUrl:"/views/project.html",controller:"projectsCtrl as ctrl"}).when("/sources",{templateUrl:"/views/sources.html"}).otherwise({redirectTo:"/"}),r.interceptors.push("authInterceptor")}]),app.controller("editAccountCtrl",["$scope","$http","$location","$rootScope","$mdToast",function(e,t,o,r,n){e.user={},console.log(r.user),e.user=r.user,e.updateUserInfo=function(){console.log("Posting..."),t({method:"PUT",url:"/modifyUser",data:e.user,dataType:"json"}).then(function(e){console.log(e),o.path("/calculator"),alert("Your account information has been changed.")},function(t){console.log("error"),e.errorToast("There was a problem processing your changes. Please try again later.")})},e.errorToast=function(e){n.show(n.simple().content(e).hideDelay(3e3))}}]),app.controller("adminCtrl",["$http","$scope","$parse",function(e,t,o){function r(){var o=t.csv.result;console.log(o),e.post("/bulk",o).then(function(e){return console.log(e),e.data.forEach(function(e){e.project_id=1}),e.data}).then(function(t){e.post("/project/calculation/",t)})["catch"](function(e){console.log(e)})}function n(t){var o=t.id;console.log(o),e.put("/suggestion/complete/"+o).then(function(e){a()})}function a(){e.get("/suggestion").then(function(e){var t=e.data;console.log(t),i.suggestions=t})}a();var i=this;i.suggestions="",i.markComplete=n,i.submitCSV=r,t.csv={content:null,header:!0,headerVisible:!0,separator:",",separatorVisible:!0,result:null,encoding:"ISO-8859-1",encodingVisible:!0};var s="";t.toPrettyJSON=function(e,t){var r=JSON.stringify(e),n=null;try{n=o(r)({})}catch(a){return s}var i=JSON.stringify(n,null,Number(t));return s=i,i}}]),app.controller("calculateCtrl",["$http","$mdDialog","$rootScope","authService","$location",function(e,t,o,r,n){function a(e){console.log("Text changed to ",e)}function i(e){void 0==e&&(m.category="",m.subcategory="",m.warmId="",m.weight="",m.item_description="",m.conversion="",m.result="")}function s(){var t={warmId:m.warmId||m.category.secondaries[0].warm_id,weight:parseFloat(m.weight)*m.conversion};e.post("/calculations",t).then(function(e){m.result=Math.floor(1e3*Math.abs(e.data))/1e3})}function c(){var t={category:m.category,subcategory:m.subcategory,warm_Id:m.warmId,weight:parseFloat(m.weight)*m.conversion,units:m.unit.name,item_description:m.item_description};console.log(t),e.post("/addToProject").then(function(e){console.log(e)})}function l(e){return e?m.list.filter(u(e)):m.list}function u(e){var t=e.toLowerCase();return function(e){return-1!=e.primary_cat.indexOf(t)}}function p(){e.post("/suggestion",m.suggestSubmission).then(function(e){t.hide()})}function d(e){t.show({templateUrl:"/views/suggest-modal.html",clickOutsideToClose:!0,controller:"calculateCtrl",controllerAs:"ctrl",locals:{material:m.searchText}})}function h(){e.post("/project",m.projectSubmission).then(function(e){t.hide()})}function g(e){t.show({templateUrl:"views/project-modal.html",clickOutsideToClose:!0,controller:"calculateCtrl",controllerAs:"ctrl"})}o.user=r.getUser(),o.user&&o.user.username&&n.path("/"),e.get("/materials").then(function(e){var t=e.data;t.forEach(function(e){e.primary_cat=e.primary_cat.toLowerCase()}),m.list=t});var m=this;m.list="",m.isDisabled=!1,m.result="",m.querySearch=l,m.selectedItemChange=i,m.searchTextChange=a,m.newSuggestion=d,m.submitSuggestion=p,m.units=[{name:"lbs",conversion:5e-4},{name:"kilos",conversion:.00110231},{name:"tons",conversion:1},{name:"metric tons",conversion:1.10231}],m.submission={email:"",material:"",notes:""},m.newCalculation=s,m.saveToProject=c,m.newProject=g,m.createProject=h}]),app.controller("createAccountCtrl",["$scope","$http","$location","showToast",function(e,t,o,r){e.user={},e.processForm=function(n){t({method:"POST",url:"/register",data:e.user,dataType:"json"}).then(function(e){console.log(e),o.path("/login"),r.showToast("Your account has been created.")},function(e){console.log(e),r.showToast(e.data.message)})}}]),app.directive("ngCsvImport",function(){return{restrict:"E",transclude:!0,replace:!0,scope:{content:"=?",header:"=?",headerVisible:"=?",separator:"=?",separatorVisible:"=?",result:"=?",encoding:"=?",encodingVisible:"=?"},template:'<div><div ng-show="headerVisible"><div class="label">Header</div><input type="checkbox" ng-model="header"></div><div ng-show="encoding && encodingVisible"><div class="label">Encoding</div><span>{{encoding}}</span></div><div ng-show="separator && separatorVisible"><div class="label">Seperator</div><span><input class="separator-input" type="text" ng-change="changeSeparator" ng-model="separator"><span></div><div><input class="btn cta gray" type="file"/></div></div>',link:function(e,t){e.separatorVisible=e.separatorVisible||!1,e.headerVisible=e.headerVisible||!1,angular.element(t[0].querySelector(".separator-input")).on("keyup",function(t){if(null!=e.content){var r={csv:e.content,header:e.header,separator:t.target.value,encoding:e.encoding};e.result=o(r),e.$apply()}}),t.on("change",function(t){var r=new FileReader;if(e.filename=t.target.files[0].name,r.onload=function(t){e.$apply(function(){var r={csv:t.target.result.replace(/\r\n|\r/g,"\n"),header:e.header,separator:e.separator};e.content=r.csv,e.result=o(r),e.result.filename=e.filename})},"file"!==t.target.type||null==t.target.files&&null==t.srcElement.files){if(null!=e.content){var n={csv:e.content,header:!e.header,separator:e.separator};e.result=o(n)}}else r.readAsText((t.srcElement||t.target).files[0],e.encoding)});var o=function(e){var t=e.csv.split("\n"),o=[],r=0,n=t[0].split(e.separator).length,a=[];e.header&&(a=t[0].split(e.separator),r=1);for(var i=r;i<t.length;i++){var s={},c=t[i].split(new RegExp(e.separator+'(?![^"]*"(?:(?:[^"]*"){2})*[^"]*$)'));if(c.length===n){if(e.header)for(var l=0;l<a.length;l++)s[a[l]]=c[l];else for(var u=0;u<c.length;u++)s[u]=c[u];o.push(s)}}return o}}}}),app.controller("dashboardCtrl",["$mdDialog","$rootScope","$scope","$http",function(e,t,o,r){var n=t.user;r.get("/project/"+n.id).then(function(e){o.projectList=e.data}),o.showDelete=function(t){console.log("CLICK");var r=e.confirm().title("Are you sure you want to remove your project?").content("This is permanent.").ariaLabel("Remove project from account permanently").ok("Delete").cancel("Cancel").targetEvent(t);e.show(r).then(function(){o.alert="Your project has been removed."},function(){o.alert="Your project has not been removed."})}}]),app.controller("loginCtrl",["$scope","$http","authService","$location","$rootScope","showToast",function(e,t,o,r,n,a){e.login=function(){t({method:"POST",url:"/login",data:e.form}).then(function(e){o.saveToken(e.data.token),n.user=o.getUser(),r.path("/")},function(e){a.showToast(e.data.message)})}}]),app.controller("navCtrl",["authService","$scope","$rootScope","$location","$http",function(e,t,o,r,n){o.user=e.getUser(),o.user&&o.user.username&&r.path("/"),t.logout=function(){e.logout(),o.user=e.getUser(),r.path("/")}}]),app.controller("projectsCtrl",["$mdDialog","$scope","$rootScope","$http",function(e,t,o,r){function n(e){return e?l.projectList.filter(a(e)):l.projectList}function a(e){var t=e.toLowerCase();return function(e){return-1!=e.project_name.indexOf(t)}}function i(e){console.log("Text changed to ",e)}function s(e){console.log("item",e),console.log("selected_ project",l.selected_project),void 0==e&&(l.selected_project="",l.project_description="")}function c(e){console.log("Deleting...",e)}var l=this;l.projectList=[{id:21,project_name:"ben's house",project_description:"Remodel",created_at:"2015-10-14T16:42:40.896Z",updated_at:"2015-10-14T16:42:40.901Z",user_id:4,category:"wood",sub_category:"oak",units:"lbs",weight:10,co2_offset:.03,project_id:6,item_description:"porch spindles"},{id:202,project_name:"james' house",project_description:"Summit Ave carriage house teardown and rebuild",created_at:"2014-10-14T16:42:40.896Z",updated_at:"2014-10-14T16:42:40.901Z",user_id:24,category:"asphalt shingles",sub_category:"null",units:"lbs",weight:100,co2_offset:.303,project_id:6,item_description:"dark brown roof shingles--30 year life, some water damage"},{id:2112,project_name:"kim's barn",project_description:"Remodel",created_at:"2013-10-14T16:42:40.896Z",updated_at:"2013-10-14T16:42:40.901Z",user_id:14,category:"wood flooring",sub_category:"pine",units:"lbs",weight:500,co2_offset:3.03,project_id:6,item_description:"barn wood"}],l.result="",l.querySearch=n,l.selectedItemChange=s,l.searchTextChange=i,l.projectTotal=0,l.deleteProjectItem=c,l.id=0,console.log(l.projectList),t.showDelete=function(o,r){console.log("CLICK");var n=e.confirm().title("Are you sure you want to delete this item?").content("This will be permanent.").ariaLabel("Delete item permanently").ok("Delete").cancel("Cancel").targetEvent(o);e.show(n).then(function(){console.log("Deleting",r),l.deleteProjectItem(r),t.alert="Your item has been deleted."},function(){t.alert="Your item has not been deleted."})}}]),app.service("authService",["$window",function(e){this.parseJwt=function(t){if(t){var o=t.split(".")[1],r=o.replace("-","+").replace("_","/");return JSON.parse(e.atob(r))}return{}},this.saveToken=function(t){e.localStorage.jwtToken=t},this.getToken=function(){return e.localStorage.jwtToken},this.isAuthed=function(){var e=this.getToken();if(e){var t=this.parseJwt(e),o=Math.round((new Date).getTime()/1e3)<=t.exp;return o||this.logout(),o}return!1},this.logout=function(){delete e.localStorage.jwtToken},this.getUser=function(){return this.parseJwt(this.getToken())}}]),app.factory("authInterceptor",["$q","$location","authService",function(e,t,o){return{request:function(e){return e.headers=e.headers||{},o.isAuthed()&&(e.headers.Authorization="Bearer "+o.getToken()),e},response:function(o){return 401===o.status&&t.path("/login"),o||e.when(o)},responseError:function(o){return 401===o.status?t.path("/login"):console.log(o),e.reject(o)}}}]),app.service("showToast",["$mdToast",function(e){this.showToast=function(t){e.show(e.simple().content(t).hideDelay(3e3).position("top right"))}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJzY3JpcHRzL2FjY291bnRDdHJsLmpzIiwic2NyaXB0cy9hZG1pbkN0cmwuanMiLCJzY3JpcHRzL2NhbGN1bGF0ZUN0cmwuanMiLCJzY3JpcHRzL2NyZWF0ZUFjY291bnRDdHJsLmpzIiwic2NyaXB0cy9jc3ZJbXBvcnQuanMiLCJzY3JpcHRzL2Rhc2hib2FyZEN0cmwuanMiLCJzY3JpcHRzL2xvZ2luQ3RybC5qcyIsInNjcmlwdHMvbmF2Q3RybC5qcyIsInNjcmlwdHMvcHJvamVjdHNDdHJsLmpzIiwic2NyaXB0cy9zZXJ2aWNlcy5qcyJdLCJuYW1lcyI6WyJhcHAiLCJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJG1kVGhlbWluZ1Byb3ZpZGVyIiwiJHJvdXRlUHJvdmlkZXIiLCIkbG9jYXRpb25Qcm92aWRlciIsIiRodHRwUHJvdmlkZXIiLCJodG1sNU1vZGUiLCJ0aGVtZSIsInByaW1hcnlQYWxldHRlIiwiYWNjZW50UGFsZXR0ZSIsImRlZmF1bHQiLCJ3YXJuUGFsZXR0ZSIsIndoZW4iLCJ0ZW1wbGF0ZVVybCIsImNvbnRyb2xsZXIiLCJvdGhlcndpc2UiLCJyZWRpcmVjdFRvIiwiaW50ZXJjZXB0b3JzIiwicHVzaCIsIiRzY29wZSIsIiRodHRwIiwiJGxvY2F0aW9uIiwiJHJvb3RTY29wZSIsIiRtZFRvYXN0IiwidXNlciIsImNvbnNvbGUiLCJsb2ciLCJ1cGRhdGVVc2VySW5mbyIsIm1ldGhvZCIsInVybCIsImRhdGEiLCJkYXRhVHlwZSIsInRoZW4iLCJyZXNwb25zZSIsInBhdGgiLCJhbGVydCIsImVycm9yIiwiZXJyb3JUb2FzdCIsIm1lc3NhZ2UiLCJzaG93Iiwic2ltcGxlIiwiY29udGVudCIsImhpZGVEZWxheSIsIiRwYXJzZSIsInN1Ym1pdENTViIsImNzdk9iamVjdCIsImNzdiIsInJlc3VsdCIsInBvc3QiLCJyZXMiLCJmb3JFYWNoIiwiaXRlbSIsInByb2plY3RfaWQiLCJwcm9qZWN0cyIsImVyciIsIm1hcmtDb21wbGV0ZSIsInN1Z2dlc3Rpb24iLCJpZCIsInB1dCIsImluaXQiLCJnZXQiLCJzdWdnZXN0aW9ucyIsInNlbGYiLCJ0aGlzIiwiaGVhZGVyIiwiaGVhZGVyVmlzaWJsZSIsInNlcGFyYXRvciIsInNlcGFyYXRvclZpc2libGUiLCJlbmNvZGluZyIsImVuY29kaW5nVmlzaWJsZSIsIl9sYXN0R29vZFJlc3VsdCIsInRvUHJldHR5SlNPTiIsImpzb24iLCJ0YWJXaWR0aCIsIm9ialN0ciIsIkpTT04iLCJzdHJpbmdpZnkiLCJvYmoiLCJlIiwiTnVtYmVyIiwiJG1kRGlhbG9nIiwiYXV0aFNlcnZpY2UiLCJzZWFyY2hUZXh0Q2hhbmdlIiwidGV4dCIsInNlbGVjdGVkSXRlbUNoYW5nZSIsInVuZGVmaW5lZCIsImNhdGVnb3J5Iiwic3ViY2F0ZWdvcnkiLCJ3YXJtSWQiLCJ3ZWlnaHQiLCJpdGVtX2Rlc2NyaXB0aW9uIiwiY29udmVyc2lvbiIsIm5ld0NhbGN1bGF0aW9uIiwiY2FsY3VsYXRlIiwic2Vjb25kYXJpZXMiLCJ3YXJtX2lkIiwicGFyc2VGbG9hdCIsIk1hdGgiLCJmbG9vciIsImFicyIsInNhdmVUb1Byb2plY3QiLCJsaW5lSXRlbSIsIndhcm1fSWQiLCJ1bml0cyIsInVuaXQiLCJuYW1lIiwicXVlcnlTZWFyY2giLCJxdWVyeSIsImxpc3QiLCJmaWx0ZXIiLCJjcmVhdGVGaWx0ZXJGb3IiLCJsb3dlcmNhc2VRdWVyeSIsInRvTG93ZXJDYXNlIiwicHJpbWFyeV9jYXQiLCJpbmRleE9mIiwic3VibWl0U3VnZ2VzdGlvbiIsInN1Z2dlc3RTdWJtaXNzaW9uIiwiaGlkZSIsIm5ld1N1Z2dlc3Rpb24iLCJjbGlja091dHNpZGVUb0Nsb3NlIiwiY29udHJvbGxlckFzIiwibG9jYWxzIiwibWF0ZXJpYWwiLCJzZWFyY2hUZXh0IiwiY3JlYXRlUHJvamVjdCIsInByb2plY3RTdWJtaXNzaW9uIiwibmV3UHJvamVjdCIsImdldFVzZXIiLCJ1c2VybmFtZSIsImlzRGlzYWJsZWQiLCJzdWJtaXNzaW9uIiwiZW1haWwiLCJub3RlcyIsInNob3dUb2FzdCIsInByb2Nlc3NGb3JtIiwiZGlyZWN0aXZlIiwicmVzdHJpY3QiLCJ0cmFuc2NsdWRlIiwicmVwbGFjZSIsInNjb3BlIiwidGVtcGxhdGUiLCJsaW5rIiwiZWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJvbiIsInRhcmdldCIsInZhbHVlIiwiY3N2VG9KU09OIiwiJGFwcGx5Iiwib25DaGFuZ2VFdmVudCIsInJlYWRlciIsIkZpbGVSZWFkZXIiLCJmaWxlbmFtZSIsImZpbGVzIiwib25sb2FkIiwib25Mb2FkRXZlbnQiLCJ0eXBlIiwic3JjRWxlbWVudCIsInJlYWRBc1RleHQiLCJsaW5lcyIsInNwbGl0Iiwic3RhcnQiLCJjb2x1bW5Db3VudCIsImxlbmd0aCIsImhlYWRlcnMiLCJpIiwiY3VycmVudGxpbmUiLCJSZWdFeHAiLCJqIiwiayIsInByb2plY3RMaXN0Iiwic2hvd0RlbGV0ZSIsImV2IiwiY29uZmlybSIsInRpdGxlIiwiYXJpYUxhYmVsIiwib2siLCJjYW5jZWwiLCJ0YXJnZXRFdmVudCIsImxvZ2luIiwiZm9ybSIsInNhdmVUb2tlbiIsInRva2VuIiwibG9nb3V0IiwicHJvamVjdF9uYW1lIiwic2VsZWN0ZWRfcHJvamVjdCIsInByb2plY3RfZGVzY3JpcHRpb24iLCJkZWxldGVQcm9qZWN0SXRlbSIsImNyZWF0ZWRfYXQiLCJ1cGRhdGVkX2F0IiwidXNlcl9pZCIsInN1Yl9jYXRlZ29yeSIsImNvMl9vZmZzZXQiLCJwcm9qZWN0VG90YWwiLCJzZXJ2aWNlIiwiJHdpbmRvdyIsInBhcnNlSnd0IiwiYmFzZTY0VXJsIiwiYmFzZTY0IiwicGFyc2UiLCJhdG9iIiwibG9jYWxTdG9yYWdlIiwiand0VG9rZW4iLCJnZXRUb2tlbiIsImlzQXV0aGVkIiwicGFyYW1zIiwibm90RXhwaXJlZCIsInJvdW5kIiwiRGF0ZSIsImdldFRpbWUiLCJleHAiLCJmYWN0b3J5IiwiJHEiLCJyZXF1ZXN0IiwiQXV0aG9yaXphdGlvbiIsInN0YXR1cyIsInJlc3BvbnNlRXJyb3IiLCJyZWplY3QiLCJwb3NpdGlvbiJdLCJtYXBwaW5ncyI6IkFBQUEsR0FBQUEsS0FBQUMsUUFBQUMsT0FBQSxjQUFBLFVBQUEsYUFBQSxhQUFBLG9CQUVBRixLQUFBRyxRQUFBLHFCQUFBLGlCQUFBLG9CQUFBLGdCQUFBLFNBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEdBQ0FELEVBQUFFLFdBQUEsR0FHQUosRUFBQUssTUFBQSxXQUNBQyxlQUFBLFNBQ0FDLGNBQUEsYUFBQUMsVUFBQSxRQUNBQyxZQUFBLFVBR0FSLEVBQUFTLEtBQUEsS0FFQUMsWUFBQSx5QkFDQUMsV0FBQSwwQkFDQUYsS0FBQSxVQUVBQyxZQUFBLG9CQUNBQyxXQUFBLGNBQ0FGLEtBQUEsYUFFQUMsWUFBQSx1QkFDQUMsV0FBQSxzQkFDQUYsS0FBQSxVQUVBQyxZQUFBLG9CQUNBQyxXQUFBLHNCQUVBRixLQUFBLFlBRUFDLFlBQUEsc0JBQ0FDLFdBQUEsS0FDQUYsS0FBQSxjQUVBQyxZQUFBLHdCQUNBQyxXQUFBLGtCQUNBRixLQUFBLGFBRUFDLFlBQUEsc0JBQ0FDLFdBQUEseUJBQ0FGLEtBQUEsWUFFQUMsWUFBQSx3QkFDQUUsV0FDQUMsV0FBQSxNQUdBWCxFQUFBWSxhQUFBQyxLQUFBLHNCQzlDQXBCLElBQUFnQixXQUFBLG1CQUFBLFNBQUEsUUFBQSxZQUFBLGFBQUEsV0FBQSxTQUFBSyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxHQUNBSixFQUFBSyxRQUNBQyxRQUFBQyxJQUFBSixFQUFBRSxNQUNBTCxFQUFBSyxLQUFBRixFQUFBRSxLQUVBTCxFQUFBUSxlQUFBLFdBQ0FGLFFBQUFDLElBQUEsY0FDQU4sR0FDQVEsT0FBQSxNQUNBQyxJQUFBLGNBQ0FDLEtBQUFYLEVBQUFLLEtBQ0FPLFNBQUEsU0FDQUMsS0FBQSxTQUFBQyxHQUNBUixRQUFBQyxJQUFBTyxHQUNBWixFQUFBYSxLQUFBLGVBQ0FDLE1BQUEsK0NBQ0EsU0FBQUMsR0FDQVgsUUFBQUMsSUFBQSxTQUNBUCxFQUFBa0IsV0FBQSwyRUFJQWxCLEVBQUFrQixXQUFBLFNBQUFDLEdBQ0FmLEVBQUFnQixLQUNBaEIsRUFBQWlCLFNBQ0FDLFFBQUFILEdBQ0FJLFVBQUEsVUN6QkE1QyxJQUFBZ0IsV0FBQSxhQUFBLFFBQUEsU0FBQSxTQUFBLFNBQUFNLEVBQUFELEVBQUF3QixHQVNBLFFBQUFDLEtBQ0EsR0FBQUMsR0FBQTFCLEVBQUEyQixJQUFBQyxNQUNBdEIsU0FBQUMsSUFBQW1CLEdBRUF6QixFQUFBNEIsS0FBQSxRQUFBSCxHQUNBYixLQUFBLFNBQUFpQixHQUtBLE1BSkF4QixTQUFBQyxJQUFBdUIsR0FDQUEsRUFBQW5CLEtBQUFvQixRQUFBLFNBQUFDLEdBQ0FBLEVBQUFDLFdBQUEsSUFFQUgsRUFBQW5CLE9BQ0FFLEtBQUEsU0FBQXFCLEdBQ0FqQyxFQUFBNEIsS0FBQSx3QkFBQUssS0FSQWpDLFNBU0EsU0FBQWtDLEdBQ0E3QixRQUFBQyxJQUFBNEIsS0FLQSxRQUFBQyxHQUFBQyxHQUNBLEdBQUFDLEdBQUFELEVBQUFDLEVBQ0FoQyxTQUFBQyxJQUFBK0IsR0FDQXJDLEVBQUFzQyxJQUFBLHdCQUFBRCxHQUFBekIsS0FBQSxTQUFBaUIsR0FDQVUsTUFJQSxRQUFBQSxLQUNBdkMsRUFBQXdDLElBQUEsZUFBQTVCLEtBQUEsU0FBQWlCLEdBQ0EsR0FBQVksR0FBQVosRUFBQW5CLElBQ0FMLFNBQUFDLElBQUFtQyxHQUNBQyxFQUFBRCxZQUFBQSxJQXRDQUYsR0FFQSxJQUFBRyxHQUFBQyxJQUNBRCxHQUFBRCxZQUFBLEdBQ0FDLEVBQUFQLGFBQUFBLEVBQ0FPLEVBQUFsQixVQUFBQSxFQXFDQXpCLEVBQUEyQixLQUNBTCxRQUFBLEtBQ0F1QixRQUFBLEVBQ0FDLGVBQUEsRUFDQUMsVUFBQSxJQUNBQyxrQkFBQSxFQUNBcEIsT0FBQSxLQUNBcUIsU0FBQSxhQUNBQyxpQkFBQSxFQUdBLElBQUFDLEdBQUEsRUFDQW5ELEdBQUFvRCxhQUFBLFNBQUFDLEVBQUFDLEdBQ0EsR0FBQUMsR0FBQUMsS0FBQUMsVUFBQUosR0FDQUssRUFBQSxJQUNBLEtBQ0FBLEVBQUFsQyxFQUFBK0IsT0FDQSxNQUFBSSxHQUVBLE1BQUFSLEdBR0EsR0FBQXZCLEdBQUE0QixLQUFBQyxVQUFBQyxFQUFBLEtBQUFFLE9BQUFOLEdBR0EsT0FGQUgsR0FBQXZCLEVBRUFBLE1DeEVBakQsSUFBQWdCLFdBQUEsaUJBQUEsUUFBQSxZQUFBLGFBQUEsY0FBQSxZQUFBLFNBQUFNLEVBQUE0RCxFQUFBMUQsRUFBQTJELEVBQUE1RCxHQThEQSxRQUFBNkQsR0FBQUMsR0FDQTFELFFBQUFDLElBQUEsbUJBQUF5RCxHQUdBLFFBQUFDLEdBQUFqQyxHQUNBa0MsUUFBQWxDLElBQ0FXLEVBQUF3QixTQUFBLEdBQ0F4QixFQUFBeUIsWUFBQSxHQUNBekIsRUFBQTBCLE9BQUEsR0FDQTFCLEVBQUEyQixPQUFBLEdBQ0EzQixFQUFBNEIsaUJBQUEsR0FDQTVCLEVBQUE2QixXQUFBLEdBQ0E3QixFQUFBZixPQUFBLElBSUEsUUFBQTZDLEtBRUEsR0FBQUMsSUFDQUwsT0FBQTFCLEVBQUEwQixRQUFBMUIsRUFBQXdCLFNBQUFRLFlBQUEsR0FBQUMsUUFDQU4sT0FBQU8sV0FBQWxDLEVBQUEyQixRQUFBM0IsRUFBQTZCLFdBR0F2RSxHQUFBNEIsS0FBQSxnQkFBQTZDLEdBQUE3RCxLQUFBLFNBQUFDLEdBQ0E2QixFQUFBZixPQUFBa0QsS0FBQUMsTUFBQSxJQUFBRCxLQUFBRSxJQUFBbEUsRUFBQUgsT0FBQSxNQUlBLFFBQUFzRSxLQUNBLEdBQUFDLElBQ0FmLFNBQUF4QixFQUFBd0IsU0FDQUMsWUFBQXpCLEVBQUF5QixZQUNBZSxRQUFBeEMsRUFBQTBCLE9BQ0FDLE9BQUFPLFdBQUFsQyxFQUFBMkIsUUFBQTNCLEVBQUE2QixXQUNBWSxNQUFBekMsRUFBQTBDLEtBQUFDLEtBQ0FmLGlCQUFBNUIsRUFBQTRCLGlCQUVBakUsU0FBQUMsSUFBQTJFLEdBQ0FqRixFQUFBNEIsS0FBQSxpQkFBQWhCLEtBQUEsU0FBQUMsR0FDQVIsUUFBQUMsSUFBQU8sS0FJQSxRQUFBeUUsR0FBQUMsR0FDQSxNQUFBQSxHQUFBN0MsRUFBQThDLEtBQUFDLE9BQUFDLEVBQUFILElBQUE3QyxFQUFBOEMsS0FHQSxRQUFBRSxHQUFBSCxHQUNBLEdBQUFJLEdBQUFKLEVBQUFLLGFBRUEsT0FBQSxVQUFBbkMsR0FDQSxNQUFBLElBQUFBLEVBQUFvQyxZQUFBQyxRQUFBSCxJQUlBLFFBQUFJLEtBQ0EvRixFQUFBNEIsS0FBQSxjQUFBYyxFQUFBc0QsbUJBQUFwRixLQUFBLFNBQUFpQixHQUNBK0IsRUFBQXFDLFNBSUEsUUFBQUMsR0FBQTlELEdBRUF3QixFQUFBekMsTUFDQTFCLFlBQUEsNEJBQ0EwRyxxQkFBQSxFQUNBekcsV0FBQSxnQkFDQTBHLGFBQUEsT0FDQUMsUUFBQUMsU0FBQTVELEVBQUE2RCxjQUtBLFFBQUFDLEtBQ0F4RyxFQUFBNEIsS0FBQSxXQUFBYyxFQUFBK0QsbUJBQUE3RixLQUFBLFNBQUFpQixHQUNBK0IsRUFBQXFDLFNBSUEsUUFBQVMsR0FBQUEsR0FFQTlDLEVBQUF6QyxNQUNBMUIsWUFBQSwyQkFDQTBHLHFCQUFBLEVBQ0F6RyxXQUFBLGdCQUNBMEcsYUFBQSxTQWhKQWxHLEVBQUFFLEtBQUF5RCxFQUFBOEMsVUFFQXpHLEVBQUFFLE1BQUFGLEVBQUFFLEtBQUF3RyxVQUNBM0csRUFBQWEsS0FBQSxLQUlBZCxFQUFBd0MsSUFBQSxjQUFBNUIsS0FBQSxTQUFBQyxHQUNBLEdBQUEyRSxHQUFBM0UsRUFBQUgsSUFFQThFLEdBQUExRCxRQUFBLFNBQUFDLEdBQ0FBLEVBQUE4RCxZQUFBOUQsRUFBQThELFlBQUFELGdCQUlBbEQsRUFBQThDLEtBQUFBLEdBS0EsSUFBQTlDLEdBQUFDLElBRUFELEdBQUE4QyxLQUFBLEdBQ0E5QyxFQUFBbUUsWUFBQSxFQUNBbkUsRUFBQWYsT0FBQSxHQUNBZSxFQUFBNEMsWUFBQUEsRUFDQTVDLEVBQUFzQixtQkFBQUEsRUFDQXRCLEVBQUFvQixpQkFBQUEsRUFDQXBCLEVBQUF3RCxjQUFBQSxFQUNBeEQsRUFBQXFELGlCQUFBQSxFQUNBckQsRUFBQXlDLFFBRUFFLEtBQUEsTUFDQWQsV0FBQSxPQUdBYyxLQUFBLFFBQ0FkLFdBQUEsWUFHQWMsS0FBQSxPQUNBZCxXQUFBLElBR0FjLEtBQUEsY0FDQWQsV0FBQSxVQUdBN0IsRUFBQW9FLFlBQ0FDLE1BQUEsR0FDQVQsU0FBQSxHQUNBVSxNQUFBLElBRUF0RSxFQUFBOEIsZUFBQUEsRUFDQTlCLEVBQUFzQyxjQUFBQSxFQUNBdEMsRUFBQWdFLFdBQUFBLEVBQ0FoRSxFQUFBOEQsY0FBQUEsS0MxREE5SCxJQUFBZ0IsV0FBQSxxQkFBQSxTQUFBLFFBQUEsWUFBQSxZQUFBLFNBQUFLLEVBQUFDLEVBQUFDLEVBQUFnSCxHQUNBbEgsRUFBQUssUUFFQUwsRUFBQW1ILFlBQUEsU0FBQTlHLEdBQ0FKLEdBQ0FRLE9BQUEsT0FDQUMsSUFBQSxZQUNBQyxLQUFBWCxFQUFBSyxLQUNBTyxTQUFBLFNBQ0FDLEtBQUEsU0FBQUMsR0FDQVIsUUFBQUMsSUFBQU8sR0FDQVosRUFBQWEsS0FBQSxVQUNBbUcsRUFBQUEsVUFBQSxtQ0FDQSxTQUFBL0UsR0FDQTdCLFFBQUFDLElBQUE0QixHQUNBK0UsRUFBQUEsVUFBQS9FLEVBQUF4QixLQUFBUSxlQ2hCQXhDLElBQUF5SSxVQUFBLGNBQUEsV0FDQSxPQUNBQyxTQUFBLElBQ0FDLFlBQUEsRUFDQUMsU0FBQSxFQUNBQyxPQUNBbEcsUUFBQSxLQUNBdUIsT0FBQSxLQUNBQyxjQUFBLEtBQ0FDLFVBQUEsS0FDQUMsaUJBQUEsS0FDQXBCLE9BQUEsS0FDQXFCLFNBQUEsS0FDQUMsZ0JBQUEsTUFFQXVFLFNBQUEscWRBSUFDLEtBQUEsU0FBQUYsRUFBQUcsR0FDQUgsRUFBQXhFLGlCQUFBd0UsRUFBQXhFLG1CQUFBLEVBQ0F3RSxFQUFBMUUsY0FBQTBFLEVBQUExRSxnQkFBQSxFQUVBbEUsUUFBQStJLFFBQUFBLEVBQUEsR0FBQUMsY0FBQSxxQkFBQUMsR0FBQSxRQUFBLFNBQUFsRSxHQUNBLEdBQUEsTUFBQTZELEVBQUFsRyxRQUFBLENBQ0EsR0FBQUEsSUFDQUssSUFBQTZGLEVBQUFsRyxRQUNBdUIsT0FBQTJFLEVBQUEzRSxPQUNBRSxVQUFBWSxFQUFBbUUsT0FBQUMsTUFDQTlFLFNBQUF1RSxFQUFBdkUsU0FFQXVFLEdBQUE1RixPQUFBb0csRUFBQTFHLEdBQ0FrRyxFQUFBUyxZQUlBTixFQUFBRSxHQUFBLFNBQUEsU0FBQUssR0FDQSxHQUFBQyxHQUFBLEdBQUFDLFdBZUEsSUFkQVosRUFBQWEsU0FBQUgsRUFBQUosT0FBQVEsTUFBQSxHQUFBaEQsS0FDQTZDLEVBQUFJLE9BQUEsU0FBQUMsR0FDQWhCLEVBQUFTLE9BQUEsV0FDQSxHQUFBM0csSUFDQUssSUFBQTZHLEVBQUFWLE9BQUFsRyxPQUFBMkYsUUFBQSxXQUFBLE1BQ0ExRSxPQUFBMkUsRUFBQTNFLE9BQ0FFLFVBQUF5RSxFQUFBekUsVUFFQXlFLEdBQUFsRyxRQUFBQSxFQUFBSyxJQUNBNkYsRUFBQTVGLE9BQUFvRyxFQUFBMUcsR0FDQWtHLEVBQUE1RixPQUFBeUcsU0FBQWIsRUFBQWEsWUFJQSxTQUFBSCxFQUFBSixPQUFBVyxNQUFBLE1BQUFQLEVBQUFKLE9BQUFRLE9BQUEsTUFBQUosRUFBQVEsV0FBQUosT0FHQSxHQUFBLE1BQUFkLEVBQUFsRyxRQUFBLENBQ0EsR0FBQUEsSUFDQUssSUFBQTZGLEVBQUFsRyxRQUNBdUIsUUFBQTJFLEVBQUEzRSxPQUNBRSxVQUFBeUUsRUFBQXpFLFVBRUF5RSxHQUFBNUYsT0FBQW9HLEVBQUExRyxRQVJBNkcsR0FBQVEsWUFBQVQsRUFBQVEsWUFBQVIsRUFBQUosUUFBQVEsTUFBQSxHQUFBZCxFQUFBdkUsV0FhQSxJQUFBK0UsR0FBQSxTQUFBMUcsR0FDQSxHQUFBc0gsR0FBQXRILEVBQUFLLElBQUFrSCxNQUFBLE1BQ0FqSCxLQUNBa0gsRUFBQSxFQUNBQyxFQUFBSCxFQUFBLEdBQUFDLE1BQUF2SCxFQUFBeUIsV0FBQWlHLE9BRUFDLElBQ0EzSCxHQUFBdUIsU0FDQW9HLEVBQUFMLEVBQUEsR0FBQUMsTUFBQXZILEVBQUF5QixXQUNBK0YsRUFBQSxFQUdBLEtBQUEsR0FBQUksR0FBQUosRUFBQUksRUFBQU4sRUFBQUksT0FBQUUsSUFBQSxDQUNBLEdBQUF4RixNQUNBeUYsRUFBQVAsRUFBQU0sR0FBQUwsTUFBQSxHQUFBTyxRQUFBOUgsRUFBQXlCLFVBQUEsc0NBQ0EsSUFBQW9HLEVBQUFILFNBQUFELEVBQUEsQ0FDQSxHQUFBekgsRUFBQXVCLE9BQ0EsSUFBQSxHQUFBd0csR0FBQSxFQUFBQSxFQUFBSixFQUFBRCxPQUFBSyxJQUNBM0YsRUFBQXVGLEVBQUFJLElBQUFGLEVBQUFFLE9BR0EsS0FBQSxHQUFBQyxHQUFBLEVBQUFBLEVBQUFILEVBQUFILE9BQUFNLElBQ0E1RixFQUFBNEYsR0FBQUgsRUFBQUcsRUFHQTFILEdBQUE3QixLQUFBMkQsSUFHQSxNQUFBOUIsUUM5RkFqRCxJQUFBZ0IsV0FBQSxpQkFBQSxZQUFBLGFBQUEsU0FBQSxRQUFBLFNBQUFrRSxFQUFBMUQsRUFBQUgsRUFBQUMsR0FDQSxHQUFBSSxHQUFBRixFQUFBRSxJQUlBSixHQUFBd0MsSUFBQSxZQUFBcEMsRUFBQWlDLElBQUF6QixLQUFBLFNBQUFDLEdBQ0FkLEVBQUF1SixZQUFBekksRUFBQUgsT0FNQVgsRUFBQXdKLFdBQUEsU0FBQUMsR0FFQW5KLFFBQUFDLElBQUEsUUFDQSxJQUFBbUosR0FBQTdGLEVBQUE2RixVQUNBQyxNQUFBLGlEQUNBckksUUFBQSxzQkFDQXNJLFVBQUEsMkNBQ0FDLEdBQUEsVUFDQUMsT0FBQSxVQUNBQyxZQUFBTixFQUNBNUYsR0FBQXpDLEtBQUFzSSxHQUFBN0ksS0FBQSxXQUNBYixFQUFBZ0IsTUFBQSxrQ0FDQSxXQUNBaEIsRUFBQWdCLE1BQUEsMkNDeEJBckMsSUFBQWdCLFdBQUEsYUFBQSxTQUFBLFFBQUEsY0FBQSxZQUFBLGFBQUEsWUFBQSxTQUFBSyxFQUFBQyxFQUFBNkQsRUFBQTVELEVBQUFDLEVBQUErRyxHQUNBbEgsRUFBQWdLLE1BQUEsV0FDQS9KLEdBQ0FRLE9BQUEsT0FDQUMsSUFBQSxTQUNBQyxLQUFBWCxFQUFBaUssT0FDQXBKLEtBQUEsU0FBQUMsR0FDQWdELEVBQUFvRyxVQUFBcEosRUFBQUgsS0FBQXdKLE9BQ0FoSyxFQUFBRSxLQUFBeUQsRUFBQThDLFVBQ0ExRyxFQUFBYSxLQUFBLE1BQ0EsU0FBQW9CLEdBRUErRSxFQUFBQSxVQUFBL0UsRUFBQXhCLEtBQUFRLGVDWkF4QyxJQUFBZ0IsV0FBQSxXQUFBLGNBQUEsU0FBQSxhQUFBLFlBQUEsUUFBQSxTQUFBbUUsRUFBQTlELEVBQUFHLEVBQUFELEVBQUFELEdBQ0FFLEVBQUFFLEtBQUF5RCxFQUFBOEMsVUFFQXpHLEVBQUFFLE1BQUFGLEVBQUFFLEtBQUF3RyxVQUNBM0csRUFBQWEsS0FBQSxLQUdBZixFQUFBb0ssT0FBQSxXQUNBdEcsRUFBQXNHLFNBQ0FqSyxFQUFBRSxLQUFBeUQsRUFBQThDLFVBQ0ExRyxFQUFBYSxLQUFBLFNDVkFwQyxJQUFBZ0IsV0FBQSxnQkFBQSxZQUFBLFNBQUEsYUFBQSxRQUFBLFNBQUFrRSxFQUFBN0QsRUFBQUcsRUFBQUYsR0FpRkEsUUFBQXNGLEdBQUFDLEdBQ0EsTUFBQUEsR0FBQTdDLEVBQUE0RyxZQUFBN0QsT0FBQUMsRUFBQUgsSUFBQTdDLEVBQUE0RyxZQUdBLFFBQUE1RCxHQUFBSCxHQUNBLEdBQUFJLEdBQUFKLEVBQUFLLGFBRUEsT0FBQSxVQUFBbkMsR0FDQSxNQUFBLElBQUFBLEVBQUEyRyxhQUFBdEUsUUFBQUgsSUFJQSxRQUFBN0IsR0FBQUMsR0FDQTFELFFBQUFDLElBQUEsbUJBQUF5RCxHQUdBLFFBQUFDLEdBQUFqQyxHQUNBMUIsUUFBQUMsSUFBQSxPQUFBeUIsR0FDQTFCLFFBQUFDLElBQUEsb0JBQUFvQyxFQUFBMkgsa0JBQ0FwRyxRQUFBbEMsSUFDQVcsRUFBQTJILGlCQUFBLEdBQ0EzSCxFQUFBNEgsb0JBQUEsSUFpQ0EsUUFBQUMsR0FBQWxJLEdBQ0FoQyxRQUFBQyxJQUFBLGNBQUErQixHQXJJQSxHQUFBSyxHQUFBQyxJQUNBRCxHQUFBNEcsY0FFQWpILEdBQUEsR0FDQStILGFBQUEsY0FDQUUsb0JBQUEsVUFDQUUsV0FBQSwyQkFDQUMsV0FBQSwyQkFDQUMsUUFBQSxFQUNBeEcsU0FBQSxPQUNBeUcsYUFBQSxNQUNBeEYsTUFBQSxNQUNBZCxPQUFBLEdBQ0F1RyxXQUFBLElBQ0E1SSxXQUFBLEVBQ0FzQyxpQkFBQSxtQkFHQWpDLEdBQUEsSUFDQStILGFBQUEsZUFDQUUsb0JBQUEsaURBQ0FFLFdBQUEsMkJBQ0FDLFdBQUEsMkJBQ0FDLFFBQUEsR0FDQXhHLFNBQUEsbUJBQ0F5RyxhQUFBLE9BQ0F4RixNQUFBLE1BQ0FkLE9BQUEsSUFDQXVHLFdBQUEsS0FDQTVJLFdBQUEsRUFDQXNDLGlCQUFBLDhEQUdBakMsR0FBQSxLQUNBK0gsYUFBQSxhQUNBRSxvQkFBQSxVQUNBRSxXQUFBLDJCQUNBQyxXQUFBLDJCQUNBQyxRQUFBLEdBQ0F4RyxTQUFBLGdCQUNBeUcsYUFBQSxPQUNBeEYsTUFBQSxNQUNBZCxPQUFBLElBQ0F1RyxXQUFBLEtBQ0E1SSxXQUFBLEVBQ0FzQyxpQkFBQSxjQUdBNUIsRUFBQWYsT0FBQSxHQUNBZSxFQUFBNEMsWUFBQUEsRUFDQTVDLEVBQUFzQixtQkFBQUEsRUFDQXRCLEVBQUFvQixpQkFBQUEsRUFDQXBCLEVBQUFtSSxhQUFBLEVBQ0FuSSxFQUFBNkgsa0JBQUFBLEVBQ0E3SCxFQUFBTCxHQUFBLEVBRUFoQyxRQUFBQyxJQUFBb0MsRUFBQTRHLGFBK0NBdkosRUFBQXdKLFdBQUEsU0FBQUMsRUFBQW5ILEdBQ0FoQyxRQUFBQyxJQUFBLFFBQ0EsSUFBQW1KLEdBQUE3RixFQUFBNkYsVUFDQUMsTUFBQSw4Q0FDQXJJLFFBQUEsMkJBQ0FzSSxVQUFBLDJCQUNBQyxHQUFBLFVBQ0FDLE9BQUEsVUFDQUMsWUFBQU4sRUFDQTVGLEdBQUF6QyxLQUFBc0ksR0FBQTdJLEtBQUEsV0FDQVAsUUFBQUMsSUFBQSxXQUFBK0IsR0FDQUssRUFBQTZILGtCQUFBbEksR0FDQXRDLEVBQUFnQixNQUFBLCtCQUNBLFdBQ0FoQixFQUFBZ0IsTUFBQSx3Q0N4SEFyQyxJQUFBb00sUUFBQSxlQUFBLFVBQUEsU0FBQUMsR0FDQXBJLEtBQUFxSSxTQUFBLFNBQUFkLEdBQ0EsR0FBQUEsRUFBQSxDQUNBLEdBQUFlLEdBQUFmLEVBQUF0QixNQUFBLEtBQUEsR0FDQXNDLEVBQUFELEVBQUEzRCxRQUFBLElBQUEsS0FBQUEsUUFBQSxJQUFBLElBQ0EsT0FBQS9ELE1BQUE0SCxNQUFBSixFQUFBSyxLQUFBRixJQUNBLFVBR0F2SSxLQUFBc0gsVUFBQSxTQUFBQyxHQUNBYSxFQUFBTSxhQUFBQyxTQUFBcEIsR0FJQXZILEtBQUE0SSxTQUFBLFdBQ0EsTUFBQVIsR0FBQU0sYUFBQUMsVUFHQTNJLEtBQUE2SSxTQUFBLFdBQ0EsR0FBQXRCLEdBQUF2SCxLQUFBNEksVUFDQSxJQUFBckIsRUFBQSxDQUNBLEdBQUF1QixHQUFBOUksS0FBQXFJLFNBQUFkLEdBQ0F3QixFQUFBN0csS0FBQThHLE9BQUEsR0FBQUMsT0FBQUMsVUFBQSxNQUFBSixFQUFBSyxHQUlBLE9BSEFKLElBQ0EvSSxLQUFBd0gsU0FFQXVCLEVBRUEsT0FBQSxHQUlBL0ksS0FBQXdILE9BQUEsaUJBQ0FZLEdBQUFNLGFBQUFDLFVBSUEzSSxLQUFBZ0UsUUFBQSxXQUNBLE1BQUFoRSxNQUFBcUksU0FBQXJJLEtBQUE0SSxnQkFJQTdNLElBQUFxTixRQUFBLG1CQUFBLEtBQUEsWUFBQSxjQUFBLFNBQUFDLEVBQUEvTCxFQUFBNEQsR0FDQSxPQUNBb0ksUUFBQSxTQUFBcE4sR0FLQSxNQUpBQSxHQUFBbUssUUFBQW5LLEVBQUFtSyxZQUNBbkYsRUFBQTJILGFBQ0EzTSxFQUFBbUssUUFBQWtELGNBQUEsVUFBQXJJLEVBQUEwSCxZQUVBMU0sR0FFQWdDLFNBQUEsU0FBQUEsR0FPQSxNQUxBLE9BQUFBLEVBQUFzTCxRQUdBbE0sRUFBQWEsS0FBQSxVQUVBRCxHQUFBbUwsRUFBQXhNLEtBQUFxQixJQUNBdUwsY0FBQSxTQUFBdkwsR0FPQSxNQU5BLE9BQUFBLEVBQUFzTCxPQUNBbE0sRUFBQWEsS0FBQSxVQUdBVCxRQUFBQyxJQUFBTyxHQUVBbUwsRUFBQUssT0FBQXhMLFFBS0FuQyxJQUFBb00sUUFBQSxhQUFBLFdBQUEsU0FBQTNLLEdBRUF3QyxLQUFBc0UsVUFBQSxTQUFBL0YsR0FDQWYsRUFBQWdCLEtBQ0FoQixFQUFBaUIsU0FDQUMsUUFBQUgsR0FDQUksVUFBQSxLQUNBZ0wsU0FBQSIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgICAgdmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdlY290b25lQXBwJywgWyduZ1JvdXRlJywgJ25nTWF0ZXJpYWwnLCAnbmdNZXNzYWdlcycsICd2YWxpZGF0aW9uLm1hdGNoJ10pO1xuXG5hcHAuY29uZmlnKFsnJG1kVGhlbWluZ1Byb3ZpZGVyJywgJyRyb3V0ZVByb3ZpZGVyJywgJyRsb2NhdGlvblByb3ZpZGVyJywgJyRodHRwUHJvdmlkZXInLCBmdW5jdGlvbigkbWRUaGVtaW5nUHJvdmlkZXIsICRyb3V0ZVByb3ZpZGVyLCAkbG9jYXRpb25Qcm92aWRlciwgJGh0dHBQcm92aWRlcil7XG4gICAgJGxvY2F0aW9uUHJvdmlkZXIuaHRtbDVNb2RlKHRydWUpO1xuXG4gICAgLy9zZXQgdGhlbWUgYW5kIGNvbG9yIHBhbGV0dGVcbiAgICAkbWRUaGVtaW5nUHJvdmlkZXIudGhlbWUoJ2RlZmF1bHQnKVxuICAgICAgICAucHJpbWFyeVBhbGV0dGUoJ2dyZWVuJylcbiAgICAgICAgLmFjY2VudFBhbGV0dGUoJ2JsdWUtZ3JleScsIHsnZGVmYXVsdCc6JzYwMCd9KVxuICAgICAgICAud2FyblBhbGV0dGUgKCdvcmFuZ2UnKTtcblxuICAgIC8vcm91dGVzIGZvciB2aWV3c1xuICAgICRyb3V0ZVByb3ZpZGVyLndoZW4oJy8nLFxuICAgICAgICB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy92aWV3cy9jYWxjdWxhdG9yLmh0bWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogJ2NhbGN1bGF0ZUN0cmwgYXMgY3RybCdcbiAgICAgICAgfSkud2hlbignL2xvZ2luJyxcbiAgICAgICAge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvdmlld3MvbG9naW4uaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnbG9naW5DdHJsJ1xuICAgICAgICB9KS53aGVuKCcvcmVnaXN0ZXInLFxuICAgICAgICB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy92aWV3cy9yZWdpc3Rlci5odG1sJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdjcmVhdGVBY2NvdW50Q3RybCdcbiAgICAgICAgfSkud2hlbignL2FkbWluJyxcbiAgICAgICAge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvdmlld3MvYWRtaW4uaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnYWRtaW5DdHJsIGFzIGN0cmwnXG5cbiAgICAgICAgfSkud2hlbignL2FjY291bnQnLFxuICAgICAgICB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy92aWV3cy9hY2NvdW50Lmh0bWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogJydcbiAgICAgICAgfSkud2hlbignL2Rhc2hib2FyZCcsXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL3ZpZXdzL2Rhc2hib2FyZC5odG1sJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdkYXNoYm9hcmRDdHJsJ1xuICAgICAgICB9KS53aGVuKCcvcHJvamVjdHMnLFxuICAgICAgICB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy92aWV3cy9wcm9qZWN0Lmh0bWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogJ3Byb2plY3RzQ3RybCBhcyBjdHJsJ1xuICAgICAgICB9KS53aGVuKCcvc291cmNlcycsXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL3ZpZXdzL3NvdXJjZXMuaHRtbCdcbiAgICAgICAgfSkub3RoZXJ3aXNlKHtcbiAgICAgICAgICAgIHJlZGlyZWN0VG86ICcvJ1xuICAgICAgICB9KTtcblxuICAgICRodHRwUHJvdmlkZXIuaW50ZXJjZXB0b3JzLnB1c2goJ2F1dGhJbnRlcmNlcHRvcicpO1xufV0pOyIsIlxuLy8gRWRpdCBhY2NvdW50IGluZm8gSFRNTCAtIEtpbVxuYXBwLmNvbnRyb2xsZXIoJ2VkaXRBY2NvdW50Q3RybCcsIFsnJHNjb3BlJywgJyRodHRwJywgJyRsb2NhdGlvbicsICckcm9vdFNjb3BlJywgJyRtZFRvYXN0JywgZnVuY3Rpb24oJHNjb3BlLCAkaHR0cCwgJGxvY2F0aW9uLCAkcm9vdFNjb3BlLCAkbWRUb2FzdCkge1xuICAgICRzY29wZS51c2VyID0ge307XG4gICAgY29uc29sZS5sb2coJHJvb3RTY29wZS51c2VyKTtcbiAgICAkc2NvcGUudXNlciA9ICRyb290U2NvcGUudXNlcjtcblxuICAgICRzY29wZS51cGRhdGVVc2VySW5mbyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJQb3N0aW5nLi4uXCIpO1xuICAgICAgICAkaHR0cCh7XG4gICAgICAgICAgICBtZXRob2Q6ICdQVVQnLFxuICAgICAgICAgICAgdXJsOiAnL21vZGlmeVVzZXInLFxuICAgICAgICAgICAgZGF0YTogJHNjb3BlLnVzZXIsXG4gICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nXG4gICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XG4gICAgICAgICAgICAkbG9jYXRpb24ucGF0aCgnL2NhbGN1bGF0b3InKTtcbiAgICAgICAgICAgIGFsZXJ0KFwiWW91ciBhY2NvdW50IGluZm9ybWF0aW9uIGhhcyBiZWVuIGNoYW5nZWQuXCIpXG4gICAgICAgIH0sIGZ1bmN0aW9uKGVycm9yKXtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnJvcicpO1xuICAgICAgICAgICAgJHNjb3BlLmVycm9yVG9hc3QoXCJUaGVyZSB3YXMgYSBwcm9ibGVtIHByb2Nlc3NpbmcgeW91ciBjaGFuZ2VzLiBQbGVhc2UgdHJ5IGFnYWluIGxhdGVyLlwiKVxuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmVycm9yVG9hc3QgPSBmdW5jdGlvbihtZXNzYWdlKSB7XG4gICAgICAgICRtZFRvYXN0LnNob3coXG4gICAgICAgICAgICAkbWRUb2FzdC5zaW1wbGUoKVxuICAgICAgICAgICAgICAgIC5jb250ZW50KG1lc3NhZ2UpXG4gICAgICAgICAgICAgICAgLmhpZGVEZWxheSgzMDAwKVxuICAgICAgICApO1xuICAgIH07XG5cbn1dKTsiLCIvKipcbiAqIEFETUlOXG4gKi9cbmFwcC5jb250cm9sbGVyKCdhZG1pbkN0cmwnLCBbJyRodHRwJywgJyRzY29wZScsJyRwYXJzZScsIGZ1bmN0aW9uKCAkaHR0cCwgJHNjb3BlLCAkcGFyc2UgKXtcbiAgICAvLyBJTklUXG4gICAgaW5pdCgpO1xuXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHNlbGYuc3VnZ2VzdGlvbnMgPSAnJztcbiAgICBzZWxmLm1hcmtDb21wbGV0ZSA9IG1hcmtDb21wbGV0ZTtcbiAgICBzZWxmLnN1Ym1pdENTViA9IHN1Ym1pdENTVjtcblxuICAgIGZ1bmN0aW9uIHN1Ym1pdENTViggKXtcbiAgICAgICAgdmFyIGNzdk9iamVjdCA9ICRzY29wZS5jc3YucmVzdWx0O1xuICAgICAgICBjb25zb2xlLmxvZyhjc3ZPYmplY3QpO1xuXG4gICAgICAgICRodHRwLnBvc3QoJy9idWxrJywgY3N2T2JqZWN0KVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oIHJlcyApe1xuICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKTtcbiAgICAgICAgICAgICAgICByZXMuZGF0YS5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pe1xuICAgICAgICAgICAgICAgICAgICBpdGVtLnByb2plY3RfaWQgPSAxO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5kYXRhfSlcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKCBwcm9qZWN0cyApIHtcbiAgICAgICAgICAgICAgICAkaHR0cC5wb3N0KCcvcHJvamVjdC9jYWxjdWxhdGlvbi8nLCBwcm9qZWN0cylcbiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uKGVycil7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbWFya0NvbXBsZXRlKCBzdWdnZXN0aW9uICkge1xuICAgICAgICB2YXIgaWQgPSBzdWdnZXN0aW9uLmlkO1xuICAgICAgICBjb25zb2xlLmxvZyhpZCk7XG4gICAgICAgICRodHRwLnB1dCgnL3N1Z2dlc3Rpb24vY29tcGxldGUvJyArIGlkKS50aGVuKGZ1bmN0aW9uKCByZXMgKSB7XG4gICAgICAgICAgICBpbml0KCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgICAgICRodHRwLmdldCgnL3N1Z2dlc3Rpb24nKS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgIHZhciBzdWdnZXN0aW9ucyA9IHJlcy5kYXRhO1xuICAgICAgICAgICAgY29uc29sZS5sb2coc3VnZ2VzdGlvbnMpO1xuICAgICAgICAgICAgc2VsZi5zdWdnZXN0aW9ucyA9IHN1Z2dlc3Rpb25zO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAkc2NvcGUuY3N2ID0ge1xuICAgICAgICBjb250ZW50OiBudWxsLFxuICAgICAgICBoZWFkZXI6IHRydWUsXG4gICAgICAgIGhlYWRlclZpc2libGU6IHRydWUsXG4gICAgICAgIHNlcGFyYXRvcjogJywnLFxuICAgICAgICBzZXBhcmF0b3JWaXNpYmxlOiB0cnVlLFxuICAgICAgICByZXN1bHQ6IG51bGwsXG4gICAgICAgIGVuY29kaW5nOiAnSVNPLTg4NTktMScsXG4gICAgICAgIGVuY29kaW5nVmlzaWJsZTogdHJ1ZSxcbiAgICB9O1xuXG4gICAgdmFyIF9sYXN0R29vZFJlc3VsdCA9ICcnO1xuICAgICRzY29wZS50b1ByZXR0eUpTT04gPSBmdW5jdGlvbiAoanNvbiwgdGFiV2lkdGgpIHtcbiAgICAgICAgdmFyIG9ialN0ciA9IEpTT04uc3RyaW5naWZ5KGpzb24pO1xuICAgICAgICB2YXIgb2JqID0gbnVsbDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIG9iaiA9ICRwYXJzZShvYmpTdHIpKHt9KTtcbiAgICAgICAgfSBjYXRjaChlKXtcbiAgICAgICAgICAgIC8vIGVhdCAkcGFyc2UgZXJyb3JcbiAgICAgICAgICAgIHJldHVybiBfbGFzdEdvb2RSZXN1bHQ7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgcmVzdWx0ID0gSlNPTi5zdHJpbmdpZnkob2JqLCBudWxsLCBOdW1iZXIodGFiV2lkdGgpKTtcbiAgICAgICAgX2xhc3RHb29kUmVzdWx0ID0gcmVzdWx0O1xuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcblxufV0pOyIsImFwcC5jb250cm9sbGVyKCdjYWxjdWxhdGVDdHJsJywgWyckaHR0cCcsICckbWREaWFsb2cnLCAnJHJvb3RTY29wZScsICdhdXRoU2VydmljZScsICckbG9jYXRpb24nLCBmdW5jdGlvbiggJGh0dHAsICRtZERpYWxvZywgJHJvb3RTY29wZSwgYXV0aFNlcnZpY2UsICRsb2NhdGlvbiApIHtcblxuICAgIC8vIENoZWNrIHVzZXJcbiAgICAkcm9vdFNjb3BlLnVzZXIgPSBhdXRoU2VydmljZS5nZXRVc2VyKCk7XG5cbiAgICBpZigkcm9vdFNjb3BlLnVzZXIgJiYgJHJvb3RTY29wZS51c2VyLnVzZXJuYW1lKXtcbiAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy8nKTtcbiAgICB9XG5cbiAgICAvLyBJTklUXG4gICAgJGh0dHAuZ2V0KCcvbWF0ZXJpYWxzJykudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICB2YXIgbGlzdCA9IHJlc3BvbnNlLmRhdGE7XG5cbiAgICAgICAgbGlzdC5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pe1xuICAgICAgICAgICAgaXRlbS5wcmltYXJ5X2NhdCA9IGl0ZW0ucHJpbWFyeV9jYXQudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIC8vIC9pdGVtLnByaW1hcnlfY2F0ID0gaXRlbS5wcmltYXJ5X2NhdC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGl0ZW0ucHJpbWFyeV9jYXQuc2xpY2UoMSkudG9Mb3dlckNhc2UoKTtcblxuICAgICAgICB9KTtcbiAgICAgICAgc2VsZi5saXN0ID0gbGlzdDtcblxuICAgIH0pO1xuXG4gICAgLy8gU2VsZiBkZWNcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICBzZWxmLmxpc3QgPSAnJztcbiAgICBzZWxmLmlzRGlzYWJsZWQgPSBmYWxzZTtcbiAgICBzZWxmLnJlc3VsdCA9ICcnO1xuICAgIHNlbGYucXVlcnlTZWFyY2ggPSBxdWVyeVNlYXJjaDtcbiAgICBzZWxmLnNlbGVjdGVkSXRlbUNoYW5nZSA9IHNlbGVjdGVkSXRlbUNoYW5nZTtcbiAgICBzZWxmLnNlYXJjaFRleHRDaGFuZ2UgICA9IHNlYXJjaFRleHRDaGFuZ2U7XG4gICAgc2VsZi5uZXdTdWdnZXN0aW9uID0gbmV3U3VnZ2VzdGlvbjtcbiAgICBzZWxmLnN1Ym1pdFN1Z2dlc3Rpb24gPSBzdWJtaXRTdWdnZXN0aW9uO1xuICAgIHNlbGYudW5pdHMgPSBbXG4gICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdsYnMnLFxuICAgICAgICAgICAgY29udmVyc2lvbjogMC4wMDA1XG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdraWxvcycsXG4gICAgICAgICAgICBjb252ZXJzaW9uOiAwLjAwMTEwMjMxXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICd0b25zJyxcbiAgICAgICAgICAgIGNvbnZlcnNpb246IDFcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ21ldHJpYyB0b25zJyxcbiAgICAgICAgICAgIGNvbnZlcnNpb246IDEuMTAyMzFcbiAgICAgICAgfVxuICAgIF07XG4gICAgc2VsZi5zdWJtaXNzaW9uID0ge1xuICAgICAgICBlbWFpbDogJycsXG4gICAgICAgIG1hdGVyaWFsOiAnJyxcbiAgICAgICAgbm90ZXM6ICcnXG4gICAgfTtcbiAgICBzZWxmLm5ld0NhbGN1bGF0aW9uID0gbmV3Q2FsY3VsYXRpb247XG4gICAgc2VsZi5zYXZlVG9Qcm9qZWN0ID0gc2F2ZVRvUHJvamVjdDtcbiAgICBzZWxmLm5ld1Byb2plY3QgPSBuZXdQcm9qZWN0O1xuICAgIHNlbGYuY3JlYXRlUHJvamVjdCA9IGNyZWF0ZVByb2plY3Q7XG5cblxuICAgIGZ1bmN0aW9uIHNlYXJjaFRleHRDaGFuZ2UodGV4dCkge1xuICAgICAgICBjb25zb2xlLmxvZygnVGV4dCBjaGFuZ2VkIHRvICcsIHRleHQpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNlbGVjdGVkSXRlbUNoYW5nZShpdGVtKSB7XG4gICAgICAgIGlmICggaXRlbSA9PSB1bmRlZmluZWQgKSB7XG4gICAgICAgICAgICBzZWxmLmNhdGVnb3J5ID0gJyc7XG4gICAgICAgICAgICBzZWxmLnN1YmNhdGVnb3J5ID0gJyc7XG4gICAgICAgICAgICBzZWxmLndhcm1JZCA9ICcnO1xuICAgICAgICAgICAgc2VsZi53ZWlnaHQgPSAnJztcbiAgICAgICAgICAgIHNlbGYuaXRlbV9kZXNjcmlwdGlvbiA9ICcnO1xuICAgICAgICAgICAgc2VsZi5jb252ZXJzaW9uID0gJyc7XG4gICAgICAgICAgICBzZWxmLnJlc3VsdCA9ICcnO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbmV3Q2FsY3VsYXRpb24oKSB7XG5cbiAgICAgICAgdmFyIGNhbGN1bGF0ZSA9IHtcbiAgICAgICAgICAgIHdhcm1JZDogc2VsZi53YXJtSWQgfHwgc2VsZi5jYXRlZ29yeS5zZWNvbmRhcmllc1swXS53YXJtX2lkLFxuICAgICAgICAgICAgd2VpZ2h0OiBwYXJzZUZsb2F0KHNlbGYud2VpZ2h0KSAqIHNlbGYuY29udmVyc2lvblxuICAgICAgICB9O1xuXG4gICAgICAgICRodHRwLnBvc3QoJy9jYWxjdWxhdGlvbnMnLCBjYWxjdWxhdGUpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIHNlbGYucmVzdWx0ID0gTWF0aC5mbG9vcihNYXRoLmFicyhyZXNwb25zZS5kYXRhKSAqIDEwMDApIC8gMTAwMDtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2F2ZVRvUHJvamVjdCgpe1xuICAgICAgICB2YXIgbGluZUl0ZW0gPSB7XG4gICAgICAgICAgICBjYXRlZ29yeTogc2VsZi5jYXRlZ29yeSxcbiAgICAgICAgICAgIHN1YmNhdGVnb3J5OiBzZWxmLnN1YmNhdGVnb3J5LFxuICAgICAgICAgICAgd2FybV9JZDogc2VsZi53YXJtSWQsXG4gICAgICAgICAgICB3ZWlnaHQ6IHBhcnNlRmxvYXQoc2VsZi53ZWlnaHQpKnNlbGYuY29udmVyc2lvbixcbiAgICAgICAgICAgIHVuaXRzOiBzZWxmLnVuaXQubmFtZSxcbiAgICAgICAgICAgIGl0ZW1fZGVzY3JpcHRpb246IHNlbGYuaXRlbV9kZXNjcmlwdGlvblxuICAgICAgICB9O1xuICAgICAgICBjb25zb2xlLmxvZyhsaW5lSXRlbSk7XG4gICAgICAgICRodHRwLnBvc3QoJy9hZGRUb1Byb2plY3QnKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHF1ZXJ5U2VhcmNoKHF1ZXJ5KSB7XG4gICAgICAgIHJldHVybiBxdWVyeSA/IHNlbGYubGlzdC5maWx0ZXIoY3JlYXRlRmlsdGVyRm9yKHF1ZXJ5KSkgOiBzZWxmLmxpc3Q7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlRmlsdGVyRm9yKHF1ZXJ5KSB7XG4gICAgICAgIHZhciBsb3dlcmNhc2VRdWVyeSA9IHF1ZXJ5LnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIC8vcXVlcnkuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBxdWVyeS5zbGljZSgxKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIGZpbHRlckZuKG9iaikge1xuICAgICAgICAgICAgcmV0dXJuIChvYmoucHJpbWFyeV9jYXQuaW5kZXhPZihsb3dlcmNhc2VRdWVyeSkgIT0gLTEpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHN1Ym1pdFN1Z2dlc3Rpb24oKXtcbiAgICAgICAgJGh0dHAucG9zdCgnL3N1Z2dlc3Rpb24nLCBzZWxmLnN1Z2dlc3RTdWJtaXNzaW9uKS50aGVuKGZ1bmN0aW9uKCByZXMgKXtcbiAgICAgICAgICAgICRtZERpYWxvZy5oaWRlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG5ld1N1Z2dlc3Rpb24oIHN1Z2dlc3Rpb24gKXtcblxuICAgICAgICAkbWREaWFsb2cuc2hvdyh7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy92aWV3cy9zdWdnZXN0LW1vZGFsLmh0bWwnLFxuICAgICAgICAgICAgY2xpY2tPdXRzaWRlVG9DbG9zZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdjYWxjdWxhdGVDdHJsJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ2N0cmwnLFxuICAgICAgICAgICAgbG9jYWxzOiB7bWF0ZXJpYWw6IHNlbGYuc2VhcmNoVGV4dH1cbiAgICAgICAgfSlcblxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZVByb2plY3QoKSB7XG4gICAgICAgICRodHRwLnBvc3QoJy9wcm9qZWN0Jywgc2VsZi5wcm9qZWN0U3VibWlzc2lvbikudGhlbihmdW5jdGlvbihyZXMpe1xuICAgICAgICAgICAgJG1kRGlhbG9nLmhpZGUoKTtcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBuZXdQcm9qZWN0KCBuZXdQcm9qZWN0ICl7XG5cbiAgICAgICAgJG1kRGlhbG9nLnNob3coe1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9wcm9qZWN0LW1vZGFsLmh0bWwnLFxuICAgICAgICAgICAgY2xpY2tPdXRzaWRlVG9DbG9zZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdjYWxjdWxhdGVDdHJsJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ2N0cmwnXG4gICAgICAgIH0pXG5cbiAgICB9XG5cbn1dKTsiLCIvLyBSZWdpc3RlciBIVE1MIC0gTWFkZWxpbmVcbmFwcC5jb250cm9sbGVyKCdjcmVhdGVBY2NvdW50Q3RybCcsIFsnJHNjb3BlJywgJyRodHRwJywgJyRsb2NhdGlvbicsJ3Nob3dUb2FzdCcsIGZ1bmN0aW9uKCRzY29wZSwgJGh0dHAsICRsb2NhdGlvbiwgc2hvd1RvYXN0KSB7XG4gICAgJHNjb3BlLnVzZXIgPSB7fTtcblxuICAgICRzY29wZS5wcm9jZXNzRm9ybSA9IGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgICAgICRodHRwKHtcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgdXJsOiAnL3JlZ2lzdGVyJyxcbiAgICAgICAgICAgIGRhdGE6ICRzY29wZS51c2VyLFxuICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJ1xuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpO1xuICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy9sb2dpbicpO1xuICAgICAgICAgICAgc2hvd1RvYXN0LnNob3dUb2FzdChcIllvdXIgYWNjb3VudCBoYXMgYmVlbiBjcmVhdGVkLlwiKTtcbiAgICAgICAgfSwgZnVuY3Rpb24oZXJyKXtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgICBzaG93VG9hc3Quc2hvd1RvYXN0KGVyci5kYXRhLm1lc3NhZ2UpO1xuICAgICAgICB9KVxuICAgIH07XG5cbn1dKTsiLCJhcHAuZGlyZWN0aXZlKCduZ0NzdkltcG9ydCcsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHJlc3RyaWN0OiAnRScsXG4gICAgICAgIHRyYW5zY2x1ZGU6IHRydWUsXG4gICAgICAgIHJlcGxhY2U6IHRydWUsXG4gICAgICAgIHNjb3BlOntcbiAgICAgICAgICAgIGNvbnRlbnQ6Jz0/JyxcbiAgICAgICAgICAgIGhlYWRlcjogJz0/JyxcbiAgICAgICAgICAgIGhlYWRlclZpc2libGU6ICc9PycsXG4gICAgICAgICAgICBzZXBhcmF0b3I6ICc9PycsXG4gICAgICAgICAgICBzZXBhcmF0b3JWaXNpYmxlOiAnPT8nLFxuICAgICAgICAgICAgcmVzdWx0OiAnPT8nLFxuICAgICAgICAgICAgZW5jb2Rpbmc6ICc9PycsXG4gICAgICAgICAgICBlbmNvZGluZ1Zpc2libGU6ICc9PydcbiAgICAgICAgfSxcbiAgICAgICAgdGVtcGxhdGU6ICc8ZGl2PjxkaXYgbmctc2hvdz1cImhlYWRlclZpc2libGVcIj48ZGl2IGNsYXNzPVwibGFiZWxcIj5IZWFkZXI8L2Rpdj48aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgbmctbW9kZWw9XCJoZWFkZXJcIj48L2Rpdj4nK1xuICAgICAgICAnPGRpdiBuZy1zaG93PVwiZW5jb2RpbmcgJiYgZW5jb2RpbmdWaXNpYmxlXCI+PGRpdiBjbGFzcz1cImxhYmVsXCI+RW5jb2Rpbmc8L2Rpdj48c3Bhbj57e2VuY29kaW5nfX08L3NwYW4+PC9kaXY+JytcbiAgICAgICAgJzxkaXYgbmctc2hvdz1cInNlcGFyYXRvciAmJiBzZXBhcmF0b3JWaXNpYmxlXCI+PGRpdiBjbGFzcz1cImxhYmVsXCI+U2VwZXJhdG9yPC9kaXY+PHNwYW4+PGlucHV0IGNsYXNzPVwic2VwYXJhdG9yLWlucHV0XCIgdHlwZT1cInRleHRcIiBuZy1jaGFuZ2U9XCJjaGFuZ2VTZXBhcmF0b3JcIiBuZy1tb2RlbD1cInNlcGFyYXRvclwiPjxzcGFuPjwvZGl2PicrXG4gICAgICAgICc8ZGl2PjxpbnB1dCBjbGFzcz1cImJ0biBjdGEgZ3JheVwiIHR5cGU9XCJmaWxlXCIvPjwvZGl2PjwvZGl2PicsXG4gICAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50KSB7XG4gICAgICAgICAgICBzY29wZS5zZXBhcmF0b3JWaXNpYmxlID0gc2NvcGUuc2VwYXJhdG9yVmlzaWJsZSB8fCBmYWxzZTtcbiAgICAgICAgICAgIHNjb3BlLmhlYWRlclZpc2libGUgPSBzY29wZS5oZWFkZXJWaXNpYmxlIHx8IGZhbHNlO1xuXG4gICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoZWxlbWVudFswXS5xdWVyeVNlbGVjdG9yKCcuc2VwYXJhdG9yLWlucHV0JykpLm9uKCdrZXl1cCcsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoIHNjb3BlLmNvbnRlbnQgIT0gbnVsbCApIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjc3Y6IHNjb3BlLmNvbnRlbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXI6IHNjb3BlLmhlYWRlcixcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlcGFyYXRvcjogZS50YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBlbmNvZGluZzogc2NvcGUuZW5jb2RpbmdcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUucmVzdWx0ID0gY3N2VG9KU09OKGNvbnRlbnQpO1xuICAgICAgICAgICAgICAgICAgICBzY29wZS4kYXBwbHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgZWxlbWVudC5vbignY2hhbmdlJywgZnVuY3Rpb24ob25DaGFuZ2VFdmVudCkge1xuICAgICAgICAgICAgICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAgICAgICAgICAgICAgIHNjb3BlLmZpbGVuYW1lID0gb25DaGFuZ2VFdmVudC50YXJnZXQuZmlsZXNbMF0ubmFtZTtcbiAgICAgICAgICAgICAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24ob25Mb2FkRXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3N2OiBvbkxvYWRFdmVudC50YXJnZXQucmVzdWx0LnJlcGxhY2UoL1xcclxcbnxcXHIvZywnXFxuJyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyOiBzY29wZS5oZWFkZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VwYXJhdG9yOiBzY29wZS5zZXBhcmF0b3JcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBzY29wZS5jb250ZW50ID0gY29udGVudC5jc3Y7XG4gICAgICAgICAgICAgICAgICAgICAgICBzY29wZS5yZXN1bHQgPSBjc3ZUb0pTT04oY29udGVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzY29wZS5yZXN1bHQuZmlsZW5hbWUgPSBzY29wZS5maWxlbmFtZTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIGlmICggKG9uQ2hhbmdlRXZlbnQudGFyZ2V0LnR5cGUgPT09IFwiZmlsZVwiKSAmJiAob25DaGFuZ2VFdmVudC50YXJnZXQuZmlsZXMgIT0gbnVsbCB8fCBvbkNoYW5nZUV2ZW50LnNyY0VsZW1lbnQuZmlsZXMgIT0gbnVsbCkgKSAge1xuICAgICAgICAgICAgICAgICAgICByZWFkZXIucmVhZEFzVGV4dCgob25DaGFuZ2VFdmVudC5zcmNFbGVtZW50IHx8IG9uQ2hhbmdlRXZlbnQudGFyZ2V0KS5maWxlc1swXSwgc2NvcGUuZW5jb2RpbmcpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICggc2NvcGUuY29udGVudCAhPSBudWxsICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3N2OiBzY29wZS5jb250ZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcjogIXNjb3BlLmhlYWRlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXBhcmF0b3I6IHNjb3BlLnNlcGFyYXRvclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLnJlc3VsdCA9IGNzdlRvSlNPTihjb250ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB2YXIgY3N2VG9KU09OID0gZnVuY3Rpb24oY29udGVudCkge1xuICAgICAgICAgICAgICAgIHZhciBsaW5lcz1jb250ZW50LmNzdi5zcGxpdCgnXFxuJyk7XG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgICAgICAgICAgICAgIHZhciBzdGFydCA9IDA7XG4gICAgICAgICAgICAgICAgdmFyIGNvbHVtbkNvdW50ID0gbGluZXNbMF0uc3BsaXQoY29udGVudC5zZXBhcmF0b3IpLmxlbmd0aDtcblxuICAgICAgICAgICAgICAgIHZhciBoZWFkZXJzID0gW107XG4gICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQuaGVhZGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnM9bGluZXNbMF0uc3BsaXQoY29udGVudC5zZXBhcmF0b3IpO1xuICAgICAgICAgICAgICAgICAgICBzdGFydCA9IDE7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaT1zdGFydDsgaTxsaW5lcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgb2JqID0ge307XG4gICAgICAgICAgICAgICAgICAgIHZhciBjdXJyZW50bGluZT1saW5lc1tpXS5zcGxpdChuZXcgUmVnRXhwKGNvbnRlbnQuc2VwYXJhdG9yKycoPyFbXlwiXSpcIig/Oig/OlteXCJdKlwiKXsyfSkqW15cIl0qJCknKSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICggY3VycmVudGxpbmUubGVuZ3RoID09PSBjb2x1bW5Db3VudCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb250ZW50LmhlYWRlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGo9MDsgajxoZWFkZXJzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9ialtoZWFkZXJzW2pdXSA9IGN1cnJlbnRsaW5lW2pdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaz0wOyBrPGN1cnJlbnRsaW5lLmxlbmd0aDsgaysrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9ialtrXSA9IGN1cnJlbnRsaW5lW2tdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKG9iaik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9fSk7IiwiYXBwLmNvbnRyb2xsZXIoJ2Rhc2hib2FyZEN0cmwnLCBbJyRtZERpYWxvZycsICckcm9vdFNjb3BlJywgJyRzY29wZScsICckaHR0cCcsIGZ1bmN0aW9uKCRtZERpYWxvZywgJHJvb3RTY29wZSwgJHNjb3BlLCAkaHR0cCkge1xuICAgIHZhciB1c2VyPSRyb290U2NvcGUudXNlcjtcblxuXG4gICAgLy9sb2FkIHByb2plY3QgbGlzdCBvbiBwYWdlIGxvYWRcbiAgICAkaHR0cC5nZXQoJy9wcm9qZWN0LycgKyB1c2VyLmlkKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICRzY29wZS5wcm9qZWN0TGlzdCA9IHJlc3BvbnNlLmRhdGE7XG4gICAgICAgIC8vcmVzcG9uc2UuZGF0YS5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pe1xuICAgICAgICAvLyAgICBpdGVtLnByb2plY3RfbmFtZSA9IGl0ZW0ucHJpbWFyeV9jYXQudG9Mb3dlckNhc2UoKTtcbiAgICB9KTtcbi8vdGhpcyBpcyBmb3IgdGhlIHJlbW92ZSBwcm9qZWN0IG1vZGFsIGFsZXJ0IGZvciByZW1vdmluZyBhIHByb2plY3QsIGRhdGEgd2lsbCBzdGlsbCBiZSBpbiBkYXRhYmFzZS0tIHN0aWxsIG5vdCB3b3JraW5nIGNvcnJlY3RcblxuICAgICRzY29wZS5zaG93RGVsZXRlID0gZnVuY3Rpb24oZXYpIHtcblxuICAgICAgICBjb25zb2xlLmxvZygnQ0xJQ0snKTtcbiAgICAgICAgdmFyIGNvbmZpcm0gPSAkbWREaWFsb2cuY29uZmlybSgpXG4gICAgICAgICAgICAudGl0bGUoJ0FyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byByZW1vdmUgeW91ciBwcm9qZWN0PycpXG4gICAgICAgICAgICAuY29udGVudCgnVGhpcyBpcyBwZXJtYW5lbnQuJylcbiAgICAgICAgICAgIC5hcmlhTGFiZWwoJ1JlbW92ZSBwcm9qZWN0IGZyb20gYWNjb3VudCBwZXJtYW5lbnRseScpXG4gICAgICAgICAgICAub2soJ0RlbGV0ZScpXG4gICAgICAgICAgICAuY2FuY2VsKCdDYW5jZWwnKVxuICAgICAgICAgICAgLnRhcmdldEV2ZW50KGV2KTtcbiAgICAgICAgJG1kRGlhbG9nLnNob3coY29uZmlybSkudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICRzY29wZS5hbGVydCA9ICdZb3VyIHByb2plY3QgaGFzIGJlZW4gcmVtb3ZlZC4nO1xuICAgICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICRzY29wZS5hbGVydCA9ICdZb3VyIHByb2plY3QgaGFzIG5vdCBiZWVuIHJlbW92ZWQuJztcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIC8vbmVlZCB0byBjaGVjayBpZiB3ZSBuZWVkIHRoaXMhXG4vLyAgICBmdW5jdGlvbiBEaWFsb2dDb250cm9sbGVyKCRzY29wZSwgJG1kRGlhbG9nKSB7XG4vLyAgICAkc2NvcGUuaGlkZSA9IGZ1bmN0aW9uKCkge1xuLy8gICAgICAgICRtZERpYWxvZy5oaWRlKCk7XG4vLyAgICB9O1xuLy8gICAgJHNjb3BlLmNhbmNlbCA9IGZ1bmN0aW9uKCkge1xuLy8gICAgICAgICRtZERpYWxvZy5jYW5jZWwoKTtcbi8vICAgIH07XG4vLyAgICAkc2NvcGUuYW5zd2VyID0gZnVuY3Rpb24oYW5zd2VyKSB7XG4vLyAgICAgICAgJG1kRGlhbG9nLmhpZGUoYW5zd2VyKTtcbi8vICAgIH07XG4vL31cblxufV0pOyIsIi8vIExvZ2luIEhUTUwgLSBLYXRlXG5hcHAuY29udHJvbGxlcignbG9naW5DdHJsJywgWyckc2NvcGUnLCAnJGh0dHAnLCAnYXV0aFNlcnZpY2UnLCAnJGxvY2F0aW9uJywgJyRyb290U2NvcGUnLCdzaG93VG9hc3QnLCBmdW5jdGlvbigkc2NvcGUsICRodHRwLCBhdXRoU2VydmljZSwgJGxvY2F0aW9uLCAkcm9vdFNjb3BlLCBzaG93VG9hc3QpIHtcbiAgICAkc2NvcGUubG9naW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICRodHRwKHtcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgdXJsOiAnL2xvZ2luJyxcbiAgICAgICAgICAgIGRhdGE6ICRzY29wZS5mb3JtXG4gICAgICAgIH0pLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgICAgICAgYXV0aFNlcnZpY2Uuc2F2ZVRva2VuKHJlc3BvbnNlLmRhdGEudG9rZW4pO1xuICAgICAgICAgICAgJHJvb3RTY29wZS51c2VyID0gYXV0aFNlcnZpY2UuZ2V0VXNlcigpO1xuICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy8nKTtcbiAgICAgICAgfSwgZnVuY3Rpb24oZXJyKXtcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgICAgIHNob3dUb2FzdC5zaG93VG9hc3QoZXJyLmRhdGEubWVzc2FnZSk7XG4gICAgICAgIH0pXG4gICAgfTtcbn1dKTsiLCIvLyBDaGFuZ2UgTmF2aWdhdGlvbiBPcHRpb25zIHdpdGggTG9naW5cbmFwcC5jb250cm9sbGVyKCduYXZDdHJsJywgWydhdXRoU2VydmljZScsICckc2NvcGUnLCAnJHJvb3RTY29wZScsICckbG9jYXRpb24nLCAnJGh0dHAnLCBmdW5jdGlvbihhdXRoU2VydmljZSwgJHNjb3BlLCAkcm9vdFNjb3BlLCAkbG9jYXRpb24sICRodHRwKXtcbiAgICAkcm9vdFNjb3BlLnVzZXIgPSBhdXRoU2VydmljZS5nZXRVc2VyKCk7XG5cbiAgICBpZigkcm9vdFNjb3BlLnVzZXIgJiYgJHJvb3RTY29wZS51c2VyLnVzZXJuYW1lKXtcbiAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy8nKTtcbiAgICB9XG5cbiAgICAkc2NvcGUubG9nb3V0ID0gZnVuY3Rpb24oKXtcbiAgICAgICAgYXV0aFNlcnZpY2UubG9nb3V0KCk7XG4gICAgICAgICRyb290U2NvcGUudXNlciA9IGF1dGhTZXJ2aWNlLmdldFVzZXIoKTtcbiAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy8nKTtcbiAgICB9XG59XSk7XG4iLCIvLyBQcm9qZWN0IFBhZ2UgLSAgS2ltL01hZGVsZWluZVxuYXBwLmNvbnRyb2xsZXIoJ3Byb2plY3RzQ3RybCcsIFsnJG1kRGlhbG9nJywgJyRzY29wZScsICckcm9vdFNjb3BlJywgJyRodHRwJywgZnVuY3Rpb24oJG1kRGlhbG9nLCAkc2NvcGUsICRyb290U2NvcGUsICRodHRwKSB7XG5cbiAgICAvLyBTZWxmIGRlY1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBzZWxmLnByb2plY3RMaXN0ID0gW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IDIxLFxuICAgICAgICAgICAgICAgICAgICBwcm9qZWN0X25hbWU6IFwiYmVuJ3MgaG91c2VcIixcbiAgICAgICAgICAgICAgICAgICAgcHJvamVjdF9kZXNjcmlwdGlvbjogXCJSZW1vZGVsXCIsXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZWRfYXQ6IFwiMjAxNS0xMC0xNFQxNjo0Mjo0MC44OTZaXCIsXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRfYXQ6IFwiMjAxNS0xMC0xNFQxNjo0Mjo0MC45MDFaXCIsXG4gICAgICAgICAgICAgICAgICAgIHVzZXJfaWQ6IDQsXG4gICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5OiBcIndvb2RcIixcbiAgICAgICAgICAgICAgICAgICAgc3ViX2NhdGVnb3J5OiBcIm9ha1wiLFxuICAgICAgICAgICAgICAgICAgICB1bml0czogXCJsYnNcIixcbiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0OiAxMCxcbiAgICAgICAgICAgICAgICAgICAgY28yX29mZnNldDogMC4wMyxcbiAgICAgICAgICAgICAgICAgICAgcHJvamVjdF9pZDogNixcbiAgICAgICAgICAgICAgICAgICAgaXRlbV9kZXNjcmlwdGlvbjogXCJwb3JjaCBzcGluZGxlc1wiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiAyMDIsXG4gICAgICAgICAgICAgICAgICAgIHByb2plY3RfbmFtZTogXCJqYW1lcycgaG91c2VcIixcbiAgICAgICAgICAgICAgICAgICAgcHJvamVjdF9kZXNjcmlwdGlvbjogXCJTdW1taXQgQXZlIGNhcnJpYWdlIGhvdXNlIHRlYXJkb3duIGFuZCByZWJ1aWxkXCIsXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZWRfYXQ6IFwiMjAxNC0xMC0xNFQxNjo0Mjo0MC44OTZaXCIsXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRfYXQ6IFwiMjAxNC0xMC0xNFQxNjo0Mjo0MC45MDFaXCIsXG4gICAgICAgICAgICAgICAgICAgIHVzZXJfaWQ6IDI0LFxuICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogXCJhc3BoYWx0IHNoaW5nbGVzXCIsXG4gICAgICAgICAgICAgICAgICAgIHN1Yl9jYXRlZ29yeTogXCJudWxsXCIsXG4gICAgICAgICAgICAgICAgICAgIHVuaXRzOiBcImxic1wiLFxuICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ6IDEwMCxcbiAgICAgICAgICAgICAgICAgICAgY28yX29mZnNldDogMC4zMDMsXG4gICAgICAgICAgICAgICAgICAgIHByb2plY3RfaWQ6IDYsXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1fZGVzY3JpcHRpb246IFwiZGFyayBicm93biByb29mIHNoaW5nbGVzLS0zMCB5ZWFyIGxpZmUsIHNvbWUgd2F0ZXIgZGFtYWdlXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IDIxMTIsXG4gICAgICAgICAgICAgICAgICAgIHByb2plY3RfbmFtZTogXCJraW0ncyBiYXJuXCIsXG4gICAgICAgICAgICAgICAgICAgIHByb2plY3RfZGVzY3JpcHRpb246IFwiUmVtb2RlbFwiLFxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVkX2F0OiBcIjIwMTMtMTAtMTRUMTY6NDI6NDAuODk2WlwiLFxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVkX2F0OiBcIjIwMTMtMTAtMTRUMTY6NDI6NDAuOTAxWlwiLFxuICAgICAgICAgICAgICAgICAgICB1c2VyX2lkOiAxNCxcbiAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnk6IFwid29vZCBmbG9vcmluZ1wiLFxuICAgICAgICAgICAgICAgICAgICBzdWJfY2F0ZWdvcnk6IFwicGluZVwiLFxuICAgICAgICAgICAgICAgICAgICB1bml0czogXCJsYnNcIixcbiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0OiA1MDAsXG4gICAgICAgICAgICAgICAgICAgIGNvMl9vZmZzZXQ6IDMuMDMsXG4gICAgICAgICAgICAgICAgICAgIHByb2plY3RfaWQ6IDYsXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1fZGVzY3JpcHRpb246IFwiYmFybiB3b29kXCJcbiAgICAgICAgICAgICAgICB9XTtcblxuICAgIHNlbGYucmVzdWx0ID0gJyc7XG4gICAgc2VsZi5xdWVyeVNlYXJjaCA9IHF1ZXJ5U2VhcmNoO1xuICAgIHNlbGYuc2VsZWN0ZWRJdGVtQ2hhbmdlID0gc2VsZWN0ZWRJdGVtQ2hhbmdlO1xuICAgIHNlbGYuc2VhcmNoVGV4dENoYW5nZSA9IHNlYXJjaFRleHRDaGFuZ2U7XG4gICAgc2VsZi5wcm9qZWN0VG90YWwgPSAwO1xuICAgIHNlbGYuZGVsZXRlUHJvamVjdEl0ZW0gPSBkZWxldGVQcm9qZWN0SXRlbTtcbiAgICBzZWxmLmlkID0gMDtcblxuY29uc29sZS5sb2coc2VsZi5wcm9qZWN0TGlzdCk7XG5cbiAgICAvL3JlZnJlc2ggcHJvamVjdCBsaXN0XG4gICAgLy9mdW5jdGlvbiBnZXRQcm9qZWN0TGlzdCgpIHtcbiAgICAvLyAgICAkaHR0cC5nZXQoJy9wcm9qZWN0JywgJHJvb3RTY29wZS51c2VyLmlkKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgIC8vICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XG4gICAgLy8gICAgICAgIGNvbnNvbGUubG9nKFwidXNlciBpZDogXCIsICRyb290U2NvcGUudXNlci5pZCk7XG4gICAgLy8gICAgICAgIHZhciBwcm9qZWN0TGlzdCA9IHJlc3BvbnNlLmRhdGE7XG4gICAgLy8gICAgICAgIHByb2plY3RMaXN0LmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAvLyAgICAgICAgICAgIGl0ZW0ucHJvamVjdF9uYW1lID0gaXRlbS5wcm9qZWN0X25hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAvLyAgICAgICAgICAgIC8vaXRlbS5wcm9qZWN0X2Rlc2NyaXB0aW9uID0gaXRlbS5wcm9qZWN0X2Rlc2NyaXB0aW9uO1xuICAgIC8vICAgICAgICAgICAgLy9pdGVtLml0ZW1JZCA9IGl0ZW0uaWQ7XG4gICAgLy8gICAgICAgICAgICAvL2l0ZW0uY28yX29mZnNldCA9IGl0ZW0uY28yX29mZnNldDtcbiAgICAvLyAgICAgICAgfSk7XG4gICAgLy8gICAgICAgIHNlbGYucHJvamVjdExpc3QgPSBwcm9qZWN0TGlzdDtcbiAgICAvLyAgICB9KTtcbiAgICAvL31cblxuICAgIC8vbG9hZCBwcm9qZWN0IGxpc3Qgb24gcGFnZSBsb2FkXG4gICAgLy9nZXRQcm9qZWN0TGlzdCgpO1xuXG5cbiAgICBmdW5jdGlvbiBxdWVyeVNlYXJjaChxdWVyeSkge1xuICAgICAgICByZXR1cm4gcXVlcnkgPyBzZWxmLnByb2plY3RMaXN0LmZpbHRlcihjcmVhdGVGaWx0ZXJGb3IocXVlcnkpKSA6IHNlbGYucHJvamVjdExpc3Q7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlRmlsdGVyRm9yKHF1ZXJ5KSB7XG4gICAgICAgIHZhciBsb3dlcmNhc2VRdWVyeSA9IHF1ZXJ5LnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIC8vcXVlcnkuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBxdWVyeS5zbGljZSgxKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIGZpbHRlckZuKG9iaikge1xuICAgICAgICAgICAgcmV0dXJuIChvYmoucHJvamVjdF9uYW1lLmluZGV4T2YobG93ZXJjYXNlUXVlcnkpICE9IC0xKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZWFyY2hUZXh0Q2hhbmdlKHRleHQpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1RleHQgY2hhbmdlZCB0byAnLCB0ZXh0KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZWxlY3RlZEl0ZW1DaGFuZ2UoaXRlbSkge1xuICAgICAgICBjb25zb2xlLmxvZygnaXRlbScsIGl0ZW0pO1xuICAgICAgICBjb25zb2xlLmxvZygnc2VsZWN0ZWRfIHByb2plY3QnLHNlbGYuc2VsZWN0ZWRfcHJvamVjdCk7XG4gICAgICAgIGlmICggaXRlbSA9PSB1bmRlZmluZWQgKSB7XG4gICAgICAgICAgICBzZWxmLnNlbGVjdGVkX3Byb2plY3QgPSAnJztcbiAgICAgICAgICAgIHNlbGYucHJvamVjdF9kZXNjcmlwdGlvbiA9ICcnO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgJHNjb3BlLnNob3dEZWxldGUgPSBmdW5jdGlvbihldiwgaWQpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0NMSUNLJyk7XG4gICAgICAgIHZhciBjb25maXJtID0gJG1kRGlhbG9nLmNvbmZpcm0oKVxuICAgICAgICAgICAgLnRpdGxlKCdBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlIHRoaXMgaXRlbT8nKVxuICAgICAgICAgICAgLmNvbnRlbnQoJ1RoaXMgd2lsbCBiZSBwZXJtYW5lbnQuJylcbiAgICAgICAgICAgIC5hcmlhTGFiZWwoJ0RlbGV0ZSBpdGVtIHBlcm1hbmVudGx5JylcbiAgICAgICAgICAgIC5vaygnRGVsZXRlJylcbiAgICAgICAgICAgIC5jYW5jZWwoJ0NhbmNlbCcpXG4gICAgICAgICAgICAudGFyZ2V0RXZlbnQoZXYpO1xuICAgICAgICAkbWREaWFsb2cuc2hvdyhjb25maXJtKS50aGVuKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkRlbGV0aW5nXCIsIGlkKTtcbiAgICAgICAgICAgIHNlbGYuZGVsZXRlUHJvamVjdEl0ZW0oaWQpO1xuICAgICAgICAgICAgJHNjb3BlLmFsZXJ0ID0gJ1lvdXIgaXRlbSBoYXMgYmVlbiBkZWxldGVkLic7XG4gICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJHNjb3BlLmFsZXJ0ID0gJ1lvdXIgaXRlbSBoYXMgbm90IGJlZW4gZGVsZXRlZC4nO1xuICAgICAgICB9KTtcbiAgICB9O1xuLy8gICAgZnVuY3Rpb24gRGlhbG9nQ29udHJvbGxlcigkc2NvcGUsICRtZERpYWxvZykge1xuLy8gICAgJHNjb3BlLmhpZGUgPSBmdW5jdGlvbigpIHtcbi8vICAgICAgICAkbWREaWFsb2cuaGlkZSgpO1xuLy8gICAgfTtcbi8vICAgICRzY29wZS5jYW5jZWwgPSBmdW5jdGlvbigpIHtcbi8vICAgICAgICAkbWREaWFsb2cuY2FuY2VsKCk7XG4vLyAgICB9O1xuLy8gICAgJHNjb3BlLmFuc3dlciA9IGZ1bmN0aW9uKGFuc3dlcikge1xuLy8gICAgICAgICRtZERpYWxvZy5oaWRlKGFuc3dlcik7XG4vLyAgICB9O1xuLy99XG5cbiAgICBmdW5jdGlvbiBkZWxldGVQcm9qZWN0SXRlbShpZCkge1xuICAgICAgICBjb25zb2xlLmxvZyhcIkRlbGV0aW5nLi4uXCIsIGlkKTtcblxuICAgICAgICAvLyRodHRwLnVwZGF0ZSgnL3Byb2plY3QnLCBzZWxmLmlkKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAvL2ZpbmRPbmUgYW5kIGRlbGV0ZSBieSBpZCB1c2luZyBwcm9qZWN0bGlzdC5pZFxuICAgICAgICAvLyAgICBjb25zb2xlLmxvZyhcIkl0ZW0gd2FzIGRlbGV0ZWQuXCIsIHJlc3BvbnNlKTtcbiAgICAgICAgLy8gICAgc2VsZi5nZXRQcm9qZWN0TGlzdCgpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNhdmVQcm9qZWN0KCkge1xuICAgICAgICBjb25zb2xlLmxvZyhcIlNhdmluZy4uLlwiLCBzZWxmLmlkKTtcbiAgICAgICAgLy9zYXZlIGFsbCBwcm9qZWN0IGZpZWxkcz8gaG93IGRvIEkgZXZlbiBkbyB0aGlzP1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBjYWxjdWxhdGVQcm9qZWN0VG90YWwoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiY2FsY3VsYXRpbmcuLi5cIik7XG4gICAgICAgIHByb2plY3RMaXN0LmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgIHByb2plY3RUb3RhbCArPSBpdGVtLmNvMl9vZmZzZXQ7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhwcm9qZWN0VG90YWwpO1xuICAgICAgICByZXR1cm4gcHJvamVjdFRvdGFsO1xuXG4gICAgfSlcbiAgICB9XG5cblxuXG59XSk7IiwiLy8gU2VydmljZXMgZm9yIGF1dGhlbnRpY2F0aW9uXG5hcHAuc2VydmljZSgnYXV0aFNlcnZpY2UnLCBbJyR3aW5kb3cnLCBmdW5jdGlvbiAoJHdpbmRvdyl7XG4gICAgdGhpcy5wYXJzZUp3dCA9IGZ1bmN0aW9uICh0b2tlbikge1xuICAgICAgICBpZiAodG9rZW4pIHtcbiAgICAgICAgICAgIHZhciBiYXNlNjRVcmwgPSB0b2tlbi5zcGxpdCgnLicpWzFdO1xuICAgICAgICAgICAgdmFyIGJhc2U2NCA9IGJhc2U2NFVybC5yZXBsYWNlKCctJywgJysnKS5yZXBsYWNlKCdfJywgJy8nKTtcbiAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKCR3aW5kb3cuYXRvYihiYXNlNjQpKTtcbiAgICAgICAgfSBlbHNlIHJldHVybiB7fTtcbiAgICB9O1xuXG4gICAgdGhpcy5zYXZlVG9rZW4gPSBmdW5jdGlvbiAodG9rZW4pIHtcbiAgICAgICAgJHdpbmRvdy5sb2NhbFN0b3JhZ2Uuand0VG9rZW4gPSB0b2tlbjtcbiAgICAgICAgLy9jb25zb2xlLmxvZygnU2F2ZWQgdG9rZW46Jywkd2luZG93LmxvY2FsU3RvcmFnZS5qd3RUb2tlbik7XG4gICAgfTtcblxuICAgIHRoaXMuZ2V0VG9rZW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAkd2luZG93LmxvY2FsU3RvcmFnZS5qd3RUb2tlbjtcbiAgICB9O1xuXG4gICAgdGhpcy5pc0F1dGhlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHRva2VuID0gdGhpcy5nZXRUb2tlbigpO1xuICAgICAgICBpZiAodG9rZW4pIHtcbiAgICAgICAgICAgIHZhciBwYXJhbXMgPSB0aGlzLnBhcnNlSnd0KHRva2VuKTtcbiAgICAgICAgICAgIHZhciBub3RFeHBpcmVkID0gTWF0aC5yb3VuZChuZXcgRGF0ZSgpLmdldFRpbWUoKSAvIDEwMDApIDw9IHBhcmFtcy5leHA7XG4gICAgICAgICAgICBpZiAoIW5vdEV4cGlyZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ291dCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5vdEV4cGlyZWQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5sb2dvdXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGRlbGV0ZSAkd2luZG93LmxvY2FsU3RvcmFnZS5qd3RUb2tlbjtcbiAgICB9O1xuXG4gICAgLy8gZXhwb3NlIHVzZXIgYXMgYW4gb2JqZWN0XG4gICAgdGhpcy5nZXRVc2VyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXJzZUp3dCh0aGlzLmdldFRva2VuKCkpXG4gICAgfTtcbn1dKTtcblxuYXBwLmZhY3RvcnkoJ2F1dGhJbnRlcmNlcHRvcicsIFsnJHEnLCAnJGxvY2F0aW9uJywgJ2F1dGhTZXJ2aWNlJywgZnVuY3Rpb24gKCRxLCAkbG9jYXRpb24sIGF1dGhTZXJ2aWNlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVxdWVzdDogZnVuY3Rpb24gKGNvbmZpZykge1xuICAgICAgICAgICAgY29uZmlnLmhlYWRlcnMgPSBjb25maWcuaGVhZGVycyB8fCB7fTtcbiAgICAgICAgICAgIGlmIChhdXRoU2VydmljZS5pc0F1dGhlZCgpKSB7XG4gICAgICAgICAgICAgICAgY29uZmlnLmhlYWRlcnMuQXV0aG9yaXphdGlvbiA9ICdCZWFyZXIgJyArIGF1dGhTZXJ2aWNlLmdldFRva2VuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY29uZmlnO1xuICAgICAgICB9LFxuICAgICAgICByZXNwb25zZTogZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG5cbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQwMSkge1xuXG4gICAgICAgICAgICAgICAgLy8gaGFuZGxlIHRoZSBjYXNlIHdoZXJlIHRoZSB1c2VyIGlzIG5vdCBhdXRoZW50aWNhdGVkXG4gICAgICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoXCIvbG9naW5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UgfHwgJHEud2hlbihyZXNwb25zZSk7XG4gICAgICAgIH0sIHJlc3BvbnNlRXJyb3I6IGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDAxKSB7XG4gICAgICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoXCIvbG9naW5cIik7XG5cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuICRxLnJlamVjdChyZXNwb25zZSk7XG4gICAgICAgIH1cbiAgICB9O1xufV0pO1xuXG5hcHAuc2VydmljZSgnc2hvd1RvYXN0JywgWyckbWRUb2FzdCcsIGZ1bmN0aW9uKCRtZFRvYXN0KXtcblxuICAgIHRoaXMuc2hvd1RvYXN0ID0gZnVuY3Rpb24obWVzc2FnZSkge1xuICAgICAgICAkbWRUb2FzdC5zaG93KFxuICAgICAgICAgICAgJG1kVG9hc3Quc2ltcGxlKClcbiAgICAgICAgICAgICAgICAuY29udGVudChtZXNzYWdlKVxuICAgICAgICAgICAgICAgIC5oaWRlRGVsYXkoMzAwMClcbiAgICAgICAgICAgICAgICAucG9zaXRpb24oJ3RvcCByaWdodCcpXG4gICAgICAgICk7XG4gICAgfTtcblxufV0pOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
