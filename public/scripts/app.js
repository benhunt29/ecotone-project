var app=angular.module("ecotoneApp",["ngRoute","ngMaterial","ngMessages","validation.match"]);app.config(["$mdThemingProvider","$routeProvider","$locationProvider","$httpProvider",function(e,t,o,n){o.html5Mode(!0),e.theme("default").primaryPalette("green").accentPalette("blue-grey",{"default":"600"}).warnPalette("orange"),t.when("/",{templateUrl:"/views/calculator.html",controller:"calculateCtrl as ctrl"}).when("/login",{templateUrl:"/views/login.html",controller:"loginCtrl"}).when("/register",{templateUrl:"/views/register.html",controller:"createAccountCtrl"}).when("/admin",{templateUrl:"/views/admin.html",controller:"adminCtrl as ctrl"}).when("/account",{templateUrl:"/views/account.html",controller:""}).when("/dashboard",{templateUrl:"/views/dashboard.html",controller:"dashboardCtrl"}).when("/projects",{templateUrl:"/views/project.html",controller:"projectsCtrl as ctrl"}).when("/about",{templateUrl:"/views/about.html"}).when("/contact",{templateUrl:"/views/contact.html",controller:""}).when("/privacy",{templateUrl:"/views/privacy.html"}).when("/sources",{templateUrl:"/views/sources.html"}).otherwise({redirectTo:"/"})}]),app.controller("adminCtrl",["$http",function(e){function t(t){var n=t.id;console.log(n),e.put("/suggestion/complete/"+n).then(function(e){o()})}function o(){e.get("/suggestion").then(function(e){var t=e.data;console.log(t),n.suggestions=t})}o();var n=this;n.suggestions="",n.markComplete=t}]);var app=angular.module("ecotoneApp",["ngRoute","ngMaterial","ngMessages","validation.match"]);app.config(["$mdThemingProvider","$routeProvider","$locationProvider","$httpProvider",function(e,t,o,n){o.html5Mode(!0),e.theme("default").primaryPalette("green").accentPalette("blue-grey",{"default":"600"}).warnPalette("orange"),t.when("/",{templateUrl:"/views/calculator.html",controller:"calculateCtrl as ctrl"}).when("/login",{templateUrl:"/views/login.html",controller:"loginCtrl"}).when("/register",{templateUrl:"/views/register.html",controller:"createAccountCtrl"}).when("/admin",{templateUrl:"/views/admin.html",controller:"adminCtrl as ctrl"}).when("/account",{templateUrl:"/views/account.html",controller:""}).when("/dashboard",{templateUrl:"/views/dashboard.html",controller:"dashboardCtrl"}).when("/projects",{templateUrl:"/views/project.html",controller:"projectsCtrl"}).when("/about",{templateUrl:"/views/about.html"}).when("/contact",{templateUrl:"/views/contact.html",controller:""}).when("/privacy",{templateUrl:"/views/privacy.html"}).when("/sources",{templateUrl:"/views/sources.html"}).otherwise({redirectTo:"/"})}]),app.controller("calculateCtrl",["$http","$mdDialog","$rootScope","authService","$location",function(e,t,o,n,r){function a(e){console.log("Text changed to ",e)}function l(e){void 0==e&&(p.category="",p.subcategory="",p.warmId="",p.weight="",p.conversion="",p.result="")}function c(){var t={warmId:p.warmId||p.category.secondaries[0].warm_id,weight:parseFloat(p.weight)*p.conversion};e.post("/calculations",t).then(function(e){p.result=Math.floor(1e3*Math.abs(e.data))/1e3})}function i(e){return e?p.list.filter(s(e)):p.list}function s(e){var t=e.toLowerCase();return function(e){return-1!=e.primary_cat.indexOf(t)}}function u(){console.log("SUBMIT!"),console.log(p.submission),e.post("/suggestion",p.submission).then(function(e){t.hide()})}function h(e){console.log("NEW SUGGESTION!",p.searchText),t.show({templateUrl:"/views/submit-modal.html",clickOutsideToClose:!0,controller:"calculateCtrl",controllerAs:"ctrl",locals:{material:p.searchText}})}o.user=n.getUser(),o.user&&o.user.username&&r.path("/"),e.get("/materials").then(function(e){var t=e.data;t.forEach(function(e){e.primary_cat=e.primary_cat.toLowerCase()}),p.list=t});var p=this;p.list="",p.result="",p.querySearch=i,p.selectedItemChange=l,p.searchTextChange=a,p.newSuggestion=h,p.submitSuggestion=u,p.units=[{name:"lbs",conversion:5e-4},{name:"kilos",conversion:.00110231},{name:"tons",conversion:1},{name:"metric tons",conversion:1.10231}],p.submission={email:"",material:"",notes:""},p.newCalculation=c}]),app.controller("adminCtrl",["$http",function(e){function t(t){var n=t.id;console.log(n),e.put("/suggestion/complete/"+n).then(function(e){o()})}function o(){e.get("/suggestion").then(function(e){var t=e.data;console.log(t),n.suggestions=t})}o();var n=this;n.suggestions="",n.markComplete=t}]),app.controller("createAccountCtrl",["$scope","$http","$location",function(e,t,o){e.user={},e.processForm=function(n){console.log("Posting..."),t({method:"POST",url:"/register",data:e.user,dataType:"json"}).then(function(e){console.log(e),o.path("/login"),alert("Your account has been created.")})}}]),app.controller("loginCtrl",["$scope","$http","authService","$location","$rootScope",function(e,t,o,n,r){e.login=function(){t({method:"POST",url:"/login",data:e.form}).then(function(e){o.saveToken(e.data.token),r.user=o.getUser(),n.path("/")})}}]),app.controller("navCtrl",["authService","$scope","$rootScope","$location","$http",function(e,t,o,n,r){o.user=e.getUser(),o.user&&o.user.username&&n.path("/"),t.logout=function(){e.logout(),o.user=e.getUser(),n.path("/")}}]),app.controller("projectsCtrl",["$scope","$http",function(e,t){t.get("/project").then(function(t){console.log(t),e.projectList=t.data}),e.deleteProjectItem=function(o){console.log("Deleting...",e.projectlist.lineID),t.update("/project").then(function(e){console.log("Item was deleted.",e)})}}]),app.controller("dashboardCtrl",["$mdDialog","$scope","$http",function(e,t,o){o.get("/project").then(function(e){console.log(e),t.projectList=e.data}),t.showDelete=function(o){console.log("CLICK");var n=e.confirm().title("Are you sure you want to delete your project?").content("This is permanent.").ariaLabel("Delete project permanently").ok("Delete").cancel("Cancel").targetEvent(o);e.show(n).then(function(){t.alert="Your project has been deleted."},function(){t.alert="You project has not been deleted."})}}]),app.service("authService",["$window",function(e){this.parseJwt=function(t){if(t){var o=t.split(".")[1],n=o.replace("-","+").replace("_","/");return JSON.parse(e.atob(n))}return{}},this.saveToken=function(t){e.localStorage.jwtToken=t,console.log("Saved token:",e.localStorage.jwtToken)},this.getToken=function(){return e.localStorage.jwtToken},this.isAuthed=function(){var e=this.getToken();if(e){var t=this.parseJwt(e),o=Math.round((new Date).getTime()/1e3)<=t.exp;return o||this.logout(),o}return!1},this.logout=function(){delete e.localStorage.jwtToken},this.getUser=function(){return this.parseJwt(this.getToken())}}]),app.factory("authInterceptor",["$q","$location","authService",function(e,t,o){return{request:function(e){return e.headers=e.headers||{},o.isAuthed()&&(e.headers.Authorization="Bearer "+o.getToken()),e},response:function(o){return 401===o.status&&t.path("/login"),o||e.when(o)},responseError:function(o){return 401===o.status?t.path("/login"):console.log(o),e.reject(o)}}}]),app.controller("calculateCtrl",["$http","$mdDialog","$rootScope","authService","$location",function(e,t,o,n,r){function a(e){console.log("Text changed to ",e)}function l(e){void 0==e&&(p.category="",p.subcategory="",p.warmId="",p.weight="",p.conversion="",p.result="")}function c(){var t={warmId:p.warmId||p.category.secondaries[0].warm_id,weight:parseFloat(p.weight)*p.conversion};e.post("/calculations",t).then(function(e){p.result=Math.floor(1e3*Math.abs(e.data))/1e3})}function i(e){return e?p.list.filter(s(e)):p.list}function s(e){var t=e.toLowerCase();return function(e){return-1!=e.primary_cat.indexOf(t)}}function u(){e.post("/suggestion",p.submission).then(function(e){t.hide()})}function h(e){document.getElementById("sidenav").focus(),t.show({templateUrl:"/views/submit-modal.html",clickOutsideToClose:!0,controller:"calculateCtrl",controllerAs:"ctrl",locals:{material:p.searchText}})}o.user=n.getUser(),o.user&&o.user.username&&r.path("/"),e.get("/materials").then(function(e){var t=e.data;t.forEach(function(e){e.primary_cat=e.primary_cat.toLowerCase()}),p.list=t});var p=this;p.list="",p.isDisabled=!1,p.result="",p.querySearch=i,p.selectedItemChange=l,p.searchTextChange=a,p.newSuggestion=h,p.submitSuggestion=u,p.units=[{name:"lbs",conversion:5e-4},{name:"kilos",conversion:.00110231},{name:"tons",conversion:1},{name:"metric tons",conversion:1.10231}],p.submission={email:"",material:"",notes:""},p.newCalculation=c}]),app.controller("createAccountCtrl",["$scope","$http","$location",function(e,t,o){e.user={},e.processForm=function(n){console.log("Posting..."),t({method:"POST",url:"/register",data:e.user,dataType:"json"}).then(function(e){console.log(e),o.path("/login"),alert("Your account has been created.")})}}]),app.controller("dashboardCtrl",["$mdDialog","$scope","$http",function(e,t,o){o.get("/project").then(function(e){console.log(e),t.projectList=e.data}),t.showDelete=function(o){console.log("CLICK");var n=e.confirm().title("Are you sure you want to delete your project?").content("This is permanent.").ariaLabel("Delete project permanently").ok("Delete").cancel("Cancel").targetEvent(o);e.show(n).then(function(){t.alert="Your project has been deleted."},function(){t.alert="You project has not been deleted."})}}]),app.controller("loginCtrl",["$scope","$http","authService","$location","$rootScope",function(e,t,o,n,r){e.login=function(){t({method:"POST",url:"/login",data:e.form}).then(function(e){o.saveToken(e.data.token),r.user=o.getUser(),n.path("/")})}}]),app.controller("navCtrl",["authService","$scope","$rootScope","$location","$http",function(e,t,o,n,r){o.user=e.getUser(),o.user&&o.user.username&&n.path("/"),t.logout=function(){e.logout(),o.user=e.getUser(),n.path("/")}}]),app.controller("projectsCtrl",["$scope","$http",function(e,t){function o(e){return e?c.projectList.filter(n(e)):c.projectList}function n(e){var t=e.toLowerCase();return function(e){return-1!=e.primary_cat.indexOf(t)}}function r(e){console.log("Text changed to ",e)}function a(e){void 0==e&&(c.project_name="",c.project_description="")}function l(){console.log("Deleting...",c.projectList.ID)}var c=this;c.projectList="",c.result="",c.querySearch=o,c.selectedItemChange=a,c.searchTextChange=r,c.projectTotal=0,c.deleteProjectItem=l,c.id=0,c.getProjectList=function(){t.get("/project",userid).then(function(e){console.log(e);var t=e.data;t.forEach(function(e){project_name=e.project_name.toLowerCase(),project_description=e.project_description,id=e.id}),c.projectList=t})}}]),app.service("authService",["$window",function(e){this.parseJwt=function(t){if(t){var o=t.split(".")[1],n=o.replace("-","+").replace("_","/");return JSON.parse(e.atob(n))}return{}},this.saveToken=function(t){e.localStorage.jwtToken=t,console.log("Saved token:",e.localStorage.jwtToken)},this.getToken=function(){return e.localStorage.jwtToken},this.isAuthed=function(){var e=this.getToken();if(e){var t=this.parseJwt(e),o=Math.round((new Date).getTime()/1e3)<=t.exp;return o||this.logout(),o}return!1},this.logout=function(){delete e.localStorage.jwtToken},this.getUser=function(){return this.parseJwt(this.getToken())}}]),app.factory("authInterceptor",["$q","$location","authService",function(e,t,o){return{request:function(e){return e.headers=e.headers||{},o.isAuthed()&&(e.headers.Authorization="Bearer "+o.getToken()),e},response:function(o){return 401===o.status&&t.path("/login"),o||e.when(o)},responseError:function(o){return 401===o.status?t.path("/login"):console.log(o),e.reject(o)}}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJzY3JpcHRzL2FkbWluQ3RybC5qcyIsInNjcmlwdHMvYXBwLmpzIiwic2NyaXB0cy9jYWxjdWxhdGVDdHJsLmpzIiwic2NyaXB0cy9jcmVhdGVBY2NvdW50Q3RybC5qcyIsInNjcmlwdHMvZGFzaGJvYXJkQ3RybC5qcyIsInNjcmlwdHMvbG9naW5DdHJsLmpzIiwic2NyaXB0cy9uYXZDdHJsLmpzIiwic2NyaXB0cy9wcm9qZWN0c0N0cmwuanMiLCJzY3JpcHRzL3NlcnZpY2VzLmpzIl0sIm5hbWVzIjpbImFwcCIsImFuZ3VsYXIiLCJtb2R1bGUiLCJjb25maWciLCIkbWRUaGVtaW5nUHJvdmlkZXIiLCIkcm91dGVQcm92aWRlciIsIiRsb2NhdGlvblByb3ZpZGVyIiwiJGh0dHBQcm92aWRlciIsImh0bWw1TW9kZSIsInRoZW1lIiwicHJpbWFyeVBhbGV0dGUiLCJhY2NlbnRQYWxldHRlIiwiZGVmYXVsdCIsIndhcm5QYWxldHRlIiwid2hlbiIsInRlbXBsYXRlVXJsIiwiY29udHJvbGxlciIsIm90aGVyd2lzZSIsInJlZGlyZWN0VG8iLCIkaHR0cCIsIm1hcmtDb21wbGV0ZSIsInN1Z2dlc3Rpb24iLCJpZCIsImNvbnNvbGUiLCJsb2ciLCJwdXQiLCJ0aGVuIiwicmVzIiwiaW5pdCIsImdldCIsInN1Z2dlc3Rpb25zIiwiZGF0YSIsInNlbGYiLCJ0aGlzIiwiJG1kRGlhbG9nIiwiJHJvb3RTY29wZSIsImF1dGhTZXJ2aWNlIiwiJGxvY2F0aW9uIiwic2VhcmNoVGV4dENoYW5nZSIsInRleHQiLCJzZWxlY3RlZEl0ZW1DaGFuZ2UiLCJpdGVtIiwidW5kZWZpbmVkIiwiY2F0ZWdvcnkiLCJzdWJjYXRlZ29yeSIsIndhcm1JZCIsIndlaWdodCIsImNvbnZlcnNpb24iLCJyZXN1bHQiLCJuZXdDYWxjdWxhdGlvbiIsImNhbGN1bGF0ZSIsInNlY29uZGFyaWVzIiwid2FybV9pZCIsInBhcnNlRmxvYXQiLCJwb3N0IiwicmVzcG9uc2UiLCJNYXRoIiwiZmxvb3IiLCJhYnMiLCJxdWVyeVNlYXJjaCIsInF1ZXJ5IiwibGlzdCIsImZpbHRlciIsImNyZWF0ZUZpbHRlckZvciIsImxvd2VyY2FzZVF1ZXJ5IiwidG9Mb3dlckNhc2UiLCJvYmoiLCJwcmltYXJ5X2NhdCIsImluZGV4T2YiLCJzdWJtaXRTdWdnZXN0aW9uIiwic3VibWlzc2lvbiIsImhpZGUiLCJuZXdTdWdnZXN0aW9uIiwic2VhcmNoVGV4dCIsInNob3ciLCJjbGlja091dHNpZGVUb0Nsb3NlIiwiY29udHJvbGxlckFzIiwibG9jYWxzIiwibWF0ZXJpYWwiLCJ1c2VyIiwiZ2V0VXNlciIsInVzZXJuYW1lIiwicGF0aCIsImZvckVhY2giLCJ1bml0cyIsIm5hbWUiLCJlbWFpbCIsIm5vdGVzIiwiJHNjb3BlIiwicHJvY2Vzc0Zvcm0iLCJtZXRob2QiLCJ1cmwiLCJkYXRhVHlwZSIsImFsZXJ0IiwibG9naW4iLCJmb3JtIiwic2F2ZVRva2VuIiwidG9rZW4iLCJsb2dvdXQiLCJwcm9qZWN0TGlzdCIsImRlbGV0ZVByb2plY3RJdGVtIiwibGluZUlEIiwicHJvamVjdGxpc3QiLCJ1cGRhdGUiLCJzaG93RGVsZXRlIiwiZXYiLCJjb25maXJtIiwidGl0bGUiLCJjb250ZW50IiwiYXJpYUxhYmVsIiwib2siLCJjYW5jZWwiLCJ0YXJnZXRFdmVudCIsInNlcnZpY2UiLCIkd2luZG93IiwicGFyc2VKd3QiLCJiYXNlNjRVcmwiLCJzcGxpdCIsImJhc2U2NCIsInJlcGxhY2UiLCJKU09OIiwicGFyc2UiLCJhdG9iIiwibG9jYWxTdG9yYWdlIiwiand0VG9rZW4iLCJnZXRUb2tlbiIsImlzQXV0aGVkIiwicGFyYW1zIiwibm90RXhwaXJlZCIsInJvdW5kIiwiRGF0ZSIsImdldFRpbWUiLCJleHAiLCJmYWN0b3J5IiwiJHEiLCJyZXF1ZXN0IiwiaGVhZGVycyIsIkF1dGhvcml6YXRpb24iLCJzdGF0dXMiLCJyZXNwb25zZUVycm9yIiwicmVqZWN0IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImZvY3VzIiwiaXNEaXNhYmxlZCIsInByb2plY3RfbmFtZSIsInByb2plY3RfZGVzY3JpcHRpb24iLCJJRCIsInByb2plY3RUb3RhbCIsImdldFByb2plY3RMaXN0IiwidXNlcmlkIl0sIm1hcHBpbmdzIjoiQUFBQSxHQUFBQSxLQUFBQyxRQUFBQyxPQUFBLGNBQUEsVUFBQSxhQUFBLGFBQUEsb0JBRUFGLEtBQUFHLFFBQUEscUJBQUEsaUJBQUEsb0JBQUEsZ0JBQUEsU0FBQUMsRUFBQUMsRUFBQUMsRUFBQUMsR0FDQUQsRUFBQUUsV0FBQSxHQUdBSixFQUFBSyxNQUFBLFdBQ0FDLGVBQUEsU0FDQUMsY0FBQSxhQUFBQyxVQUFBLFFBQ0FDLFlBQUEsVUFHQVIsRUFBQVMsS0FBQSxLQUVBQyxZQUFBLHlCQUNBQyxXQUFBLDBCQUNBRixLQUFBLFVBRUFDLFlBQUEsb0JBQ0FDLFdBQUEsY0FDQUYsS0FBQSxhQUVBQyxZQUFBLHVCQUNBQyxXQUFBLHNCQUNBRixLQUFBLFVBRUFDLFlBQUEsb0JBQ0FDLFdBQUEsc0JBRUFGLEtBQUEsWUFFQUMsWUFBQSxzQkFDQUMsV0FBQSxLQUNBRixLQUFBLGNBRUFDLFlBQUEsd0JBQ0FDLFdBQUEsa0JBQ0FGLEtBQUEsYUFFQUMsWUFBQSxzQkFDQUMsV0FBQSx5QkFDQUYsS0FBQSxVQUVBQyxZQUFBLHNCQUNBRCxLQUFBLFlBRUFDLFlBQUEsc0JBQ0FDLFdBQUEsS0FDQUYsS0FBQSxZQUVBQyxZQUFBLHdCQUNBRCxLQUFBLFlBRUFDLFlBQUEsd0JBQ0FFLFdBQ0FDLFdBQUEsU0NwREFsQixJQUFBZ0IsV0FBQSxhQUFBLFFBQUEsU0FBQUcsR0FRQSxRQUFBQyxHQUFBQyxHQUNBLEdBQUFDLEdBQUFELEVBQUFDLEVBQ0FDLFNBQUFDLElBQUFGLEdBQ0FILEVBQUFNLElBQUEsd0JBQUFILEdBQUFJLEtBQUEsU0FBQUMsR0FDQUMsTUFJQSxRQUFBQSxLQUNBVCxFQUFBVSxJQUFBLGVBQUFILEtBQUEsU0FBQUMsR0FDQSxHQUFBRyxHQUFBSCxFQUFBSSxJQUNBUixTQUFBQyxJ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b3VyY2VzQ29udGVudCI6WyJ2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ2Vjb3RvbmVBcHAnLCBbJ25nUm91dGUnLCAnbmdNYXRlcmlhbCcsICduZ01lc3NhZ2VzJywgJ3ZhbGlkYXRpb24ubWF0Y2gnXSk7XG5cbmFwcC5jb25maWcoWyckbWRUaGVtaW5nUHJvdmlkZXInLCAnJHJvdXRlUHJvdmlkZXInLCAnJGxvY2F0aW9uUHJvdmlkZXInLCAnJGh0dHBQcm92aWRlcicsIGZ1bmN0aW9uKCRtZFRoZW1pbmdQcm92aWRlciwgJHJvdXRlUHJvdmlkZXIsICRsb2NhdGlvblByb3ZpZGVyLCAkaHR0cFByb3ZpZGVyKXtcbiAgICAkbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUodHJ1ZSk7XG5cbiAgICAvL3NldCB0aGVtZSBhbmQgY29sb3IgcGFsZXR0ZVxuICAgICRtZFRoZW1pbmdQcm92aWRlci50aGVtZSgnZGVmYXVsdCcpXG4gICAgICAgIC5wcmltYXJ5UGFsZXR0ZSgnZ3JlZW4nKVxuICAgICAgICAuYWNjZW50UGFsZXR0ZSgnYmx1ZS1ncmV5JywgeydkZWZhdWx0JzonNjAwJ30pXG4gICAgICAgIC53YXJuUGFsZXR0ZSAoJ29yYW5nZScpO1xuXG4gICAgLy9yb3V0ZXMgZm9yIHZpZXdzXG4gICAgJHJvdXRlUHJvdmlkZXIud2hlbignLycsXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL3ZpZXdzL2NhbGN1bGF0b3IuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnY2FsY3VsYXRlQ3RybCBhcyBjdHJsJ1xuICAgICAgICB9KS53aGVuKCcvbG9naW4nLFxuICAgICAgICB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy92aWV3cy9sb2dpbi5odG1sJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdsb2dpbkN0cmwnXG4gICAgICAgIH0pLndoZW4oJy9yZWdpc3RlcicsXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL3ZpZXdzL3JlZ2lzdGVyLmh0bWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogJ2NyZWF0ZUFjY291bnRDdHJsJ1xuICAgICAgICB9KS53aGVuKCcvYWRtaW4nLFxuICAgICAgICB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy92aWV3cy9hZG1pbi5odG1sJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdhZG1pbkN0cmwgYXMgY3RybCdcblxuICAgICAgICB9KS53aGVuKCcvYWNjb3VudCcsXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL3ZpZXdzL2FjY291bnQuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnJ1xuICAgICAgICB9KS53aGVuKCcvZGFzaGJvYXJkJyxcbiAgICAgICAge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvdmlld3MvZGFzaGJvYXJkLmh0bWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogJ2Rhc2hib2FyZEN0cmwnXG4gICAgICAgIH0pLndoZW4oJy9wcm9qZWN0cycsXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL3ZpZXdzL3Byb2plY3QuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAncHJvamVjdHNDdHJsIGFzIGN0cmwnXG4gICAgICAgIH0pLndoZW4oJy9hYm91dCcsXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL3ZpZXdzL2Fib3V0Lmh0bWwnXG4gICAgICAgIH0pLndoZW4oJy9jb250YWN0JyxcbiAgICAgICAge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvdmlld3MvY29udGFjdC5odG1sJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICcnXG4gICAgICAgIH0pLndoZW4oJy9wcml2YWN5JyxcbiAgICAgICAge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvdmlld3MvcHJpdmFjeS5odG1sJ1xuICAgICAgICB9KS53aGVuKCcvc291cmNlcycsXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL3ZpZXdzL3NvdXJjZXMuaHRtbCdcbiAgICAgICAgfSkub3RoZXJ3aXNlKHtcbiAgICAgICAgICAgIHJlZGlyZWN0VG86ICcvJ1xuICAgICAgICB9KTtcblxuICAgIC8vJGh0dHBQcm92aWRlci5pbnRlcmNlcHRvcnMucHVzaCgnYXV0aEludGVyY2VwdG9yJyk7XG59XSk7IiwiLyoqXG4gKiBBRE1JTlxuICovXG5hcHAuY29udHJvbGxlcignYWRtaW5DdHJsJywgWyckaHR0cCcsIGZ1bmN0aW9uKCAkaHR0cCApe1xuICAgIC8vIElOSVRcbiAgICBpbml0KCk7XG5cbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgc2VsZi5zdWdnZXN0aW9ucyA9ICcnO1xuICAgIHNlbGYubWFya0NvbXBsZXRlID0gbWFya0NvbXBsZXRlO1xuXG4gICAgZnVuY3Rpb24gbWFya0NvbXBsZXRlKCBzdWdnZXN0aW9uICkge1xuICAgICAgICB2YXIgaWQgPSBzdWdnZXN0aW9uLmlkO1xuICAgICAgICBjb25zb2xlLmxvZyhpZCk7XG4gICAgICAgICRodHRwLnB1dCgnL3N1Z2dlc3Rpb24vY29tcGxldGUvJyArIGlkKS50aGVuKGZ1bmN0aW9uKCByZXMgKSB7XG4gICAgICAgICAgICBpbml0KCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgICAgICRodHRwLmdldCgnL3N1Z2dlc3Rpb24nKS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgIHZhciBzdWdnZXN0aW9ucyA9IHJlcy5kYXRhO1xuICAgICAgICAgICAgY29uc29sZS5sb2coc3VnZ2VzdGlvbnMpO1xuICAgICAgICAgICAgc2VsZi5zdWdnZXN0aW9ucyA9IHN1Z2dlc3Rpb25zO1xuICAgICAgICB9KTtcbiAgICB9XG5cblxufV0pOyIsInZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnZWNvdG9uZUFwcCcsIFsnbmdSb3V0ZScsICduZ01hdGVyaWFsJywgJ25nTWVzc2FnZXMnLCAndmFsaWRhdGlvbi5tYXRjaCddKTtcblxuYXBwLmNvbmZpZyhbJyRtZFRoZW1pbmdQcm92aWRlcicsICckcm91dGVQcm92aWRlcicsICckbG9jYXRpb25Qcm92aWRlcicsICckaHR0cFByb3ZpZGVyJywgZnVuY3Rpb24oJG1kVGhlbWluZ1Byb3ZpZGVyLCAkcm91dGVQcm92aWRlciwgJGxvY2F0aW9uUHJvdmlkZXIsICRodHRwUHJvdmlkZXIpe1xuICAgICRsb2NhdGlvblByb3ZpZGVyLmh0bWw1TW9kZSh0cnVlKTtcblxuICAgIC8vc2V0IHRoZW1lIGFuZCBjb2xvciBwYWxldHRlXG4gICAgJG1kVGhlbWluZ1Byb3ZpZGVyLnRoZW1lKCdkZWZhdWx0JylcbiAgICAgICAgLnByaW1hcnlQYWxldHRlKCdncmVlbicpXG4gICAgICAgIC5hY2NlbnRQYWxldHRlKCdibHVlLWdyZXknLCB7J2RlZmF1bHQnOic2MDAnfSlcbiAgICAgICAgLndhcm5QYWxldHRlICgnb3JhbmdlJyk7XG5cbiAgICAvL3JvdXRlcyBmb3Igdmlld3NcbiAgICAkcm91dGVQcm92aWRlci53aGVuKCcvJyxcbiAgICAgICAge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvdmlld3MvY2FsY3VsYXRvci5odG1sJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdjYWxjdWxhdGVDdHJsIGFzIGN0cmwnXG4gICAgICAgIH0pLndoZW4oJy9sb2dpbicsXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL3ZpZXdzL2xvZ2luLmh0bWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogJ2xvZ2luQ3RybCdcbiAgICAgICAgfSkud2hlbignL3JlZ2lzdGVyJyxcbiAgICAgICAge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvdmlld3MvcmVnaXN0ZXIuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnY3JlYXRlQWNjb3VudEN0cmwnXG4gICAgICAgIH0pLndoZW4oJy9hZG1pbicsXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL3ZpZXdzL2FkbWluLmh0bWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogJ2FkbWluQ3RybCBhcyBjdHJsJ1xuXG4gICAgICAgIH0pLndoZW4oJy9hY2NvdW50JyxcbiAgICAgICAge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvdmlld3MvYWNjb3VudC5odG1sJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICcnXG4gICAgICAgIH0pLndoZW4oJy9kYXNoYm9hcmQnLFxuICAgICAgICB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy92aWV3cy9kYXNoYm9hcmQuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnZGFzaGJvYXJkQ3RybCdcblxuICAgICAgICB9KS53aGVuKCcvcHJvamVjdHMnLFxuICAgICAgICB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy92aWV3cy9wcm9qZWN0Lmh0bWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogJ3Byb2plY3RzQ3RybCdcbiAgICAgICAgfSkud2hlbignL2Fib3V0JyxcbiAgICAgICAge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvdmlld3MvYWJvdXQuaHRtbCdcbiAgICAgICAgfSkud2hlbignL2NvbnRhY3QnLFxuICAgICAgICB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy92aWV3cy9jb250YWN0Lmh0bWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogJydcbiAgICAgICAgfSkud2hlbignL3ByaXZhY3knLFxuICAgICAgICB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy92aWV3cy9wcml2YWN5Lmh0bWwnXG4gICAgICAgIH0pLndoZW4oJy9zb3VyY2VzJyxcbiAgICAgICAge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvdmlld3Mvc291cmNlcy5odG1sJ1xuICAgICAgICB9KS5vdGhlcndpc2Uoe1xuICAgICAgICAgICAgcmVkaXJlY3RUbzogJy8nXG4gICAgICAgIH0pO1xuXG4gICAgLy8kaHR0cFByb3ZpZGVyLmludGVyY2VwdG9ycy5wdXNoKCdhdXRoSW50ZXJjZXB0b3InKTtcbn1dKTtcblxuYXBwLmNvbnRyb2xsZXIoJ2NhbGN1bGF0ZUN0cmwnLCBbJyRodHRwJywgJyRtZERpYWxvZycsICckcm9vdFNjb3BlJywgJ2F1dGhTZXJ2aWNlJywgJyRsb2NhdGlvbicsIGZ1bmN0aW9uKCAkaHR0cCwgJG1kRGlhbG9nLCAkcm9vdFNjb3BlLCBhdXRoU2VydmljZSwgJGxvY2F0aW9uICkge1xuXG4gICAgLy8gQ2hlY2sgdXNlclxuICAgICRyb290U2NvcGUudXNlciA9IGF1dGhTZXJ2aWNlLmdldFVzZXIoKTtcblxuICAgIGlmKCRyb290U2NvcGUudXNlciAmJiAkcm9vdFNjb3BlLnVzZXIudXNlcm5hbWUpe1xuICAgICAgICAkbG9jYXRpb24ucGF0aCgnLycpO1xuICAgIH1cblxuICAgIC8vIElOSVRcbiAgICAkaHR0cC5nZXQoJy9tYXRlcmlhbHMnKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgIHZhciBsaXN0ID0gcmVzcG9uc2UuZGF0YTtcblxuICAgICAgICBsaXN0LmZvckVhY2goZnVuY3Rpb24oaXRlbSl7XG4gICAgICAgICAgICBpdGVtLnByaW1hcnlfY2F0ID0gaXRlbS5wcmltYXJ5X2NhdC50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgLy8gL2l0ZW0ucHJpbWFyeV9jYXQgPSBpdGVtLnByaW1hcnlfY2F0LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgaXRlbS5wcmltYXJ5X2NhdC5zbGljZSgxKS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgICAgIH0pO1xuICAgICAgICBzZWxmLmxpc3QgPSBsaXN0O1xuXG4gICAgfSk7XG5cbiAgICAvLyBTZWxmIGRlY1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIHNlbGYubGlzdCA9ICcnO1xuICAgIHNlbGYucmVzdWx0ID0gJyc7XG4gICAgc2VsZi5xdWVyeVNlYXJjaCA9IHF1ZXJ5U2VhcmNoO1xuICAgIHNlbGYuc2VsZWN0ZWRJdGVtQ2hhbmdlID0gc2VsZWN0ZWRJdGVtQ2hhbmdlO1xuICAgIHNlbGYuc2VhcmNoVGV4dENoYW5nZSAgID0gc2VhcmNoVGV4dENoYW5nZTtcbiAgICBzZWxmLm5ld1N1Z2dlc3Rpb24gPSBuZXdTdWdnZXN0aW9uO1xuICAgIHNlbGYuc3VibWl0U3VnZ2VzdGlvbiA9IHN1Ym1pdFN1Z2dlc3Rpb247XG4gICAgc2VsZi51bml0cyA9IFtcbiAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ2xicycsXG4gICAgICAgICAgICBjb252ZXJzaW9uOiAwLjAwMDVcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ2tpbG9zJyxcbiAgICAgICAgICAgIGNvbnZlcnNpb246IDAuMDAxMTAyMzFcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ3RvbnMnLFxuICAgICAgICAgICAgY29udmVyc2lvbjogMVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnbWV0cmljIHRvbnMnLFxuICAgICAgICAgICAgY29udmVyc2lvbjogMS4xMDIzMVxuICAgICAgICB9XG4gICAgXTtcbiAgICBzZWxmLnN1Ym1pc3Npb24gPSB7XG4gICAgICAgIGVtYWlsOiAnJyxcbiAgICAgICAgbWF0ZXJpYWw6ICcnLFxuICAgICAgICBub3RlczogJydcbiAgICB9O1xuICAgIHNlbGYubmV3Q2FsY3VsYXRpb24gPSBuZXdDYWxjdWxhdGlvbjtcblxuXG4gICAgZnVuY3Rpb24gc2VhcmNoVGV4dENoYW5nZSh0ZXh0KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdUZXh0IGNoYW5nZWQgdG8gJywgdGV4dCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2VsZWN0ZWRJdGVtQ2hhbmdlKGl0ZW0pIHtcbiAgICAgICAgaWYgKCBpdGVtID09IHVuZGVmaW5lZCApIHtcbiAgICAgICAgICAgIHNlbGYuY2F0ZWdvcnkgPSAnJztcbiAgICAgICAgICAgIHNlbGYuc3ViY2F0ZWdvcnkgPSAnJztcbiAgICAgICAgICAgIHNlbGYud2FybUlkID0gJyc7XG4gICAgICAgICAgICBzZWxmLndlaWdodCA9ICcnO1xuICAgICAgICAgICAgc2VsZi5jb252ZXJzaW9uID0gJyc7XG4gICAgICAgICAgICBzZWxmLnJlc3VsdCA9ICcnO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbmV3Q2FsY3VsYXRpb24oKSB7XG5cbiAgICAgICAgdmFyIGNhbGN1bGF0ZSA9IHtcbiAgICAgICAgICAgIHdhcm1JZDogc2VsZi53YXJtSWQgfHwgc2VsZi5jYXRlZ29yeS5zZWNvbmRhcmllc1swXS53YXJtX2lkLFxuICAgICAgICAgICAgd2VpZ2h0OiBwYXJzZUZsb2F0KHNlbGYud2VpZ2h0KSAqIHNlbGYuY29udmVyc2lvblxuICAgICAgICB9O1xuXG4gICAgICAgICRodHRwLnBvc3QoJy9jYWxjdWxhdGlvbnMnLCBjYWxjdWxhdGUpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIHNlbGYucmVzdWx0ID0gTWF0aC5mbG9vcihNYXRoLmFicyhyZXNwb25zZS5kYXRhKSAqIDEwMDApIC8gMTAwMDtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2F2ZVRvUHJvamVjdCgpe1xuICAgICAgICB2YXIgbGluZUl0ZW0gPSB7XG4gICAgICAgICAgICBjYXRlZ29yeTogc2VsZi5jYXRlZ29yeSxcbiAgICAgICAgICAgIHN1YmNhdGVnb3J5OiBzZWxmLnN1YmNhdGVnb3J5LFxuICAgICAgICAgICAgd2FybV9JZDogc2VsZi53YXJtSWQsXG4gICAgICAgICAgICB3ZWlnaHQ6IHBhcnNlRmxvYXQoc2VsZi53ZWlnaHQpKnNlbGYuY29udmVyc2lvbixcbiAgICAgICAgICAgIHVuaXRzOiBzZWxmLnVuaXQubmFtZVxuICAgICAgICB9O1xuICAgICAgICBjb25zb2xlLmxvZyhsaW5lSXRlbSk7XG4gICAgICAgICRodHRwLnBvc3QoJy9hZGRUb1Byb2plY3QnKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHF1ZXJ5U2VhcmNoKHF1ZXJ5KSB7XG4gICAgICAgIHJldHVybiBxdWVyeSA/IHNlbGYubGlzdC5maWx0ZXIoY3JlYXRlRmlsdGVyRm9yKHF1ZXJ5KSkgOiBzZWxmLmxpc3Q7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlRmlsdGVyRm9yKHF1ZXJ5KSB7XG4gICAgICAgIHZhciBsb3dlcmNhc2VRdWVyeSA9IHF1ZXJ5LnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIC8vcXVlcnkuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBxdWVyeS5zbGljZSgxKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIGZpbHRlckZuKG9iaikge1xuICAgICAgICAgICAgcmV0dXJuIChvYmoucHJpbWFyeV9jYXQuaW5kZXhPZihsb3dlcmNhc2VRdWVyeSkgIT0gLTEpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHN1Ym1pdFN1Z2dlc3Rpb24oKXtcbiAgICAgICAgY29uc29sZS5sb2coJ1NVQk1JVCEnKTtcbiAgICAgICAgY29uc29sZS5sb2coc2VsZi5zdWJtaXNzaW9uKTtcbiAgICAgICAgJGh0dHAucG9zdCgnL3N1Z2dlc3Rpb24nLCBzZWxmLnN1Ym1pc3Npb24pLnRoZW4oZnVuY3Rpb24oIHJlcyApe1xuICAgICAgICAgICAkbWREaWFsb2cuaGlkZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBuZXdTdWdnZXN0aW9uKCBzdWdnZXN0aW9uICl7XG4gICAgICAgIGNvbnNvbGUubG9nKCdORVcgU1VHR0VTVElPTiEnLCBzZWxmLnNlYXJjaFRleHQpO1xuXG4gICAgICAgICRtZERpYWxvZy5zaG93KHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL3ZpZXdzL3N1Ym1pdC1tb2RhbC5odG1sJyxcbiAgICAgICAgICAgIGNsaWNrT3V0c2lkZVRvQ2xvc2U6IHRydWUsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnY2FsY3VsYXRlQ3RybCcsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICdjdHJsJyxcbiAgICAgICAgICAgIGxvY2Fsczoge21hdGVyaWFsOiBzZWxmLnNlYXJjaFRleHR9XG4gICAgICAgIH0pXG5cbiAgICB9XG5cblxufV0pO1xuXG4vKipcbiAqIEFETUlOXG4gKi9cbmFwcC5jb250cm9sbGVyKCdhZG1pbkN0cmwnLCBbJyRodHRwJywgZnVuY3Rpb24oICRodHRwICl7XG4gICAgLy8gSU5JVFxuICAgIGluaXQoKTtcblxuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBzZWxmLnN1Z2dlc3Rpb25zID0gJyc7XG4gICAgc2VsZi5tYXJrQ29tcGxldGUgPSBtYXJrQ29tcGxldGU7XG5cbiAgICBmdW5jdGlvbiBtYXJrQ29tcGxldGUoIHN1Z2dlc3Rpb24gKSB7XG4gICAgICAgIHZhciBpZCA9IHN1Z2dlc3Rpb24uaWQ7XG4gICAgICAgIGNvbnNvbGUubG9nKGlkKTtcbiAgICAgICAgJGh0dHAucHV0KCcvc3VnZ2VzdGlvbi9jb21wbGV0ZS8nICsgaWQpLnRoZW4oZnVuY3Rpb24oIHJlcyApIHtcbiAgICAgICAgICAgIGluaXQoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5pdCgpIHtcbiAgICAgICAgJGh0dHAuZ2V0KCcvc3VnZ2VzdGlvbicpLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgdmFyIHN1Z2dlc3Rpb25zID0gcmVzLmRhdGE7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhzdWdnZXN0aW9ucyk7XG4gICAgICAgICAgICBzZWxmLnN1Z2dlc3Rpb25zID0gc3VnZ2VzdGlvbnM7XG4gICAgICAgIH0pO1xuICAgIH1cblxuXG59XSk7XG5cbi8vIFJlZ2lzdGVyIEhUTUwgLSBNYWRlbGluZVxuYXBwLmNvbnRyb2xsZXIoJ2NyZWF0ZUFjY291bnRDdHJsJywgWyckc2NvcGUnLCAnJGh0dHAnLCAnJGxvY2F0aW9uJywgZnVuY3Rpb24oJHNjb3BlLCAkaHR0cCwgJGxvY2F0aW9uKSB7XG4gICAgJHNjb3BlLnVzZXIgPSB7fTtcblxuICAgICRzY29wZS5wcm9jZXNzRm9ybSA9IGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiUG9zdGluZy4uLlwiKTtcbiAgICAgICAgJGh0dHAoe1xuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICB1cmw6ICcvcmVnaXN0ZXInLFxuICAgICAgICAgICAgZGF0YTogJHNjb3BlLnVzZXIsXG4gICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nXG4gICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XG4gICAgICAgICAgICAkbG9jYXRpb24ucGF0aCgnL2xvZ2luJyk7XG4gICAgICAgICAgICBhbGVydChcIllvdXIgYWNjb3VudCBoYXMgYmVlbiBjcmVhdGVkLlwiKVxuICAgICAgICB9KVxuICAgIH07XG59XSk7XG5cblxuLy8gTG9naW4gSFRNTCAtIEthdGVcbmFwcC5jb250cm9sbGVyKCdsb2dpbkN0cmwnLCBbJyRzY29wZScsICckaHR0cCcsICdhdXRoU2VydmljZScsICckbG9jYXRpb24nLCAnJHJvb3RTY29wZScsIGZ1bmN0aW9uKCRzY29wZSwgJGh0dHAsIGF1dGhTZXJ2aWNlLCAkbG9jYXRpb24sICRyb290U2NvcGUpIHtcbiAgICAkc2NvcGUubG9naW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICRodHRwKHtcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgdXJsOiAnL2xvZ2luJyxcbiAgICAgICAgICAgIGRhdGE6ICRzY29wZS5mb3JtXG4gICAgICAgIH0pLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgICAgICAgYXV0aFNlcnZpY2Uuc2F2ZVRva2VuKHJlc3BvbnNlLmRhdGEudG9rZW4pO1xuICAgICAgICAgICAgJHJvb3RTY29wZS51c2VyID0gYXV0aFNlcnZpY2UuZ2V0VXNlcigpO1xuICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy8nKTtcbiAgICAgICAgfSlcbiAgICB9XG59XSk7XG5cbi8vIENoYW5nZSBOYXZpZ2F0aW9uIE9wdGlvbnMgd2l0aCBMb2dpblxuYXBwLmNvbnRyb2xsZXIoJ25hdkN0cmwnLCBbJ2F1dGhTZXJ2aWNlJywgJyRzY29wZScsICckcm9vdFNjb3BlJywgJyRsb2NhdGlvbicsICckaHR0cCcsIGZ1bmN0aW9uKGF1dGhTZXJ2aWNlLCAkc2NvcGUsICRyb290U2NvcGUsICRsb2NhdGlvbiwgJGh0dHApe1xuICAgICRyb290U2NvcGUudXNlciA9IGF1dGhTZXJ2aWNlLmdldFVzZXIoKTtcblxuICAgIGlmKCRyb290U2NvcGUudXNlciAmJiAkcm9vdFNjb3BlLnVzZXIudXNlcm5hbWUpe1xuICAgICAgICAkbG9jYXRpb24ucGF0aCgnLycpO1xuICAgIH1cblxuICAgICRzY29wZS5sb2dvdXQgPSBmdW5jdGlvbigpe1xuICAgICAgICBhdXRoU2VydmljZS5sb2dvdXQoKTtcbiAgICAgICAgJHJvb3RTY29wZS51c2VyID0gYXV0aFNlcnZpY2UuZ2V0VXNlcigpO1xuICAgICAgICAkbG9jYXRpb24ucGF0aCgnLycpO1xuICAgIH1cbn1dKTtcblxuLy8gUHJvamVjdCBIVE1MIC0gRGFzaGJvYXJkIEhUTUwgLSBLaW1cbmFwcC5jb250cm9sbGVyKCdwcm9qZWN0c0N0cmwnLCBbJyRzY29wZScsICckaHR0cCcsIGZ1bmN0aW9uKCRzY29wZSwgJGh0dHApIHtcbiAgICAkaHR0cC5nZXQoJy9wcm9qZWN0JykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpO1xuICAgICAgICAkc2NvcGUucHJvamVjdExpc3QgPSByZXNwb25zZS5kYXRhO1xuICAgICAgICAvL3Jlc3BvbnNlLmRhdGEuZm9yRWFjaChmdW5jdGlvbihpdGVtKXtcbiAgICAgICAgLy8gICAgaXRlbS5wcm9qZWN0X25hbWUgPSBpdGVtLnByaW1hcnlfY2F0LnRvTG93ZXJDYXNlKCk7XG4gICAgfSk7XG5cbiAgICAkc2NvcGUuZGVsZXRlUHJvamVjdEl0ZW0gPSBmdW5jdGlvbiAobGluZUlEKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiRGVsZXRpbmcuLi5cIiwgJHNjb3BlLnByb2plY3RsaXN0LmxpbmVJRCk7XG4gICAgICAgICRodHRwLnVwZGF0ZSgnL3Byb2plY3QnKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgLy9maW5kT25lIGFuZCBkZWxldGUgYnkgSUQgdXNpbmcgcHJvamVjdGxpc3QubGluZUlEXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkl0ZW0gd2FzIGRlbGV0ZWQuXCIsIHJlc3BvbnNlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vJHNjb3BlLmNhbGN1bGF0ZVByb2plY3RUb3RhbCgpe1xuICAgICAgICAvLy8vZm9yRWFjaCBwcm9qZWN0XG4gICAgICAgIC8vICAgIHZhciBwcm9qZWN0VG90YWwrPXByb2plY3RMaXN0LmNvMl9vZmZzZXQ7XG4gICAgICAgIC8vICAgIHJldHVybiBwcm9qZWN0VG90YWw7XG4gICAgICAgIC8vLy9zYXZlIHRvIHByb2plY3Q/IG9yIGp1c3QgcmVjYWxjIGVhY2ggdGltZT9cbiAgICAgICAgLy99XG4gICAgfTtcbn1dKTtcblxuLy8gdGhpcyBpcyBLaW0ncyBleHBlcmltZW50IGZvciBtYWtpbmcgYSBcIkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgdGhpcyBwcm9qZWN0IG1vZGFsXCIgZm9yIHRoZSBwcm9qZWN0cyBhbmQgZGFzaGJvYXJkIHBhZ2Vcbi8vYW5ndWxhci5tb2R1bGUoJ2RpYWxvZ0RlbW8xJywgWyduZ01hdGVyaWFsJ10pXG4vLyAgICBhcHAuY29udHJvbGxlcignZGVsZXRlQ3RybCcsIGZ1bmN0aW9uKCRzY29wZSwgJG1kRGlhbG9nKSB7XG4vL1xuLy9mdW5jdGlvbiBEaWFsb2dDb250cm9sbGVyKCRzY29wZSwgJG1kRGlhbG9nKSB7XG4vLyAgICAkc2NvcGUuaGlkZSA9IGZ1bmN0aW9uKCkge1xuLy8gICAgICAgICRtZERpYWxvZy5oaWRlKCk7XG4vLyAgICB9O1xuLy8gICAgJHNjb3BlLmNhbmNlbCA9IGZ1bmN0aW9uKCkge1xuLy8gICAgICAgICRtZERpYWxvZy5jYW5jZWwoKTtcbi8vICAgIH07XG4vLyAgICAkc2NvcGUuYW5zd2VyID0gZnVuY3Rpb24oYW5zd2VyKSB7XG4vLyAgICAgICAgJG1kRGlhbG9nLmhpZGUoYW5zd2VyKTtcbi8vICAgIH07XG4vL31cblxuXG4vL0Rhc2hib2FyZCBQYWdlIC0gS2ltL01hZGVsZWluZVxuYXBwLmNvbnRyb2xsZXIoJ2Rhc2hib2FyZEN0cmwnLCBbJyRtZERpYWxvZycsICckc2NvcGUnLCAnJGh0dHAnLCBmdW5jdGlvbigkbWREaWFsb2csICRzY29wZSwgJGh0dHApIHtcbiAgICAvL2xvYWQgcHJvamVjdCBsaXN0IG9uIHBhZ2UgbG9hZFxuICAgICRodHRwLmdldCgnL3Byb2plY3QnKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcbiAgICAgICAgJHNjb3BlLnByb2plY3RMaXN0ID0gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgLy9yZXNwb25zZS5kYXRhLmZvckVhY2goZnVuY3Rpb24oaXRlbSl7XG4gICAgICAgIC8vICAgIGl0ZW0ucHJvamVjdF9uYW1lID0gaXRlbS5wcmltYXJ5X2NhdC50b0xvd2VyQ2FzZSgpO1xuICAgIH0pO1xuLy90aGlzIGlzIGZvciB0aGUgZGVsZXRlIG1vZGFsIGFsZXJ0IGZvciBkZWxldGluZyBhIHByb2plY3QtLSBzdGlsbCBub3Qgd29ya2luZyBjb3JyZWN0XG5cbiAgICAkc2NvcGUuc2hvd0RlbGV0ZSA9IGZ1bmN0aW9uKGV2KSB7XG5cbiAgICAgICAgY29uc29sZS5sb2coJ0NMSUNLJyk7XG4gICAgICAgIHZhciBjb25maXJtID0gJG1kRGlhbG9nLmNvbmZpcm0oKVxuICAgICAgICAgICAgLnRpdGxlKCdBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlIHlvdXIgcHJvamVjdD8nKVxuICAgICAgICAgICAgLmNvbnRlbnQoJ1RoaXMgaXMgcGVybWFuZW50LicpXG4gICAgICAgICAgICAuYXJpYUxhYmVsKCdEZWxldGUgcHJvamVjdCBwZXJtYW5lbnRseScpXG4gICAgICAgICAgICAub2soJ0RlbGV0ZScpXG4gICAgICAgICAgICAuY2FuY2VsKCdDYW5jZWwnKVxuICAgICAgICAgICAgLnRhcmdldEV2ZW50KGV2KTtcbiAgICAgICAgJG1kRGlhbG9nLnNob3coY29uZmlybSkudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICRzY29wZS5hbGVydCA9ICdZb3VyIHByb2plY3QgaGFzIGJlZW4gZGVsZXRlZC4nO1xuICAgICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICRzY29wZS5hbGVydCA9ICdZb3UgcHJvamVjdCBoYXMgbm90IGJlZW4gZGVsZXRlZC4nO1xuICAgICAgICB9KTtcbiAgICB9O1xuLy8gICAgZnVuY3Rpb24gRGlhbG9nQ29udHJvbGxlcigkc2NvcGUsICRtZERpYWxvZykge1xuLy8gICAgJHNjb3BlLmhpZGUgPSBmdW5jdGlvbigpIHtcbi8vICAgICAgICAkbWREaWFsb2cuaGlkZSgpO1xuLy8gICAgfTtcbi8vICAgICRzY29wZS5jYW5jZWwgPSBmdW5jdGlvbigpIHtcbi8vICAgICAgICAkbWREaWFsb2cuY2FuY2VsKCk7XG4vLyAgICB9O1xuLy8gICAgJHNjb3BlLmFuc3dlciA9IGZ1bmN0aW9uKGFuc3dlcikge1xuLy8gICAgICAgICRtZERpYWxvZy5oaWRlKGFuc3dlcik7XG4vLyAgICB9O1xuLy99XG5cbn1dKTtcblxuXG4vLyBTZXJ2aWNlcyBmb3IgYXV0aGVudGljYXRpb25cbmFwcC5zZXJ2aWNlKCdhdXRoU2VydmljZScsIFsnJHdpbmRvdycsIGZ1bmN0aW9uICgkd2luZG93KXtcbiAgICB0aGlzLnBhcnNlSnd0ID0gZnVuY3Rpb24gKHRva2VuKSB7XG4gICAgICAgIGlmICh0b2tlbikge1xuICAgICAgICAgICAgdmFyIGJhc2U2NFVybCA9IHRva2VuLnNwbGl0KCcuJylbMV07XG4gICAgICAgICAgICB2YXIgYmFzZTY0ID0gYmFzZTY0VXJsLnJlcGxhY2UoJy0nLCAnKycpLnJlcGxhY2UoJ18nLCAnLycpO1xuICAgICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoJHdpbmRvdy5hdG9iKGJhc2U2NCkpO1xuICAgICAgICB9IGVsc2UgcmV0dXJuIHt9O1xuICAgIH07XG5cbiAgICB0aGlzLnNhdmVUb2tlbiA9IGZ1bmN0aW9uICh0b2tlbikge1xuICAgICAgICAkd2luZG93LmxvY2FsU3RvcmFnZS5qd3RUb2tlbiA9IHRva2VuO1xuICAgICAgICBjb25zb2xlLmxvZygnU2F2ZWQgdG9rZW46Jywkd2luZG93LmxvY2FsU3RvcmFnZS5qd3RUb2tlbik7XG4gICAgfTtcblxuICAgIHRoaXMuZ2V0VG9rZW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAkd2luZG93LmxvY2FsU3RvcmFnZS5qd3RUb2tlbjtcbiAgICB9O1xuXG4gICAgdGhpcy5pc0F1dGhlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHRva2VuID0gdGhpcy5nZXRUb2tlbigpO1xuICAgICAgICBpZiAodG9rZW4pIHtcbiAgICAgICAgICAgIHZhciBwYXJhbXMgPSB0aGlzLnBhcnNlSnd0KHRva2VuKTtcbiAgICAgICAgICAgIHZhciBub3RFeHBpcmVkID0gTWF0aC5yb3VuZChuZXcgRGF0ZSgpLmdldFRpbWUoKSAvIDEwMDApIDw9IHBhcmFtcy5leHA7XG4gICAgICAgICAgICBpZiAoIW5vdEV4cGlyZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ291dCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5vdEV4cGlyZWQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5sb2dvdXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGRlbGV0ZSAkd2luZG93LmxvY2FsU3RvcmFnZS5qd3RUb2tlbjtcbiAgICB9O1xuXG4gICAgLy8gZXhwb3NlIHVzZXIgYXMgYW4gb2JqZWN0XG4gICAgdGhpcy5nZXRVc2VyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXJzZUp3dCh0aGlzLmdldFRva2VuKCkpXG4gICAgfTtcbn1dKTtcblxuYXBwLmZhY3RvcnkoJ2F1dGhJbnRlcmNlcHRvcicsIFsnJHEnLCAnJGxvY2F0aW9uJywgJ2F1dGhTZXJ2aWNlJywgZnVuY3Rpb24gKCRxLCAkbG9jYXRpb24sIGF1dGhTZXJ2aWNlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVxdWVzdDogZnVuY3Rpb24gKGNvbmZpZykge1xuICAgICAgICAgICAgY29uZmlnLmhlYWRlcnMgPSBjb25maWcuaGVhZGVycyB8fCB7fTtcbiAgICAgICAgICAgIGlmIChhdXRoU2VydmljZS5pc0F1dGhlZCgpKSB7XG4gICAgICAgICAgICAgICAgY29uZmlnLmhlYWRlcnMuQXV0aG9yaXphdGlvbiA9ICdCZWFyZXIgJyArIGF1dGhTZXJ2aWNlLmdldFRva2VuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY29uZmlnO1xuICAgICAgICB9LFxuICAgICAgICByZXNwb25zZTogZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG5cbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQwMSkge1xuXG4gICAgICAgICAgICAgICAgLy8gaGFuZGxlIHRoZSBjYXNlIHdoZXJlIHRoZSB1c2VyIGlzIG5vdCBhdXRoZW50aWNhdGVkXG4gICAgICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoXCIvbG9naW5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UgfHwgJHEud2hlbihyZXNwb25zZSk7XG4gICAgICAgIH0sIHJlc3BvbnNlRXJyb3I6IGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDAxKSB7XG4gICAgICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoXCIvbG9naW5cIik7XG5cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuICRxLnJlamVjdChyZXNwb25zZSk7XG4gICAgICAgIH1cbiAgICB9O1xufV0pOyIsImFwcC5jb250cm9sbGVyKCdjYWxjdWxhdGVDdHJsJywgWyckaHR0cCcsICckbWREaWFsb2cnLCAnJHJvb3RTY29wZScsICdhdXRoU2VydmljZScsICckbG9jYXRpb24nLCBmdW5jdGlvbiggJGh0dHAsICRtZERpYWxvZywgJHJvb3RTY29wZSwgYXV0aFNlcnZpY2UsICRsb2NhdGlvbiApIHtcblxuICAgIC8vIENoZWNrIHVzZXJcbiAgICAkcm9vdFNjb3BlLnVzZXIgPSBhdXRoU2VydmljZS5nZXRVc2VyKCk7XG5cbiAgICBpZigkcm9vdFNjb3BlLnVzZXIgJiYgJHJvb3RTY29wZS51c2VyLnVzZXJuYW1lKXtcbiAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy8nKTtcbiAgICB9XG5cbiAgICAvLyBJTklUXG4gICAgJGh0dHAuZ2V0KCcvbWF0ZXJpYWxzJykudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICB2YXIgbGlzdCA9IHJlc3BvbnNlLmRhdGE7XG5cbiAgICAgICAgbGlzdC5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pe1xuICAgICAgICAgICAgaXRlbS5wcmltYXJ5X2NhdCA9IGl0ZW0ucHJpbWFyeV9jYXQudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIC8vIC9pdGVtLnByaW1hcnlfY2F0ID0gaXRlbS5wcmltYXJ5X2NhdC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGl0ZW0ucHJpbWFyeV9jYXQuc2xpY2UoMSkudG9Mb3dlckNhc2UoKTtcblxuICAgICAgICB9KTtcbiAgICAgICAgc2VsZi5saXN0ID0gbGlzdDtcblxuICAgIH0pO1xuXG4gICAgLy8gU2VsZiBkZWNcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICBzZWxmLmxpc3QgPSAnJztcbiAgICBzZWxmLmlzRGlzYWJsZWQgPSBmYWxzZTtcbiAgICBzZWxmLnJlc3VsdCA9ICcnO1xuICAgIHNlbGYucXVlcnlTZWFyY2ggPSBxdWVyeVNlYXJjaDtcbiAgICBzZWxmLnNlbGVjdGVkSXRlbUNoYW5nZSA9IHNlbGVjdGVkSXRlbUNoYW5nZTtcbiAgICBzZWxmLnNlYXJjaFRleHRDaGFuZ2UgICA9IHNlYXJjaFRleHRDaGFuZ2U7XG4gICAgc2VsZi5uZXdTdWdnZXN0aW9uID0gbmV3U3VnZ2VzdGlvbjtcbiAgICBzZWxmLnN1Ym1pdFN1Z2dlc3Rpb24gPSBzdWJtaXRTdWdnZXN0aW9uO1xuICAgIHNlbGYudW5pdHMgPSBbXG4gICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdsYnMnLFxuICAgICAgICAgICAgY29udmVyc2lvbjogMC4wMDA1XG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdraWxvcycsXG4gICAgICAgICAgICBjb252ZXJzaW9uOiAwLjAwMTEwMjMxXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICd0b25zJyxcbiAgICAgICAgICAgIGNvbnZlcnNpb246IDFcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ21ldHJpYyB0b25zJyxcbiAgICAgICAgICAgIGNvbnZlcnNpb246IDEuMTAyMzFcbiAgICAgICAgfVxuICAgIF07XG4gICAgc2VsZi5zdWJtaXNzaW9uID0ge1xuICAgICAgICBlbWFpbDogJycsXG4gICAgICAgIG1hdGVyaWFsOiAnJyxcbiAgICAgICAgbm90ZXM6ICcnXG4gICAgfTtcbiAgICBzZWxmLm5ld0NhbGN1bGF0aW9uID0gbmV3Q2FsY3VsYXRpb247XG5cblxuICAgIGZ1bmN0aW9uIHNlYXJjaFRleHRDaGFuZ2UodGV4dCkge1xuICAgICAgICBjb25zb2xlLmxvZygnVGV4dCBjaGFuZ2VkIHRvICcsIHRleHQpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNlbGVjdGVkSXRlbUNoYW5nZShpdGVtKSB7XG4gICAgICAgIGlmICggaXRlbSA9PSB1bmRlZmluZWQgKSB7XG4gICAgICAgICAgICBzZWxmLmNhdGVnb3J5ID0gJyc7XG4gICAgICAgICAgICBzZWxmLnN1YmNhdGVnb3J5ID0gJyc7XG4gICAgICAgICAgICBzZWxmLndhcm1JZCA9ICcnO1xuICAgICAgICAgICAgc2VsZi53ZWlnaHQgPSAnJztcbiAgICAgICAgICAgIHNlbGYuY29udmVyc2lvbiA9ICcnO1xuICAgICAgICAgICAgc2VsZi5yZXN1bHQgPSAnJztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIG5ld0NhbGN1bGF0aW9uKCkge1xuXG4gICAgICAgIHZhciBjYWxjdWxhdGUgPSB7XG4gICAgICAgICAgICB3YXJtSWQ6IHNlbGYud2FybUlkIHx8IHNlbGYuY2F0ZWdvcnkuc2Vjb25kYXJpZXNbMF0ud2FybV9pZCxcbiAgICAgICAgICAgIHdlaWdodDogcGFyc2VGbG9hdChzZWxmLndlaWdodCkgKiBzZWxmLmNvbnZlcnNpb25cbiAgICAgICAgfTtcblxuICAgICAgICAkaHR0cC5wb3N0KCcvY2FsY3VsYXRpb25zJywgY2FsY3VsYXRlKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICBzZWxmLnJlc3VsdCA9IE1hdGguZmxvb3IoTWF0aC5hYnMocmVzcG9uc2UuZGF0YSkgKiAxMDAwKSAvIDEwMDA7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNhdmVUb1Byb2plY3QoKXtcbiAgICAgICAgdmFyIGxpbmVJdGVtID0ge1xuICAgICAgICAgICAgY2F0ZWdvcnk6IHNlbGYuY2F0ZWdvcnksXG4gICAgICAgICAgICBzdWJjYXRlZ29yeTogc2VsZi5zdWJjYXRlZ29yeSxcbiAgICAgICAgICAgIHdhcm1fSWQ6IHNlbGYud2FybUlkLFxuICAgICAgICAgICAgd2VpZ2h0OiBwYXJzZUZsb2F0KHNlbGYud2VpZ2h0KSpzZWxmLmNvbnZlcnNpb24sXG4gICAgICAgICAgICB1bml0czogc2VsZi51bml0Lm5hbWVcbiAgICAgICAgfTtcbiAgICAgICAgY29uc29sZS5sb2cobGluZUl0ZW0pO1xuICAgICAgICAkaHR0cC5wb3N0KCcvYWRkVG9Qcm9qZWN0JykudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBxdWVyeVNlYXJjaChxdWVyeSkge1xuICAgICAgICByZXR1cm4gcXVlcnkgPyBzZWxmLmxpc3QuZmlsdGVyKGNyZWF0ZUZpbHRlckZvcihxdWVyeSkpIDogc2VsZi5saXN0O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZUZpbHRlckZvcihxdWVyeSkge1xuICAgICAgICB2YXIgbG93ZXJjYXNlUXVlcnkgPSBxdWVyeS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAvL3F1ZXJ5LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgcXVlcnkuc2xpY2UoMSk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBmaWx0ZXJGbihvYmopIHtcbiAgICAgICAgICAgIHJldHVybiAob2JqLnByaW1hcnlfY2F0LmluZGV4T2YobG93ZXJjYXNlUXVlcnkpICE9IC0xKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzdWJtaXRTdWdnZXN0aW9uKCl7XG4gICAgICAgICRodHRwLnBvc3QoJy9zdWdnZXN0aW9uJywgc2VsZi5zdWJtaXNzaW9uKS50aGVuKGZ1bmN0aW9uKCByZXMgKXtcbiAgICAgICAgICAgICRtZERpYWxvZy5oaWRlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG5ld1N1Z2dlc3Rpb24oIHN1Z2dlc3Rpb24gKXtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NpZGVuYXYnKS5mb2N1cygpO1xuXG4gICAgICAgICRtZERpYWxvZy5zaG93KHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL3ZpZXdzL3N1Ym1pdC1tb2RhbC5odG1sJyxcbiAgICAgICAgICAgIGNsaWNrT3V0c2lkZVRvQ2xvc2U6IHRydWUsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnY2FsY3VsYXRlQ3RybCcsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICdjdHJsJyxcbiAgICAgICAgICAgIGxvY2Fsczoge21hdGVyaWFsOiBzZWxmLnNlYXJjaFRleHR9XG4gICAgICAgIH0pXG5cbiAgICB9XG5cblxufV0pOyIsIi8vIFJlZ2lzdGVyIEhUTUwgLSBNYWRlbGluZVxuYXBwLmNvbnRyb2xsZXIoJ2NyZWF0ZUFjY291bnRDdHJsJywgWyckc2NvcGUnLCAnJGh0dHAnLCAnJGxvY2F0aW9uJywgZnVuY3Rpb24oJHNjb3BlLCAkaHR0cCwgJGxvY2F0aW9uKSB7XG4gICAgJHNjb3BlLnVzZXIgPSB7fTtcblxuICAgICRzY29wZS5wcm9jZXNzRm9ybSA9IGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiUG9zdGluZy4uLlwiKTtcbiAgICAgICAgJGh0dHAoe1xuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICB1cmw6ICcvcmVnaXN0ZXInLFxuICAgICAgICAgICAgZGF0YTogJHNjb3BlLnVzZXIsXG4gICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nXG4gICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XG4gICAgICAgICAgICAkbG9jYXRpb24ucGF0aCgnL2xvZ2luJyk7XG4gICAgICAgICAgICBhbGVydChcIllvdXIgYWNjb3VudCBoYXMgYmVlbiBjcmVhdGVkLlwiKVxuICAgICAgICB9KVxuICAgIH07XG59XSk7IiwiYXBwLmNvbnRyb2xsZXIoJ2Rhc2hib2FyZEN0cmwnLCBbJyRtZERpYWxvZycsICckc2NvcGUnLCAnJGh0dHAnLCBmdW5jdGlvbigkbWREaWFsb2csICRzY29wZSwgJGh0dHApIHtcbiAgICAvL2xvYWQgcHJvamVjdCBsaXN0IG9uIHBhZ2UgbG9hZFxuICAgICRodHRwLmdldCgnL3Byb2plY3QnKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcbiAgICAgICAgJHNjb3BlLnByb2plY3RMaXN0ID0gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgLy9yZXNwb25zZS5kYXRhLmZvckVhY2goZnVuY3Rpb24oaXRlbSl7XG4gICAgICAgIC8vICAgIGl0ZW0ucHJvamVjdF9uYW1lID0gaXRlbS5wcmltYXJ5X2NhdC50b0xvd2VyQ2FzZSgpO1xuICAgIH0pO1xuLy90aGlzIGlzIGZvciB0aGUgZGVsZXRlIG1vZGFsIGFsZXJ0IGZvciBkZWxldGluZyBhIHByb2plY3QtLSBzdGlsbCBub3Qgd29ya2luZyBjb3JyZWN0XG5cbiAgICAkc2NvcGUuc2hvd0RlbGV0ZSA9IGZ1bmN0aW9uKGV2KSB7XG5cbiAgICAgICAgY29uc29sZS5sb2coJ0NMSUNLJyk7XG4gICAgICAgIHZhciBjb25maXJtID0gJG1kRGlhbG9nLmNvbmZpcm0oKVxuICAgICAgICAgICAgLnRpdGxlKCdBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlIHlvdXIgcHJvamVjdD8nKVxuICAgICAgICAgICAgLmNvbnRlbnQoJ1RoaXMgaXMgcGVybWFuZW50LicpXG4gICAgICAgICAgICAuYXJpYUxhYmVsKCdEZWxldGUgcHJvamVjdCBwZXJtYW5lbnRseScpXG4gICAgICAgICAgICAub2soJ0RlbGV0ZScpXG4gICAgICAgICAgICAuY2FuY2VsKCdDYW5jZWwnKVxuICAgICAgICAgICAgLnRhcmdldEV2ZW50KGV2KTtcbiAgICAgICAgJG1kRGlhbG9nLnNob3coY29uZmlybSkudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICRzY29wZS5hbGVydCA9ICdZb3VyIHByb2plY3QgaGFzIGJlZW4gZGVsZXRlZC4nO1xuICAgICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICRzY29wZS5hbGVydCA9ICdZb3UgcHJvamVjdCBoYXMgbm90IGJlZW4gZGVsZXRlZC4nO1xuICAgICAgICB9KTtcbiAgICB9O1xuLy8gICAgZnVuY3Rpb24gRGlhbG9nQ29udHJvbGxlcigkc2NvcGUsICRtZERpYWxvZykge1xuLy8gICAgJHNjb3BlLmhpZGUgPSBmdW5jdGlvbigpIHtcbi8vICAgICAgICAkbWREaWFsb2cuaGlkZSgpO1xuLy8gICAgfTtcbi8vICAgICRzY29wZS5jYW5jZWwgPSBmdW5jdGlvbigpIHtcbi8vICAgICAgICAkbWREaWFsb2cuY2FuY2VsKCk7XG4vLyAgICB9O1xuLy8gICAgJHNjb3BlLmFuc3dlciA9IGZ1bmN0aW9uKGFuc3dlcikge1xuLy8gICAgICAgICRtZERpYWxvZy5oaWRlKGFuc3dlcik7XG4vLyAgICB9O1xuLy99XG5cbn1dKTsiLCIvLyBMb2dpbiBIVE1MIC0gS2F0ZVxuYXBwLmNvbnRyb2xsZXIoJ2xvZ2luQ3RybCcsIFsnJHNjb3BlJywgJyRodHRwJywgJ2F1dGhTZXJ2aWNlJywgJyRsb2NhdGlvbicsICckcm9vdFNjb3BlJywgZnVuY3Rpb24oJHNjb3BlLCAkaHR0cCwgYXV0aFNlcnZpY2UsICRsb2NhdGlvbiwgJHJvb3RTY29wZSkge1xuICAgICRzY29wZS5sb2dpbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJGh0dHAoe1xuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICB1cmw6ICcvbG9naW4nLFxuICAgICAgICAgICAgZGF0YTogJHNjb3BlLmZvcm1cbiAgICAgICAgfSkudGhlbihmdW5jdGlvbihyZXNwb25zZSl7XG4gICAgICAgICAgICBhdXRoU2VydmljZS5zYXZlVG9rZW4ocmVzcG9uc2UuZGF0YS50b2tlbik7XG4gICAgICAgICAgICAkcm9vdFNjb3BlLnVzZXIgPSBhdXRoU2VydmljZS5nZXRVc2VyKCk7XG4gICAgICAgICAgICAkbG9jYXRpb24ucGF0aCgnLycpO1xuICAgICAgICB9KVxuICAgIH1cbn1dKTsiLCIvLyBDaGFuZ2UgTmF2aWdhdGlvbiBPcHRpb25zIHdpdGggTG9naW5cbmFwcC5jb250cm9sbGVyKCduYXZDdHJsJywgWydhdXRoU2VydmljZScsICckc2NvcGUnLCAnJHJvb3RTY29wZScsICckbG9jYXRpb24nLCAnJGh0dHAnLCBmdW5jdGlvbihhdXRoU2VydmljZSwgJHNjb3BlLCAkcm9vdFNjb3BlLCAkbG9jYXRpb24sICRodHRwKXtcbiAgICAkcm9vdFNjb3BlLnVzZXIgPSBhdXRoU2VydmljZS5nZXRVc2VyKCk7XG5cbiAgICBpZigkcm9vdFNjb3BlLnVzZXIgJiYgJHJvb3RTY29wZS51c2VyLnVzZXJuYW1lKXtcbiAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy8nKTtcbiAgICB9XG5cbiAgICAkc2NvcGUubG9nb3V0ID0gZnVuY3Rpb24oKXtcbiAgICAgICAgYXV0aFNlcnZpY2UubG9nb3V0KCk7XG4gICAgICAgICRyb290U2NvcGUudXNlciA9IGF1dGhTZXJ2aWNlLmdldFVzZXIoKTtcbiAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy8nKTtcbiAgICB9XG59XSk7XG4iLCIvLyBQcm9qZWN0IFBhZ2UgLSAgS2ltL01hZGVsZWluZVxuYXBwLmNvbnRyb2xsZXIoJ3Byb2plY3RzQ3RybCcsIFsnJHNjb3BlJywgJyRodHRwJywgZnVuY3Rpb24oJHNjb3BlLCAkaHR0cCkge1xuXG4gICAgLy8gU2VsZiBkZWNcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgc2VsZi5wcm9qZWN0TGlzdCA9ICcnO1xuICAgIHNlbGYucmVzdWx0ID0gJyc7XG4gICAgc2VsZi5xdWVyeVNlYXJjaCA9IHF1ZXJ5U2VhcmNoO1xuICAgIHNlbGYuc2VsZWN0ZWRJdGVtQ2hhbmdlID0gc2VsZWN0ZWRJdGVtQ2hhbmdlO1xuICAgIHNlbGYuc2VhcmNoVGV4dENoYW5nZSA9IHNlYXJjaFRleHRDaGFuZ2U7XG4gICAgc2VsZi5wcm9qZWN0VG90YWw9IDA7XG4gICAgc2VsZi5kZWxldGVQcm9qZWN0SXRlbSA9IGRlbGV0ZVByb2plY3RJdGVtO1xuICAgIHNlbGYuaWQgPSAwO1xuXG5cbiAgICAvL2xvYWQgcHJvamVjdCBsaXN0IG9uIHBhZ2UgbG9hZFxuICAgIHNlbGYuZ2V0UHJvamVjdExpc3QgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgLy9uZWVkIHRvIGZpZ3VyZSBvdXQgaG93IHRvIHBhc3MgdGhlIHVzZXJpZCBmcm9tIHRoZSBsb2dpbiBwYWdlLS11c2UgdGhlIHNhbWUgY29udHJvbGxlcj9cbiAgICAgICAgJGh0dHAuZ2V0KCcvcHJvamVjdCcsIHVzZXJpZCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcbiAgICAgICAgICAgIHZhciBwcm9qZWN0TGlzdCA9IHJlc3BvbnNlLmRhdGE7XG4gICAgICAgICAgICBwcm9qZWN0TGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICAgICAgcHJvamVjdF9uYW1lID0gaXRlbS5wcm9qZWN0X25hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgICAgICBwcm9qZWN0X2Rlc2NyaXB0aW9uID0gaXRlbS5wcm9qZWN0X2Rlc2NyaXB0aW9uO1xuICAgICAgICAgICAgICAgIGlkID0gaXRlbS5pZDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc2VsZi5wcm9qZWN0TGlzdCA9IHByb2plY3RMaXN0O1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gcXVlcnlTZWFyY2gocXVlcnkpIHtcbiAgICAgICAgcmV0dXJuIHF1ZXJ5ID8gc2VsZi5wcm9qZWN0TGlzdC5maWx0ZXIoY3JlYXRlRmlsdGVyRm9yKHF1ZXJ5KSkgOiBzZWxmLnByb2plY3RMaXN0O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZUZpbHRlckZvcihxdWVyeSkge1xuICAgICAgICB2YXIgbG93ZXJjYXNlUXVlcnkgPSBxdWVyeS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAvL3F1ZXJ5LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgcXVlcnkuc2xpY2UoMSk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBmaWx0ZXJGbihvYmopIHtcbiAgICAgICAgICAgIHJldHVybiAob2JqLnByaW1hcnlfY2F0LmluZGV4T2YobG93ZXJjYXNlUXVlcnkpICE9IC0xKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZWFyY2hUZXh0Q2hhbmdlKHRleHQpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1RleHQgY2hhbmdlZCB0byAnLCB0ZXh0KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZWxlY3RlZEl0ZW1DaGFuZ2UoaXRlbSkge1xuICAgICAgICBpZiAoIGl0ZW0gPT0gdW5kZWZpbmVkICkge1xuICAgICAgICAgICAgc2VsZi5wcm9qZWN0X25hbWUgPSAnJztcbiAgICAgICAgICAgIHNlbGYucHJvamVjdF9kZXNjcmlwdGlvbiA9ICcnO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGVsZXRlUHJvamVjdEl0ZW0oKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiRGVsZXRpbmcuLi5cIiwgc2VsZi5wcm9qZWN0TGlzdC5JRCk7XG4gICAgICAgIC8vJGh0dHAudXBkYXRlKCcvcHJvamVjdCcpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgIC8vZmluZE9uZSBhbmQgZGVsZXRlIGJ5IGlkIHVzaW5nIHByb2plY3RsaXN0LmlkXG4gICAgICAgIC8vICAgIGNvbnNvbGUubG9nKFwiSXRlbSB3YXMgZGVsZXRlZC5cIiwgcmVzcG9uc2UpO1xuICAgICAgICAvLyAgICBzZWxmLmdldFByb2plY3RMaXN0KCk7XG4gICAgfTtcblxuICAgIC8vc2VsZi5jYWxjdWxhdGVQcm9qZWN0VG90YWwoKXtcbiAgICAvLy8vZm9yRWFjaCBwcm9qZWN0XG4gICAgLy8gICAgdmFyIHByb2plY3RUb3RhbCs9cHJvamVjdExpc3QuY28yX29mZnNldDtcbiAgICAvLyAgICByZXR1cm4gcHJvamVjdFRvdGFsO1xuICAgIC8vfVxuICAgIC8vfTtcbn1dKTsiLCIvLyBTZXJ2aWNlcyBmb3IgYXV0aGVudGljYXRpb25cbmFwcC5zZXJ2aWNlKCdhdXRoU2VydmljZScsIFsnJHdpbmRvdycsIGZ1bmN0aW9uICgkd2luZG93KXtcbiAgICB0aGlzLnBhcnNlSnd0ID0gZnVuY3Rpb24gKHRva2VuKSB7XG4gICAgICAgIGlmICh0b2tlbikge1xuICAgICAgICAgICAgdmFyIGJhc2U2NFVybCA9IHRva2VuLnNwbGl0KCcuJylbMV07XG4gICAgICAgICAgICB2YXIgYmFzZTY0ID0gYmFzZTY0VXJsLnJlcGxhY2UoJy0nLCAnKycpLnJlcGxhY2UoJ18nLCAnLycpO1xuICAgICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoJHdpbmRvdy5hdG9iKGJhc2U2NCkpO1xuICAgICAgICB9IGVsc2UgcmV0dXJuIHt9O1xuICAgIH07XG5cbiAgICB0aGlzLnNhdmVUb2tlbiA9IGZ1bmN0aW9uICh0b2tlbikge1xuICAgICAgICAkd2luZG93LmxvY2FsU3RvcmFnZS5qd3RUb2tlbiA9IHRva2VuO1xuICAgICAgICBjb25zb2xlLmxvZygnU2F2ZWQgdG9rZW46Jywkd2luZG93LmxvY2FsU3RvcmFnZS5qd3RUb2tlbik7XG4gICAgfTtcblxuICAgIHRoaXMuZ2V0VG9rZW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAkd2luZG93LmxvY2FsU3RvcmFnZS5qd3RUb2tlbjtcbiAgICB9O1xuXG4gICAgdGhpcy5pc0F1dGhlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHRva2VuID0gdGhpcy5nZXRUb2tlbigpO1xuICAgICAgICBpZiAodG9rZW4pIHtcbiAgICAgICAgICAgIHZhciBwYXJhbXMgPSB0aGlzLnBhcnNlSnd0KHRva2VuKTtcbiAgICAgICAgICAgIHZhciBub3RFeHBpcmVkID0gTWF0aC5yb3VuZChuZXcgRGF0ZSgpLmdldFRpbWUoKSAvIDEwMDApIDw9IHBhcmFtcy5leHA7XG4gICAgICAgICAgICBpZiAoIW5vdEV4cGlyZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ291dCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5vdEV4cGlyZWQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5sb2dvdXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGRlbGV0ZSAkd2luZG93LmxvY2FsU3RvcmFnZS5qd3RUb2tlbjtcbiAgICB9O1xuXG4gICAgLy8gZXhwb3NlIHVzZXIgYXMgYW4gb2JqZWN0XG4gICAgdGhpcy5nZXRVc2VyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXJzZUp3dCh0aGlzLmdldFRva2VuKCkpXG4gICAgfTtcbn1dKTtcblxuYXBwLmZhY3RvcnkoJ2F1dGhJbnRlcmNlcHRvcicsIFsnJHEnLCAnJGxvY2F0aW9uJywgJ2F1dGhTZXJ2aWNlJywgZnVuY3Rpb24gKCRxLCAkbG9jYXRpb24sIGF1dGhTZXJ2aWNlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVxdWVzdDogZnVuY3Rpb24gKGNvbmZpZykge1xuICAgICAgICAgICAgY29uZmlnLmhlYWRlcnMgPSBjb25maWcuaGVhZGVycyB8fCB7fTtcbiAgICAgICAgICAgIGlmIChhdXRoU2VydmljZS5pc0F1dGhlZCgpKSB7XG4gICAgICAgICAgICAgICAgY29uZmlnLmhlYWRlcnMuQXV0aG9yaXphdGlvbiA9ICdCZWFyZXIgJyArIGF1dGhTZXJ2aWNlLmdldFRva2VuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY29uZmlnO1xuICAgICAgICB9LFxuICAgICAgICByZXNwb25zZTogZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG5cbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQwMSkge1xuXG4gICAgICAgICAgICAgICAgLy8gaGFuZGxlIHRoZSBjYXNlIHdoZXJlIHRoZSB1c2VyIGlzIG5vdCBhdXRoZW50aWNhdGVkXG4gICAgICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoXCIvbG9naW5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UgfHwgJHEud2hlbihyZXNwb25zZSk7XG4gICAgICAgIH0sIHJlc3BvbnNlRXJyb3I6IGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDAxKSB7XG4gICAgICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoXCIvbG9naW5cIik7XG5cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuICRxLnJlamVjdChyZXNwb25zZSk7XG4gICAgICAgIH1cbiAgICB9O1xufV0pOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
