var app=angular.module("ecotoneApp",["ngRoute","ngMaterial","ngMessages","validation.match"]);app.config(["$mdThemingProvider","$routeProvider","$locationProvider","$httpProvider",function(e,t,o,r){o.html5Mode(!0),e.theme("default").primaryPalette("green").accentPalette("blue-grey",{"default":"600"}).warnPalette("orange"),t.when("/",{templateUrl:"/views/calculator.html",controller:"calculateCtrl as ctrl"}).when("/login",{templateUrl:"/views/login.html",controller:"loginCtrl"}).when("/register",{templateUrl:"/views/register.html",controller:"createAccountCtrl"}).when("/admin",{templateUrl:"/views/admin.html",controller:"adminCtrl as ctrl"}).when("/account",{templateUrl:"/views/account.html",controller:""}).when("/dashboard",{templateUrl:"/views/dashboard.html",controller:"dashboardCtrl"}).when("/projects",{templateUrl:"/views/project.html",controller:"projectsCtrl as ctrl"}).when("/sources",{templateUrl:"/views/sources.html"}).otherwise({redirectTo:"/"}),r.interceptors.push("authInterceptor")}]),app.controller("editAccountCtrl",["$scope","$http","$location","$rootScope","showToast",function(e,t,o,r,n){e.user={},console.log(r.user),e.user=r.user,e.updateUserInfo=function(){console.log("Posting..."),t({method:"PUT",url:"/modifyUser",data:e.user,dataType:"json"}).then(function(e){o.path("/calculator"),n.showToast("Your account information has been changed.")},function(e){console.log("error"),n.showToast("There was a problem processing your changes. Please try again later.")})}}]),app.controller("adminCtrl",["$http","$scope","$parse",function(e,t,o){function r(){var o=t.csv.result;console.log(o),e.post("/bulk",o).then(function(e){return console.log(e),e.data.forEach(function(e){e.project_id=1}),e.data}).then(function(t){e.post("/project/calculation/",t)})["catch"](function(e){console.log(e)})}function n(t){var o=t.id;console.log(o),e.put("/suggestion/complete/"+o).then(function(e){a()})}function a(){e.get("/suggestion").then(function(e){var t=e.data;console.log(t),s.suggestions=t})}a();var s=this;s.suggestions="",s.markComplete=n,s.submitCSV=r,t.csv={content:null,header:!0,headerVisible:!0,separator:",",separatorVisible:!0,result:null,encoding:"ISO-8859-1",encodingVisible:!0};var i="";t.toPrettyJSON=function(e,t){var r=JSON.stringify(e),n=null;try{n=o(r)({})}catch(a){return i}var s=JSON.stringify(n,null,Number(t));return i=s,s}}]),app.controller("calculateCtrl",["$http","$mdDialog","$rootScope","authService","$location",function(e,t,o,r,n){function a(e){console.log("Text changed to ",e)}function s(e){void 0==e&&(m.category="",m.subcategory="",m.warmId="",m.weight="",m.item_description="",m.conversion="",m.result="")}function i(){var t={warmId:m.warmId||m.category.secondaries[0].warm_id,weight:parseFloat(m.weight)*m.conversion};e.post("/calculations",t).then(function(e){e.data=Math.abs(parseFloat(e.data)),e.data>=1e-4?m.result=Math.floor(1e4*e.data)/1e4:m.result=e.data.toExponential(2)})}function c(){var t={category:m.category,subcategory:m.subcategory,warm_Id:m.warmId,weight:parseFloat(m.weight)*m.conversion,units:m.unit.name,item_description:m.item_description};console.log(t),e.post("/addToProject").then(function(e){console.log(e)})}function l(e){return e?m.list.filter(u(e)):m.list}function u(e){var t=e.toLowerCase();return function(e){return-1!=e.primary_cat.indexOf(t)}}function p(){e.post("/suggestion",m.suggestSubmission).then(function(e){t.hide()})}function d(e){t.show({templateUrl:"/views/suggest-modal.html",clickOutsideToClose:!0,controller:"calculateCtrl",controllerAs:"ctrl",locals:{material:m.searchText}})}function h(){e.post("/project",m.projectSubmission).then(function(e){t.hide()})}function g(e){t.show({templateUrl:"views/project-modal.html",clickOutsideToClose:!0,controller:"calculateCtrl",controllerAs:"ctrl"})}o.user=r.getUser(),o.user&&o.user.username&&n.path("/"),e.get("/materials").then(function(e){var t=e.data;t.forEach(function(e){e.primary_cat=e.primary_cat.toLowerCase()}),m.list=t});var m=this;m.list="",m.isDisabled=!1,m.result="",m.querySearch=l,m.selectedItemChange=s,m.searchTextChange=a,m.newSuggestion=d,m.submitSuggestion=p,m.units=[{name:"lbs",conversion:5e-4},{name:"kilos",conversion:.00110231},{name:"tons",conversion:1},{name:"metric tons",conversion:1.10231}],m.submission={email:"",material:"",notes:""},m.newCalculation=i,m.saveToProject=c,m.newProject=g,m.createProject=h}]),app.controller("createAccountCtrl",["$scope","$http","$location","showToast",function(e,t,o,r){e.user={},e.processForm=function(n){t({method:"POST",url:"/register",data:e.user,dataType:"json"}).then(function(e){console.log(e),o.path("/login"),r.showToast("Your account has been created.")},function(e){console.log(e),r.showToast(e.data.message)})}}]),app.directive("ngCsvImport",function(){return{restrict:"E",transclude:!0,replace:!0,scope:{content:"=?",header:"=?",headerVisible:"=?",separator:"=?",separatorVisible:"=?",result:"=?",encoding:"=?",encodingVisible:"=?"},template:'<div><div ng-show="headerVisible"><div class="label">Header</div><input type="checkbox" ng-model="header"></div><div ng-show="encoding && encodingVisible"><div class="label">Encoding</div><span>{{encoding}}</span></div><div ng-show="separator && separatorVisible"><div class="label">Seperator</div><span><input class="separator-input" type="text" ng-change="changeSeparator" ng-model="separator"><span></div><div><input class="btn cta gray" type="file"/></div></div>',link:function(e,t){e.separatorVisible=e.separatorVisible||!1,e.headerVisible=e.headerVisible||!1,angular.element(t[0].querySelector(".separator-input")).on("keyup",function(t){if(null!=e.content){var r={csv:e.content,header:e.header,separator:t.target.value,encoding:e.encoding};e.result=o(r),e.$apply()}}),t.on("change",function(t){var r=new FileReader;if(e.filename=t.target.files[0].name,r.onload=function(t){e.$apply(function(){var r={csv:t.target.result.replace(/\r\n|\r/g,"\n"),header:e.header,separator:e.separator};e.content=r.csv,e.result=o(r),e.result.filename=e.filename})},"file"!==t.target.type||null==t.target.files&&null==t.srcElement.files){if(null!=e.content){var n={csv:e.content,header:!e.header,separator:e.separator};e.result=o(n)}}else r.readAsText((t.srcElement||t.target).files[0],e.encoding)});var o=function(e){var t=e.csv.split("\n"),o=[],r=0,n=t[0].split(e.separator).length,a=[];e.header&&(a=t[0].split(e.separator),r=1);for(var s=r;s<t.length;s++){var i={},c=t[s].split(new RegExp(e.separator+'(?![^"]*"(?:(?:[^"]*"){2})*[^"]*$)'));if(c.length===n){if(e.header)for(var l=0;l<a.length;l++)i[a[l]]=c[l];else for(var u=0;u<c.length;u++)i[u]=c[u];o.push(i)}}return o}}}}),app.controller("dashboardCtrl",["$mdDialog","$rootScope","$scope","$http",function(e,t,o,r){var n=t.user;r.get("/project/"+n.id).then(function(e){o.projectList=e.data}),o.showDelete=function(t){console.log("CLICK");var r=e.confirm().title("Are you sure you want to remove your project?").content("This is permanent.").ariaLabel("Remove project from account permanently").ok("Delete").cancel("Cancel").targetEvent(t);e.show(r).then(function(){o.alert="Your project has been removed."},function(){o.alert="Your project has not been removed."})}}]),app.controller("loginCtrl",["$scope","$http","authService","$location","$rootScope","showToast",function(e,t,o,r,n,a){e.login=function(){t({method:"POST",url:"/login",data:e.form}).then(function(e){o.saveToken(e.data.token),n.user=o.getUser(),r.path("/")},function(e){a.showToast(e.data.message)})}}]),app.controller("navCtrl",["authService","$scope","$rootScope","$location","$http",function(e,t,o,r,n){o.user=e.getUser(),o.user&&o.user.username&&r.path("/"),t.logout=function(){e.logout(),o.user=e.getUser(),r.path("/")}}]),app.controller("projectsCtrl",["$mdDialog","$scope","$rootScope","$http",function(e,t,o,r){function n(e){return e?l.projectList.filter(a(e)):l.projectList}function a(e){var t=e.toLowerCase();return function(e){return-1!=e.project_name.indexOf(t)}}function s(e){console.log("Text changed to ",e)}function i(e){console.log("item",e),console.log("selected_ project",l.selected_project),void 0==e&&(l.selected_project="",l.project_description="")}function c(e){console.log("Deleting...",e)}var l=this;l.projectList=[{id:21,project_name:"ben's house",project_description:"Remodel",created_at:"2015-10-14T16:42:40.896Z",updated_at:"2015-10-14T16:42:40.901Z",user_id:4,category:"wood",sub_category:"oak",units:"lbs",weight:10,co2_offset:.03,project_id:6,item_description:"porch spindles"},{id:202,project_name:"james' house",project_description:"Summit Ave carriage house teardown and rebuild",created_at:"2014-10-14T16:42:40.896Z",updated_at:"2014-10-14T16:42:40.901Z",user_id:24,category:"asphalt shingles",sub_category:"null",units:"lbs",weight:100,co2_offset:.303,project_id:6,item_description:"dark brown roof shingles--30 year life, some water damage"},{id:2112,project_name:"kim's barn",project_description:"Remodel",created_at:"2013-10-14T16:42:40.896Z",updated_at:"2013-10-14T16:42:40.901Z",user_id:14,category:"wood flooring",sub_category:"pine",units:"lbs",weight:500,co2_offset:3.03,project_id:6,item_description:"barn wood"}],l.result="",l.querySearch=n,l.selectedItemChange=i,l.searchTextChange=s,l.projectTotal=0,l.deleteProjectItem=c,l.id=0,console.log(l.projectList),t.showDelete=function(o,r){console.log("CLICK");var n=e.confirm().title("Are you sure you want to delete this item?").content("This will be permanent.").ariaLabel("Delete item permanently").ok("Delete").cancel("Cancel").targetEvent(o);e.show(n).then(function(){console.log("Deleting",r),l.deleteProjectItem(r),t.alert="Your item has been deleted."},function(){t.alert="Your item has not been deleted."})}}]),app.service("authService",["$window",function(e){this.parseJwt=function(t){if(t){var o=t.split(".")[1],r=o.replace("-","+").replace("_","/");return JSON.parse(e.atob(r))}return{}},this.saveToken=function(t){e.localStorage.jwtToken=t},this.getToken=function(){return e.localStorage.jwtToken},this.isAuthed=function(){var e=this.getToken();if(e){var t=this.parseJwt(e),o=Math.round((new Date).getTime()/1e3)<=t.exp;return o||this.logout(),o}return!1},this.logout=function(){delete e.localStorage.jwtToken},this.getUser=function(){return this.parseJwt(this.getToken())}}]),app.factory("authInterceptor",["$q","$location","authService",function(e,t,o){return{request:function(e){return e.headers=e.headers||{},o.isAuthed()&&(e.headers.Authorization="Bearer "+o.getToken()),e},response:function(o){return 401===o.status&&t.path("/login"),o||e.when(o)},responseError:function(o){return 401===o.status?t.path("/login"):console.log(o),e.reject(o)}}}]),app.service("showToast",["$mdToast",function(e){this.showToast=function(t){e.show(e.simple().content(t).hideDelay(3e3).position("top right"))}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJzY3JpcHRzL2FjY291bnRDdHJsLmpzIiwic2NyaXB0cy9hZG1pbkN0cmwuanMiLCJzY3JpcHRzL2NhbGN1bGF0ZUN0cmwuanMiLCJzY3JpcHRzL2NyZWF0ZUFjY291bnRDdHJsLmpzIiwic2NyaXB0cy9jc3ZJbXBvcnQuanMiLCJzY3JpcHRzL2Rhc2hib2FyZEN0cmwuanMiLCJzY3JpcHRzL2xvZ2luQ3RybC5qcyIsInNjcmlwdHMvbmF2Q3RybC5qcyIsInNjcmlwdHMvcHJvamVjdHNDdHJsLmpzIiwic2NyaXB0cy9zZXJ2aWNlcy5qcyJdLCJuYW1lcyI6WyJhcHAiLCJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJG1kVGhlbWluZ1Byb3ZpZGVyIiwiJHJvdXRlUHJvdmlkZXIiLCIkbG9jYXRpb25Qcm92aWRlciIsIiRodHRwUHJvdmlkZXIiLCJodG1sNU1vZGUiLCJ0aGVtZSIsInByaW1hcnlQYWxldHRlIiwiYWNjZW50UGFsZXR0ZSIsImRlZmF1bHQiLCJ3YXJuUGFsZXR0ZSIsIndoZW4iLCJ0ZW1wbGF0ZVVybCIsImNvbnRyb2xsZXIiLCJvdGhlcndpc2UiLCJyZWRpcmVjdFRvIiwiaW50ZXJjZXB0b3JzIiwicHVzaCIsIiRzY29wZSIsIiRodHRwIiwiJGxvY2F0aW9uIiwiJHJvb3RTY29wZSIsInNob3dUb2FzdCIsInVzZXIiLCJjb25zb2xlIiwibG9nIiwidXBkYXRlVXNlckluZm8iLCJtZXRob2QiLCJ1cmwiLCJkYXRhIiwiZGF0YVR5cGUiLCJ0aGVuIiwicmVzcG9uc2UiLCJwYXRoIiwiZXJyb3IiLCIkcGFyc2UiLCJzdWJtaXRDU1YiLCJjc3ZPYmplY3QiLCJjc3YiLCJyZXN1bHQiLCJwb3N0IiwicmVzIiwiZm9yRWFjaCIsIml0ZW0iLCJwcm9qZWN0X2lkIiwicHJvamVjdHMiLCJlcnIiLCJtYXJrQ29tcGxldGUiLCJzdWdnZXN0aW9uIiwiaWQiLCJwdXQiLCJpbml0IiwiZ2V0Iiwic3VnZ2VzdGlvbnMiLCJzZWxmIiwidGhpcyIsImNvbnRlbnQiLCJoZWFkZXIiLCJoZWFkZXJWaXNpYmxlIiwic2VwYXJhdG9yIiwic2VwYXJhdG9yVmlzaWJsZSIsImVuY29kaW5nIiwiZW5jb2RpbmdWaXNpYmxlIiwiX2xhc3RHb29kUmVzdWx0IiwidG9QcmV0dHlKU09OIiwianNvbiIsInRhYldpZHRoIiwib2JqU3RyIiwiSlNPTiIsInN0cmluZ2lmeSIsIm9iaiIsImUiLCJOdW1iZXIiLCIkbWREaWFsb2ciLCJhdXRoU2VydmljZSIsInNlYXJjaFRleHRDaGFuZ2UiLCJ0ZXh0Iiwic2VsZWN0ZWRJdGVtQ2hhbmdlIiwidW5kZWZpbmVkIiwiY2F0ZWdvcnkiLCJzdWJjYXRlZ29yeSIsIndhcm1JZCIsIndlaWdodCIsIml0ZW1fZGVzY3JpcHRpb24iLCJjb252ZXJzaW9uIiwibmV3Q2FsY3VsYXRpb24iLCJjYWxjdWxhdGUiLCJzZWNvbmRhcmllcyIsIndhcm1faWQiLCJwYXJzZUZsb2F0IiwiTWF0aCIsImFicyIsImZsb29yIiwidG9FeHBvbmVudGlhbCIsInNhdmVUb1Byb2plY3QiLCJsaW5lSXRlbSIsIndhcm1fSWQiLCJ1bml0cyIsInVuaXQiLCJuYW1lIiwicXVlcnlTZWFyY2giLCJxdWVyeSIsImxpc3QiLCJmaWx0ZXIiLCJjcmVhdGVGaWx0ZXJGb3IiLCJsb3dlcmNhc2VRdWVyeSIsInRvTG93ZXJDYXNlIiwicHJpbWFyeV9jYXQiLCJpbmRleE9mIiwic3VibWl0U3VnZ2VzdGlvbiIsInN1Z2dlc3RTdWJtaXNzaW9uIiwiaGlkZSIsIm5ld1N1Z2dlc3Rpb24iLCJzaG93IiwiY2xpY2tPdXRzaWRlVG9DbG9zZSIsImNvbnRyb2xsZXJBcyIsImxvY2FscyIsIm1hdGVyaWFsIiwic2VhcmNoVGV4dCIsImNyZWF0ZVByb2plY3QiLCJwcm9qZWN0U3VibWlzc2lvbiIsIm5ld1Byb2plY3QiLCJnZXRVc2VyIiwidXNlcm5hbWUiLCJpc0Rpc2FibGVkIiwic3VibWlzc2lvbiIsImVtYWlsIiwibm90ZXMiLCJwcm9jZXNzRm9ybSIsIm1lc3NhZ2UiLCJkaXJlY3RpdmUiLCJyZXN0cmljdCIsInRyYW5zY2x1ZGUiLCJyZXBsYWNlIiwic2NvcGUiLCJ0ZW1wbGF0ZSIsImxpbmsiLCJlbGVtZW50IiwicXVlcnlTZWxlY3RvciIsIm9uIiwidGFyZ2V0IiwidmFsdWUiLCJjc3ZUb0pTT04iLCIkYXBwbHkiLCJvbkNoYW5nZUV2ZW50IiwicmVhZGVyIiwiRmlsZVJlYWRlciIsImZpbGVuYW1lIiwiZmlsZXMiLCJvbmxvYWQiLCJvbkxvYWRFdmVudCIsInR5cGUiLCJzcmNFbGVtZW50IiwicmVhZEFzVGV4dCIsImxpbmVzIiwic3BsaXQiLCJzdGFydCIsImNvbHVtbkNvdW50IiwibGVuZ3RoIiwiaGVhZGVycyIsImkiLCJjdXJyZW50bGluZSIsIlJlZ0V4cCIsImoiLCJrIiwicHJvamVjdExpc3QiLCJzaG93RGVsZXRlIiwiZXYiLCJjb25maXJtIiwidGl0bGUiLCJhcmlhTGFiZWwiLCJvayIsImNhbmNlbCIsInRhcmdldEV2ZW50IiwiYWxlcnQiLCJsb2dpbiIsImZvcm0iLCJzYXZlVG9rZW4iLCJ0b2tlbiIsImxvZ291dCIsInByb2plY3RfbmFtZSIsInNlbGVjdGVkX3Byb2plY3QiLCJwcm9qZWN0X2Rlc2NyaXB0aW9uIiwiZGVsZXRlUHJvamVjdEl0ZW0iLCJjcmVhdGVkX2F0IiwidXBkYXRlZF9hdCIsInVzZXJfaWQiLCJzdWJfY2F0ZWdvcnkiLCJjbzJfb2Zmc2V0IiwicHJvamVjdFRvdGFsIiwic2VydmljZSIsIiR3aW5kb3ciLCJwYXJzZUp3dCIsImJhc2U2NFVybCIsImJhc2U2NCIsInBhcnNlIiwiYXRvYiIsImxvY2FsU3RvcmFnZSIsImp3dFRva2VuIiwiZ2V0VG9rZW4iLCJpc0F1dGhlZCIsInBhcmFtcyIsIm5vdEV4cGlyZWQiLCJyb3VuZCIsIkRhdGUiLCJnZXRUaW1lIiwiZXhwIiwiZmFjdG9yeSIsIiRxIiwicmVxdWVzdCIsIkF1dGhvcml6YXRpb24iLCJzdGF0dXMiLCJyZXNwb25zZUVycm9yIiwicmVqZWN0IiwiJG1kVG9hc3QiLCJzaW1wbGUiLCJoaWRlRGVsYXkiLCJwb3NpdGlvbiJdLCJtYXBwaW5ncyI6IkFBQUEsR0FBQUEsS0FBQUMsUUFBQUMsT0FBQSxjQUFBLFVBQUEsYUFBQSxhQUFBLG9CQUVBRixLQUFBRyxRQUFBLHFCQUFBLGlCQUFBLG9CQUFBLGdCQUFBLFNBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEdBQ0FELEVBQUFFLFdBQUEsR0FHQUosRUFBQUssTUFBQSxXQUNBQyxlQUFBLFNBQ0FDLGNBQUEsYUFBQUMsVUFBQSxRQUNBQyxZQUFBLFVBR0FSLEVBQUFTLEtBQUEsS0FFQUMsWUFBQSx5QkFDQUMsV0FBQSwwQkFDQUYsS0FBQSxVQUVBQyxZQUFBLG9CQUNBQyxXQUFBLGNBQ0FGLEtBQUEsYUFFQUMsWUFBQSx1QkFDQUMsV0FBQSxzQkFDQUYsS0FBQSxVQUVBQyxZQUFBLG9CQUNBQyxXQUFBLHNCQUVBRixLQUFBLFlBRUFDLFlBQUEsc0JBQ0FDLFdBQUEsS0FDQUYsS0FBQSxjQUVBQyxZQUFBLHdCQUNBQyxXQUFBLGtCQUNBRixLQUFBLGFBRUFDLFlBQUEsc0JBQ0FDLFdBQUEseUJBQ0FGLEtBQUEsWUFFQUMsWUFBQSx3QkFDQUUsV0FDQUMsV0FBQSxNQUdBWCxFQUFBWSxhQUFBQyxLQUFBLHNCQzlDQXBCLElBQUFnQixXQUFBLG1CQUFBLFNBQUEsUUFBQSxZQUFBLGFBQUEsWUFBQSxTQUFBSyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxHQUNBSixFQUFBSyxRQUNBQyxRQUFBQyxJQUFBSixFQUFBRSxNQUNBTCxFQUFBSyxLQUFBRixFQUFBRSxLQUVBTCxFQUFBUSxlQUFBLFdBQ0FGLFFBQUFDLElBQUEsY0FDQU4sR0FDQVEsT0FBQSxNQUNBQyxJQUFBLGNBQ0FDLEtBQUFYLEVBQUFLLEtBQ0FPLFNBQUEsU0FDQUMsS0FBQSxTQUFBQyxHQUNBWixFQUFBYSxLQUFBLGVBQ0FYLEVBQUFBLFVBQUEsK0NBQ0EsU0FBQVksR0FDQVYsUUFBQUMsSUFBQSxTQUNBSCxFQUFBQSxVQUFBLDhFQ2hCQXpCLElBQUFnQixXQUFBLGFBQUEsUUFBQSxTQUFBLFNBQUEsU0FBQU0sRUFBQUQsRUFBQWlCLEdBU0EsUUFBQUMsS0FDQSxHQUFBQyxHQUFBbkIsRUFBQW9CLElBQUFDLE1BQ0FmLFNBQUFDLElBQUFZLEdBRUFsQixFQUFBcUIsS0FBQSxRQUFBSCxHQUNBTixLQUFBLFNBQUFVLEdBS0EsTUFKQWpCLFNBQUFDLElBQUFnQixHQUNBQSxFQUFBWixLQUFBYSxRQUFBLFNBQUFDLEdBQ0FBLEVBQUFDLFdBQUEsSUFFQUgsRUFBQVosT0FDQUUsS0FBQSxTQUFBYyxHQUNBMUIsRUFBQXFCLEtBQUEsd0JBQUFLLEtBUkExQixTQVNBLFNBQUEyQixHQUNBdEIsUUFBQUMsSUFBQXFCLEtBS0EsUUFBQUMsR0FBQUMsR0FDQSxHQUFBQyxHQUFBRCxFQUFBQyxFQUNBekIsU0FBQUMsSUFBQXdCLEdBQ0E5QixFQUFBK0IsSUFBQSx3QkFBQUQsR0FBQWxCLEtBQUEsU0FBQVUsR0FDQVUsTUFJQSxRQUFBQSxLQUNBaEMsRUFBQWlDLElBQUEsZUFBQXJCLEtBQUEsU0FBQVUsR0FDQSxHQUFBWSxHQUFBWixFQUFBWixJQUNBTCxTQUFBQyxJQUFBNEIsR0FDQUMsRUFBQUQsWUFBQUEsSUF0Q0FGLEdBRUEsSUFBQUcsR0FBQUMsSUFDQUQsR0FBQUQsWUFBQSxHQUNBQyxFQUFBUCxhQUFBQSxFQUNBTyxFQUFBbEIsVUFBQUEsRUFxQ0FsQixFQUFBb0IsS0FDQWtCLFFBQUEsS0FDQUMsUUFBQSxFQUNBQyxlQUFBLEVBQ0FDLFVBQUEsSUFDQUMsa0JBQUEsRUFDQXJCLE9BQUEsS0FDQXNCLFNBQUEsYUFDQUMsaUJBQUEsRUFHQSxJQUFBQyxHQUFBLEVBQ0E3QyxHQUFBOEMsYUFBQSxTQUFBQyxFQUFBQyxHQUNBLEdBQUFDLEdBQUFDLEtBQUFDLFVBQUFKLEdBQ0FLLEVBQUEsSUFDQSxLQUNBQSxFQUFBbkMsRUFBQWdDLE9BQ0EsTUFBQUksR0FFQSxNQUFBUixHQUdBLEdBQUF4QixHQUFBNkIsS0FBQUMsVUFBQUMsRUFBQSxLQUFBRSxPQUFBTixHQUdBLE9BRkFILEdBQUF4QixFQUVBQSxNQ3hFQTFDLElBQUFnQixXQUFBLGlCQUFBLFFBQUEsWUFBQSxhQUFBLGNBQUEsWUFBQSxTQUFBTSxFQUFBc0QsRUFBQXBELEVBQUFxRCxFQUFBdEQsR0E4REEsUUFBQXVELEdBQUFDLEdBQ0FwRCxRQUFBQyxJQUFBLG1CQUFBbUQsR0FHQSxRQUFBQyxHQUFBbEMsR0FDQW1DLFFBQUFuQyxJQUNBVyxFQUFBeUIsU0FBQSxHQUNBekIsRUFBQTBCLFlBQUEsR0FDQTFCLEVBQUEyQixPQUFBLEdBQ0EzQixFQUFBNEIsT0FBQSxHQUNBNUIsRUFBQTZCLGlCQUFBLEdBQ0E3QixFQUFBOEIsV0FBQSxHQUNBOUIsRUFBQWYsT0FBQSxJQUlBLFFBQUE4QyxLQUVBLEdBQUFDLElBQ0FMLE9BQUEzQixFQUFBMkIsUUFBQTNCLEVBQUF5QixTQUFBUSxZQUFBLEdBQUFDLFFBQ0FOLE9BQUFPLFdBQUFuQyxFQUFBNEIsUUFBQTVCLEVBQUE4QixXQUdBakUsR0FBQXFCLEtBQUEsZ0JBQUE4QyxHQUFBdkQsS0FBQSxTQUFBQyxHQUVBQSxFQUFBSCxLQUFBNkQsS0FBQUMsSUFBQUYsV0FBQXpELEVBQUFILE9BRUFHLEVBQUFILE1BQUEsS0FDQXlCLEVBQUFmLE9BQUFtRCxLQUFBRSxNQUFBLElBQUE1RCxFQUFBSCxNQUFBLElBRUF5QixFQUFBZixPQUFBUCxFQUFBSCxLQUFBZ0UsY0FBQSxLQUtBLFFBQUFDLEtBQ0EsR0FBQUMsSUFDQWhCLFNBQUF6QixFQUFBeUIsU0FDQUMsWUFBQTFCLEVBQUEwQixZQUNBZ0IsUUFBQTFDLEVBQUEyQixPQUNBQyxPQUFBTyxXQUFBbkMsRUFBQTRCLFFBQUE1QixFQUFBOEIsV0FDQWEsTUFBQTNDLEVBQUE0QyxLQUFBQyxLQUNBaEIsaUJBQUE3QixFQUFBNkIsaUJBRUEzRCxTQUFBQyxJQUFBc0UsR0FDQTVFLEVBQUFxQixLQUFBLGlCQUFBVCxLQUFBLFNBQUFDLEdBQ0FSLFFBQUFDLElBQUFPLEtBSUEsUUFBQW9FLEdBQUFDLEdBQ0EsTUFBQUEsR0FBQS9DLEVBQUFnRCxLQUFBQyxPQUFBQyxFQUFBSCxJQUFBL0MsRUFBQWdELEtBR0EsUUFBQUUsR0FBQUgsR0FDQSxHQUFBSSxHQUFBSixFQUFBSyxhQUVBLE9BQUEsVUFBQXBDLEdBQ0EsTUFBQSxJQUFBQSxFQUFBcUMsWUFBQUMsUUFBQUgsSUFJQSxRQUFBSSxLQUNBMUYsRUFBQXFCLEtBQUEsY0FBQWMsRUFBQXdELG1CQUFBL0UsS0FBQSxTQUFBVSxHQUNBZ0MsRUFBQXNDLFNBSUEsUUFBQUMsR0FBQWhFLEdBRUF5QixFQUFBd0MsTUFDQXJHLFlBQUEsNEJBQ0FzRyxxQkFBQSxFQUNBckcsV0FBQSxnQkFDQXNHLGFBQUEsT0FDQUMsUUFBQUMsU0FBQS9ELEVBQUFnRSxjQUtBLFFBQUFDLEtBQ0FwRyxFQUFBcUIsS0FBQSxXQUFBYyxFQUFBa0UsbUJBQUF6RixLQUFBLFNBQUFVLEdBQ0FnQyxFQUFBc0MsU0FJQSxRQUFBVSxHQUFBQSxHQUVBaEQsRUFBQXdDLE1BQ0FyRyxZQUFBLDJCQUNBc0cscUJBQUEsRUFDQXJHLFdBQUEsZ0JBQ0FzRyxhQUFBLFNBdkpBOUYsRUFBQUUsS0FBQW1ELEVBQUFnRCxVQUVBckcsRUFBQUUsTUFBQUYsRUFBQUUsS0FBQW9HLFVBQ0F2RyxFQUFBYSxLQUFBLEtBSUFkLEVBQUFpQyxJQUFBLGNBQUFyQixLQUFBLFNBQUFDLEdBQ0EsR0FBQXNFLEdBQUF0RSxFQUFBSCxJQUVBeUUsR0FBQTVELFFBQUEsU0FBQUMsR0FDQUEsRUFBQWdFLFlBQUFoRSxFQUFBZ0UsWUFBQUQsZ0JBSUFwRCxFQUFBZ0QsS0FBQUEsR0FLQSxJQUFBaEQsR0FBQUMsSUFFQUQsR0FBQWdELEtBQUEsR0FDQWhELEVBQUFzRSxZQUFBLEVBQ0F0RSxFQUFBZixPQUFBLEdBQ0FlLEVBQUE4QyxZQUFBQSxFQUNBOUMsRUFBQXVCLG1CQUFBQSxFQUNBdkIsRUFBQXFCLGlCQUFBQSxFQUNBckIsRUFBQTBELGNBQUFBLEVBQ0ExRCxFQUFBdUQsaUJBQUFBLEVBQ0F2RCxFQUFBMkMsUUFFQUUsS0FBQSxNQUNBZixXQUFBLE9BR0FlLEtBQUEsUUFDQWYsV0FBQSxZQUdBZSxLQUFBLE9BQ0FmLFdBQUEsSUFHQWUsS0FBQSxjQUNBZixXQUFBLFVBR0E5QixFQUFBdUUsWUFDQUMsTUFBQSxHQUNBVCxTQUFBLEdBQ0FVLE1BQUEsSUFFQXpFLEVBQUErQixlQUFBQSxFQUNBL0IsRUFBQXdDLGNBQUFBLEVBQ0F4QyxFQUFBbUUsV0FBQUEsRUFDQW5FLEVBQUFpRSxjQUFBQSxLQzFEQTFILElBQUFnQixXQUFBLHFCQUFBLFNBQUEsUUFBQSxZQUFBLFlBQUEsU0FBQUssRUFBQUMsRUFBQUMsRUFBQUUsR0FDQUosRUFBQUssUUFFQUwsRUFBQThHLFlBQUEsU0FBQXpHLEdBQ0FKLEdBQ0FRLE9BQUEsT0FDQUMsSUFBQSxZQUNBQyxLQUFBWCxFQUFBSyxLQUNBTyxTQUFBLFNBQ0FDLEtBQUEsU0FBQUMsR0FDQVIsUUFBQUMsSUFBQU8sR0FDQVosRUFBQWEsS0FBQSxVQUNBWCxFQUFBQSxVQUFBLG1DQUNBLFNBQUF3QixHQUNBdEIsUUFBQUMsSUFBQXFCLEdBQ0F4QixFQUFBQSxVQUFBd0IsRUFBQWpCLEtBQUFvRyxlQ2hCQXBJLElBQUFxSSxVQUFBLGNBQUEsV0FDQSxPQUNBQyxTQUFBLElBQ0FDLFlBQUEsRUFDQUMsU0FBQSxFQUNBQyxPQUNBOUUsUUFBQSxLQUNBQyxPQUFBLEtBQ0FDLGNBQUEsS0FDQUMsVUFBQSxLQUNBQyxpQkFBQSxLQUNBckIsT0FBQSxLQUNBc0IsU0FBQSxLQUNBQyxnQkFBQSxNQUVBeUUsU0FBQSxxZEFJQUMsS0FBQSxTQUFBRixFQUFBRyxHQUNBSCxFQUFBMUUsaUJBQUEwRSxFQUFBMUUsbUJBQUEsRUFDQTBFLEVBQUE1RSxjQUFBNEUsRUFBQTVFLGdCQUFBLEVBRUE1RCxRQUFBMkksUUFBQUEsRUFBQSxHQUFBQyxjQUFBLHFCQUFBQyxHQUFBLFFBQUEsU0FBQXBFLEdBQ0EsR0FBQSxNQUFBK0QsRUFBQTlFLFFBQUEsQ0FDQSxHQUFBQSxJQUNBbEIsSUFBQWdHLEVBQUE5RSxRQUNBQyxPQUFBNkUsRUFBQTdFLE9BQ0FFLFVBQUFZLEVBQUFxRSxPQUFBQyxNQUNBaEYsU0FBQXlFLEVBQUF6RSxTQUVBeUUsR0FBQS9GLE9BQUF1RyxFQUFBdEYsR0FDQThFLEVBQUFTLFlBSUFOLEVBQUFFLEdBQUEsU0FBQSxTQUFBSyxHQUNBLEdBQUFDLEdBQUEsR0FBQUMsV0FlQSxJQWRBWixFQUFBYSxTQUFBSCxFQUFBSixPQUFBUSxNQUFBLEdBQUFqRCxLQUNBOEMsRUFBQUksT0FBQSxTQUFBQyxHQUNBaEIsRUFBQVMsT0FBQSxXQUNBLEdBQUF2RixJQUNBbEIsSUFBQWdILEVBQUFWLE9BQUFyRyxPQUFBOEYsUUFBQSxXQUFBLE1BQ0E1RSxPQUFBNkUsRUFBQTdFLE9BQ0FFLFVBQUEyRSxFQUFBM0UsVUFFQTJFLEdBQUE5RSxRQUFBQSxFQUFBbEIsSUFDQWdHLEVBQUEvRixPQUFBdUcsRUFBQXRGLEdBQ0E4RSxFQUFBL0YsT0FBQTRHLFNBQUFiLEVBQUFhLFlBSUEsU0FBQUgsRUFBQUosT0FBQVcsTUFBQSxNQUFBUCxFQUFBSixPQUFBUSxPQUFBLE1BQUFKLEVBQUFRLFdBQUFKLE9BR0EsR0FBQSxNQUFBZCxFQUFBOUUsUUFBQSxDQUNBLEdBQUFBLElBQ0FsQixJQUFBZ0csRUFBQTlFLFFBQ0FDLFFBQUE2RSxFQUFBN0UsT0FDQUUsVUFBQTJFLEVBQUEzRSxVQUVBMkUsR0FBQS9GLE9BQUF1RyxFQUFBdEYsUUFSQXlGLEdBQUFRLFlBQUFULEVBQUFRLFlBQUFSLEVBQUFKLFFBQUFRLE1BQUEsR0FBQWQsRUFBQXpFLFdBYUEsSUFBQWlGLEdBQUEsU0FBQXRGLEdBQ0EsR0FBQWtHLEdBQUFsRyxFQUFBbEIsSUFBQXFILE1BQUEsTUFDQXBILEtBQ0FxSCxFQUFBLEVBQ0FDLEVBQUFILEVBQUEsR0FBQUMsTUFBQW5HLEVBQUFHLFdBQUFtRyxPQUVBQyxJQUNBdkcsR0FBQUMsU0FDQXNHLEVBQUFMLEVBQUEsR0FBQUMsTUFBQW5HLEVBQUFHLFdBQ0FpRyxFQUFBLEVBR0EsS0FBQSxHQUFBSSxHQUFBSixFQUFBSSxFQUFBTixFQUFBSSxPQUFBRSxJQUFBLENBQ0EsR0FBQTFGLE1BQ0EyRixFQUFBUCxFQUFBTSxHQUFBTCxNQUFBLEdBQUFPLFFBQUExRyxFQUFBRyxVQUFBLHNDQUNBLElBQUFzRyxFQUFBSCxTQUFBRCxFQUFBLENBQ0EsR0FBQXJHLEVBQUFDLE9BQ0EsSUFBQSxHQUFBMEcsR0FBQSxFQUFBQSxFQUFBSixFQUFBRCxPQUFBSyxJQUNBN0YsRUFBQXlGLEVBQUFJLElBQUFGLEVBQUFFLE9BR0EsS0FBQSxHQUFBQyxHQUFBLEVBQUFBLEVBQUFILEVBQUFILE9BQUFNLElBQ0E5RixFQUFBOEYsR0FBQUgsRUFBQUcsRUFHQTdILEdBQUF0QixLQUFBcUQsSUFHQSxNQUFBL0IsUUM5RkExQyxJQUFBZ0IsV0FBQSxpQkFBQSxZQUFBLGFBQUEsU0FBQSxRQUFBLFNBQUE0RCxFQUFBcEQsRUFBQUgsRUFBQUMsR0FDQSxHQUFBSSxHQUFBRixFQUFBRSxJQUlBSixHQUFBaUMsSUFBQSxZQUFBN0IsRUFBQTBCLElBQUFsQixLQUFBLFNBQUFDLEdBQ0FkLEVBQUFtSixZQUFBckksRUFBQUgsT0FNQVgsRUFBQW9KLFdBQUEsU0FBQUMsR0FFQS9JLFFBQUFDLElBQUEsUUFDQSxJQUFBK0ksR0FBQS9GLEVBQUErRixVQUNBQyxNQUFBLGlEQUNBakgsUUFBQSxzQkFDQWtILFVBQUEsMkNBQ0FDLEdBQUEsVUFDQUMsT0FBQSxVQUNBQyxZQUFBTixFQUNBOUYsR0FBQXdDLEtBQUF1RCxHQUFBekksS0FBQSxXQUNBYixFQUFBNEosTUFBQSxrQ0FDQSxXQUNBNUosRUFBQTRKLE1BQUEsMkNDeEJBakwsSUFBQWdCLFdBQUEsYUFBQSxTQUFBLFFBQUEsY0FBQSxZQUFBLGFBQUEsWUFBQSxTQUFBSyxFQUFBQyxFQUFBdUQsRUFBQXRELEVBQUFDLEVBQUFDLEdBQ0FKLEVBQUE2SixNQUFBLFdBQ0E1SixHQUNBUSxPQUFBLE9BQ0FDLElBQUEsU0FDQUMsS0FBQVgsRUFBQThKLE9BQ0FqSixLQUFBLFNBQUFDLEdBQ0EwQyxFQUFBdUcsVUFBQWpKLEVBQUFILEtBQUFxSixPQUNBN0osRUFBQUUsS0FBQW1ELEVBQUFnRCxVQUNBdEcsRUFBQWEsS0FBQSxNQUNBLFNBQUFhLEdBRUF4QixFQUFBQSxVQUFBd0IsRUFBQWpCLEtBQUFvRyxlQ1pBcEksSUFBQWdCLFdBQUEsV0FBQSxjQUFBLFNBQUEsYUFBQSxZQUFBLFFBQUEsU0FBQTZELEVBQUF4RCxFQUFBRyxFQUFBRCxFQUFBRCxHQUNBRSxFQUFBRSxLQUFBbUQsRUFBQWdELFVBRUFyRyxFQUFBRSxNQUFBRixFQUFBRSxLQUFBb0csVUFDQXZHLEVBQUFhLEtBQUEsS0FHQWYsRUFBQWlLLE9BQUEsV0FDQXpHLEVBQUF5RyxTQUNBOUosRUFBQUUsS0FBQW1ELEVBQUFnRCxVQUNBdEcsRUFBQWEsS0FBQSxTQ1ZBcEMsSUFBQWdCLFdBQUEsZ0JBQUEsWUFBQSxTQUFBLGFBQUEsUUFBQSxTQUFBNEQsRUFBQXZELEVBQUFHLEVBQUFGLEdBaUZBLFFBQUFpRixHQUFBQyxHQUNBLE1BQUFBLEdBQUEvQyxFQUFBK0csWUFBQTlELE9BQUFDLEVBQUFILElBQUEvQyxFQUFBK0csWUFHQSxRQUFBN0QsR0FBQUgsR0FDQSxHQUFBSSxHQUFBSixFQUFBSyxhQUVBLE9BQUEsVUFBQXBDLEdBQ0EsTUFBQSxJQUFBQSxFQUFBOEcsYUFBQXhFLFFBQUFILElBSUEsUUFBQTlCLEdBQUFDLEdBQ0FwRCxRQUFBQyxJQUFBLG1CQUFBbUQsR0FHQSxRQUFBQyxHQUFBbEMsR0FDQW5CLFFBQUFDLElBQUEsT0FBQWtCLEdBQ0FuQixRQUFBQyxJQUFBLG9CQUFBNkIsRUFBQStILGtCQUNBdkcsUUFBQW5DLElBQ0FXLEVBQUErSCxpQkFBQSxHQUNBL0gsRUFBQWdJLG9CQUFBLElBaUNBLFFBQUFDLEdBQUF0SSxHQUNBekIsUUFBQUMsSUFBQSxjQUFBd0IsR0FySUEsR0FBQUssR0FBQUMsSUFDQUQsR0FBQStHLGNBRUFwSCxHQUFBLEdBQ0FtSSxhQUFBLGNBQ0FFLG9CQUFBLFVBQ0FFLFdBQUEsMkJBQ0FDLFdBQUEsMkJBQ0FDLFFBQUEsRUFDQTNHLFNBQUEsT0FDQTRHLGFBQUEsTUFDQTFGLE1BQUEsTUFDQWYsT0FBQSxHQUNBMEcsV0FBQSxJQUNBaEosV0FBQSxFQUNBdUMsaUJBQUEsbUJBR0FsQyxHQUFBLElBQ0FtSSxhQUFBLGVBQ0FFLG9CQUFBLGlEQUNBRSxXQUFBLDJCQUNBQyxXQUFBLDJCQUNBQyxRQUFBLEdBQ0EzRyxTQUFBLG1CQUNBNEcsYUFBQSxPQUNBMUYsTUFBQSxNQUNBZixPQUFBLElBQ0EwRyxXQUFBLEtBQ0FoSixXQUFBLEVBQ0F1QyxpQkFBQSw4REFHQWxDLEdBQUEsS0FDQW1JLGFBQUEsYUFDQUUsb0JBQUEsVUFDQUUsV0FBQSwyQkFDQUMsV0FBQSwyQkFDQUMsUUFBQSxHQUNBM0csU0FBQSxnQkFDQTRHLGFBQUEsT0FDQTFGLE1BQUEsTUFDQWYsT0FBQSxJQUNBMEcsV0FBQSxLQUNBaEosV0FBQSxFQUNBdUMsaUJBQUEsY0FHQTdCLEVBQUFmLE9BQUEsR0FDQWUsRUFBQThDLFlBQUFBLEVBQ0E5QyxFQUFBdUIsbUJBQUFBLEVBQ0F2QixFQUFBcUIsaUJBQUFBLEVBQ0FyQixFQUFBdUksYUFBQSxFQUNBdkksRUFBQWlJLGtCQUFBQSxFQUNBakksRUFBQUwsR0FBQSxFQUVBekIsUUFBQUMsSUFBQTZCLEVBQUErRyxhQStDQW5KLEVBQUFvSixXQUFBLFNBQUFDLEVBQUF0SCxHQUNBekIsUUFBQUMsSUFBQSxRQUNBLElBQUErSSxHQUFBL0YsRUFBQStGLFVBQ0FDLE1BQUEsOENBQ0FqSCxRQUFBLDJCQUNBa0gsVUFBQSwyQkFDQUMsR0FBQSxVQUNBQyxPQUFBLFVBQ0FDLFlBQUFOLEVBQ0E5RixHQUFBd0MsS0FBQXVELEdBQUF6SSxLQUFBLFdBQ0FQLFFBQUFDLElBQUEsV0FBQXdCLEdBQ0FLLEVBQUFpSSxrQkFBQXRJLEdBQ0EvQixFQUFBNEosTUFBQSwrQkFDQSxXQUNBNUosRUFBQTRKLE1BQUEsd0NDeEhBakwsSUFBQWlNLFFBQUEsZUFBQSxVQUFBLFNBQUFDLEdBQ0F4SSxLQUFBeUksU0FBQSxTQUFBZCxHQUNBLEdBQUFBLEVBQUEsQ0FDQSxHQUFBZSxHQUFBZixFQUFBdkIsTUFBQSxLQUFBLEdBQ0F1QyxFQUFBRCxFQUFBNUQsUUFBQSxJQUFBLEtBQUFBLFFBQUEsSUFBQSxJQUNBLE9BQUFqRSxNQUFBK0gsTUFBQUosRUFBQUssS0FBQUYsSUFDQSxVQUdBM0ksS0FBQTBILFVBQUEsU0FBQUMsR0FDQWEsRUFBQU0sYUFBQUMsU0FBQXBCLEdBSUEzSCxLQUFBZ0osU0FBQSxXQUNBLE1BQUFSLEdBQUFNLGFBQUFDLFVBR0EvSSxLQUFBaUosU0FBQSxXQUNBLEdBQUF0QixHQUFBM0gsS0FBQWdKLFVBQ0EsSUFBQXJCLEVBQUEsQ0FDQSxHQUFBdUIsR0FBQWxKLEtBQUF5SSxTQUFBZCxHQUNBd0IsRUFBQWhILEtBQUFpSCxPQUFBLEdBQUFDLE9BQUFDLFVBQUEsTUFBQUosRUFBQUssR0FJQSxPQUhBSixJQUNBbkosS0FBQTRILFNBRUF1QixFQUVBLE9BQUEsR0FJQW5KLEtBQUE0SCxPQUFBLGlCQUNBWSxHQUFBTSxhQUFBQyxVQUlBL0ksS0FBQW1FLFFBQUEsV0FDQSxNQUFBbkUsTUFBQXlJLFNBQUF6SSxLQUFBZ0osZ0JBSUExTSxJQUFBa04sUUFBQSxtQkFBQSxLQUFBLFlBQUEsY0FBQSxTQUFBQyxFQUFBNUwsRUFBQXNELEdBQ0EsT0FDQXVJLFFBQUEsU0FBQWpOLEdBS0EsTUFKQUEsR0FBQStKLFFBQUEvSixFQUFBK0osWUFDQXJGLEVBQUE4SCxhQUNBeE0sRUFBQStKLFFBQUFtRCxjQUFBLFVBQUF4SSxFQUFBNkgsWUFFQXZNLEdBRUFnQyxTQUFBLFNBQUFBLEdBT0EsTUFMQSxPQUFBQSxFQUFBbUwsUUFHQS9MLEVBQUFhLEtBQUEsVUFFQUQsR0FBQWdMLEVBQUFyTSxLQUFBcUIsSUFDQW9MLGNBQUEsU0FBQXBMLEdBT0EsTUFOQSxPQUFBQSxFQUFBbUwsT0FDQS9MLEVBQUFhLEtBQUEsVUFHQVQsUUFBQUMsSUFBQU8sR0FFQWdMLEVBQUFLLE9BQUFyTCxRQUtBbkMsSUFBQWlNLFFBQUEsYUFBQSxXQUFBLFNBQUF3QixHQUVBL0osS0FBQWpDLFVBQUEsU0FBQTJHLEdBQ0FxRixFQUFBckcsS0FDQXFHLEVBQUFDLFNBQ0EvSixRQUFBeUUsR0FDQXVGLFVBQUEsS0FDQUMsU0FBQSIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgICAgdmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdlY290b25lQXBwJywgWyduZ1JvdXRlJywgJ25nTWF0ZXJpYWwnLCAnbmdNZXNzYWdlcycsICd2YWxpZGF0aW9uLm1hdGNoJ10pO1xuXG5hcHAuY29uZmlnKFsnJG1kVGhlbWluZ1Byb3ZpZGVyJywgJyRyb3V0ZVByb3ZpZGVyJywgJyRsb2NhdGlvblByb3ZpZGVyJywgJyRodHRwUHJvdmlkZXInLCBmdW5jdGlvbigkbWRUaGVtaW5nUHJvdmlkZXIsICRyb3V0ZVByb3ZpZGVyLCAkbG9jYXRpb25Qcm92aWRlciwgJGh0dHBQcm92aWRlcil7XG4gICAgJGxvY2F0aW9uUHJvdmlkZXIuaHRtbDVNb2RlKHRydWUpO1xuXG4gICAgLy9zZXQgdGhlbWUgYW5kIGNvbG9yIHBhbGV0dGVcbiAgICAkbWRUaGVtaW5nUHJvdmlkZXIudGhlbWUoJ2RlZmF1bHQnKVxuICAgICAgICAucHJpbWFyeVBhbGV0dGUoJ2dyZWVuJylcbiAgICAgICAgLmFjY2VudFBhbGV0dGUoJ2JsdWUtZ3JleScsIHsnZGVmYXVsdCc6JzYwMCd9KVxuICAgICAgICAud2FyblBhbGV0dGUgKCdvcmFuZ2UnKTtcblxuICAgIC8vcm91dGVzIGZvciB2aWV3c1xuICAgICRyb3V0ZVByb3ZpZGVyLndoZW4oJy8nLFxuICAgICAgICB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy92aWV3cy9jYWxjdWxhdG9yLmh0bWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogJ2NhbGN1bGF0ZUN0cmwgYXMgY3RybCdcbiAgICAgICAgfSkud2hlbignL2xvZ2luJyxcbiAgICAgICAge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvdmlld3MvbG9naW4uaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnbG9naW5DdHJsJ1xuICAgICAgICB9KS53aGVuKCcvcmVnaXN0ZXInLFxuICAgICAgICB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy92aWV3cy9yZWdpc3Rlci5odG1sJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdjcmVhdGVBY2NvdW50Q3RybCdcbiAgICAgICAgfSkud2hlbignL2FkbWluJyxcbiAgICAgICAge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvdmlld3MvYWRtaW4uaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnYWRtaW5DdHJsIGFzIGN0cmwnXG5cbiAgICAgICAgfSkud2hlbignL2FjY291bnQnLFxuICAgICAgICB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy92aWV3cy9hY2NvdW50Lmh0bWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogJydcbiAgICAgICAgfSkud2hlbignL2Rhc2hib2FyZCcsXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL3ZpZXdzL2Rhc2hib2FyZC5odG1sJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdkYXNoYm9hcmRDdHJsJ1xuICAgICAgICB9KS53aGVuKCcvcHJvamVjdHMnLFxuICAgICAgICB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy92aWV3cy9wcm9qZWN0Lmh0bWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogJ3Byb2plY3RzQ3RybCBhcyBjdHJsJ1xuICAgICAgICB9KS53aGVuKCcvc291cmNlcycsXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL3ZpZXdzL3NvdXJjZXMuaHRtbCdcbiAgICAgICAgfSkub3RoZXJ3aXNlKHtcbiAgICAgICAgICAgIHJlZGlyZWN0VG86ICcvJ1xuICAgICAgICB9KTtcblxuICAgICRodHRwUHJvdmlkZXIuaW50ZXJjZXB0b3JzLnB1c2goJ2F1dGhJbnRlcmNlcHRvcicpO1xufV0pOyIsIlxuLy8gRWRpdCBhY2NvdW50IGluZm8gSFRNTCAtIEtpbVxuYXBwLmNvbnRyb2xsZXIoJ2VkaXRBY2NvdW50Q3RybCcsIFsnJHNjb3BlJywgJyRodHRwJywgJyRsb2NhdGlvbicsICckcm9vdFNjb3BlJywgJ3Nob3dUb2FzdCcsIGZ1bmN0aW9uKCRzY29wZSwgJGh0dHAsICRsb2NhdGlvbiwgJHJvb3RTY29wZSwgc2hvd1RvYXN0KSB7XG4gICAgJHNjb3BlLnVzZXIgPSB7fTtcbiAgICBjb25zb2xlLmxvZygkcm9vdFNjb3BlLnVzZXIpO1xuICAgICRzY29wZS51c2VyID0gJHJvb3RTY29wZS51c2VyO1xuXG4gICAgJHNjb3BlLnVwZGF0ZVVzZXJJbmZvID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBjb25zb2xlLmxvZyhcIlBvc3RpbmcuLi5cIik7XG4gICAgICAgICRodHRwKHtcbiAgICAgICAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICAgICAgICB1cmw6ICcvbW9kaWZ5VXNlcicsXG4gICAgICAgICAgICBkYXRhOiAkc2NvcGUudXNlcixcbiAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbidcbiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKCcvY2FsY3VsYXRvcicpO1xuICAgICAgICAgICAgc2hvd1RvYXN0LnNob3dUb2FzdChcIllvdXIgYWNjb3VudCBpbmZvcm1hdGlvbiBoYXMgYmVlbiBjaGFuZ2VkLlwiKVxuICAgICAgICB9LCBmdW5jdGlvbihlcnJvcil7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnZXJyb3InKTtcbiAgICAgICAgICAgIHNob3dUb2FzdC5zaG93VG9hc3QoXCJUaGVyZSB3YXMgYSBwcm9ibGVtIHByb2Nlc3NpbmcgeW91ciBjaGFuZ2VzLiBQbGVhc2UgdHJ5IGFnYWluIGxhdGVyLlwiKVxuICAgICAgICB9KTtcbiAgICB9O1xuXG59XSk7IiwiLyoqXG4gKiBBRE1JTlxuICovXG5hcHAuY29udHJvbGxlcignYWRtaW5DdHJsJywgWyckaHR0cCcsICckc2NvcGUnLCckcGFyc2UnLCBmdW5jdGlvbiggJGh0dHAsICRzY29wZSwgJHBhcnNlICl7XG4gICAgLy8gSU5JVFxuICAgIGluaXQoKTtcblxuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBzZWxmLnN1Z2dlc3Rpb25zID0gJyc7XG4gICAgc2VsZi5tYXJrQ29tcGxldGUgPSBtYXJrQ29tcGxldGU7XG4gICAgc2VsZi5zdWJtaXRDU1YgPSBzdWJtaXRDU1Y7XG5cbiAgICBmdW5jdGlvbiBzdWJtaXRDU1YoICl7XG4gICAgICAgIHZhciBjc3ZPYmplY3QgPSAkc2NvcGUuY3N2LnJlc3VsdDtcbiAgICAgICAgY29uc29sZS5sb2coY3N2T2JqZWN0KTtcblxuICAgICAgICAkaHR0cC5wb3N0KCcvYnVsaycsIGNzdk9iamVjdClcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKCByZXMgKXtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7XG4gICAgICAgICAgICAgICAgcmVzLmRhdGEuZm9yRWFjaChmdW5jdGlvbihpdGVtKXtcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5wcm9qZWN0X2lkID0gMTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiByZXMuZGF0YX0pXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiggcHJvamVjdHMgKSB7XG4gICAgICAgICAgICAgICAgJGh0dHAucG9zdCgnL3Byb2plY3QvY2FsY3VsYXRpb24vJywgcHJvamVjdHMpXG4gICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbihlcnIpe1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgICB9KTtcblxuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1hcmtDb21wbGV0ZSggc3VnZ2VzdGlvbiApIHtcbiAgICAgICAgdmFyIGlkID0gc3VnZ2VzdGlvbi5pZDtcbiAgICAgICAgY29uc29sZS5sb2coaWQpO1xuICAgICAgICAkaHR0cC5wdXQoJy9zdWdnZXN0aW9uL2NvbXBsZXRlLycgKyBpZCkudGhlbihmdW5jdGlvbiggcmVzICkge1xuICAgICAgICAgICAgaW5pdCgpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbml0KCkge1xuICAgICAgICAkaHR0cC5nZXQoJy9zdWdnZXN0aW9uJykudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICB2YXIgc3VnZ2VzdGlvbnMgPSByZXMuZGF0YTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHN1Z2dlc3Rpb25zKTtcbiAgICAgICAgICAgIHNlbGYuc3VnZ2VzdGlvbnMgPSBzdWdnZXN0aW9ucztcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgJHNjb3BlLmNzdiA9IHtcbiAgICAgICAgY29udGVudDogbnVsbCxcbiAgICAgICAgaGVhZGVyOiB0cnVlLFxuICAgICAgICBoZWFkZXJWaXNpYmxlOiB0cnVlLFxuICAgICAgICBzZXBhcmF0b3I6ICcsJyxcbiAgICAgICAgc2VwYXJhdG9yVmlzaWJsZTogdHJ1ZSxcbiAgICAgICAgcmVzdWx0OiBudWxsLFxuICAgICAgICBlbmNvZGluZzogJ0lTTy04ODU5LTEnLFxuICAgICAgICBlbmNvZGluZ1Zpc2libGU6IHRydWUsXG4gICAgfTtcblxuICAgIHZhciBfbGFzdEdvb2RSZXN1bHQgPSAnJztcbiAgICAkc2NvcGUudG9QcmV0dHlKU09OID0gZnVuY3Rpb24gKGpzb24sIHRhYldpZHRoKSB7XG4gICAgICAgIHZhciBvYmpTdHIgPSBKU09OLnN0cmluZ2lmeShqc29uKTtcbiAgICAgICAgdmFyIG9iaiA9IG51bGw7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBvYmogPSAkcGFyc2Uob2JqU3RyKSh7fSk7XG4gICAgICAgIH0gY2F0Y2goZSl7XG4gICAgICAgICAgICAvLyBlYXQgJHBhcnNlIGVycm9yXG4gICAgICAgICAgICByZXR1cm4gX2xhc3RHb29kUmVzdWx0O1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHJlc3VsdCA9IEpTT04uc3RyaW5naWZ5KG9iaiwgbnVsbCwgTnVtYmVyKHRhYldpZHRoKSk7XG4gICAgICAgIF9sYXN0R29vZFJlc3VsdCA9IHJlc3VsdDtcblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG5cbn1dKTsiLCJhcHAuY29udHJvbGxlcignY2FsY3VsYXRlQ3RybCcsIFsnJGh0dHAnLCAnJG1kRGlhbG9nJywgJyRyb290U2NvcGUnLCAnYXV0aFNlcnZpY2UnLCAnJGxvY2F0aW9uJywgZnVuY3Rpb24oICRodHRwLCAkbWREaWFsb2csICRyb290U2NvcGUsIGF1dGhTZXJ2aWNlLCAkbG9jYXRpb24gKSB7XG5cbiAgICAvLyBDaGVjayB1c2VyXG4gICAgJHJvb3RTY29wZS51c2VyID0gYXV0aFNlcnZpY2UuZ2V0VXNlcigpO1xuXG4gICAgaWYoJHJvb3RTY29wZS51c2VyICYmICRyb290U2NvcGUudXNlci51c2VybmFtZSl7XG4gICAgICAgICRsb2NhdGlvbi5wYXRoKCcvJyk7XG4gICAgfVxuXG4gICAgLy8gSU5JVFxuICAgICRodHRwLmdldCgnL21hdGVyaWFscycpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgdmFyIGxpc3QgPSByZXNwb25zZS5kYXRhO1xuXG4gICAgICAgIGxpc3QuZm9yRWFjaChmdW5jdGlvbihpdGVtKXtcbiAgICAgICAgICAgIGl0ZW0ucHJpbWFyeV9jYXQgPSBpdGVtLnByaW1hcnlfY2F0LnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICAvLyAvaXRlbS5wcmltYXJ5X2NhdCA9IGl0ZW0ucHJpbWFyeV9jYXQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBpdGVtLnByaW1hcnlfY2F0LnNsaWNlKDEpLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAgICAgfSk7XG4gICAgICAgIHNlbGYubGlzdCA9IGxpc3Q7XG5cbiAgICB9KTtcblxuICAgIC8vIFNlbGYgZGVjXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgc2VsZi5saXN0ID0gJyc7XG4gICAgc2VsZi5pc0Rpc2FibGVkID0gZmFsc2U7XG4gICAgc2VsZi5yZXN1bHQgPSAnJztcbiAgICBzZWxmLnF1ZXJ5U2VhcmNoID0gcXVlcnlTZWFyY2g7XG4gICAgc2VsZi5zZWxlY3RlZEl0ZW1DaGFuZ2UgPSBzZWxlY3RlZEl0ZW1DaGFuZ2U7XG4gICAgc2VsZi5zZWFyY2hUZXh0Q2hhbmdlICAgPSBzZWFyY2hUZXh0Q2hhbmdlO1xuICAgIHNlbGYubmV3U3VnZ2VzdGlvbiA9IG5ld1N1Z2dlc3Rpb247XG4gICAgc2VsZi5zdWJtaXRTdWdnZXN0aW9uID0gc3VibWl0U3VnZ2VzdGlvbjtcbiAgICBzZWxmLnVuaXRzID0gW1xuICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnbGJzJyxcbiAgICAgICAgICAgIGNvbnZlcnNpb246IDAuMDAwNVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAna2lsb3MnLFxuICAgICAgICAgICAgY29udmVyc2lvbjogMC4wMDExMDIzMVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAndG9ucycsXG4gICAgICAgICAgICBjb252ZXJzaW9uOiAxXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdtZXRyaWMgdG9ucycsXG4gICAgICAgICAgICBjb252ZXJzaW9uOiAxLjEwMjMxXG4gICAgICAgIH1cbiAgICBdO1xuICAgIHNlbGYuc3VibWlzc2lvbiA9IHtcbiAgICAgICAgZW1haWw6ICcnLFxuICAgICAgICBtYXRlcmlhbDogJycsXG4gICAgICAgIG5vdGVzOiAnJ1xuICAgIH07XG4gICAgc2VsZi5uZXdDYWxjdWxhdGlvbiA9IG5ld0NhbGN1bGF0aW9uO1xuICAgIHNlbGYuc2F2ZVRvUHJvamVjdCA9IHNhdmVUb1Byb2plY3Q7XG4gICAgc2VsZi5uZXdQcm9qZWN0ID0gbmV3UHJvamVjdDtcbiAgICBzZWxmLmNyZWF0ZVByb2plY3QgPSBjcmVhdGVQcm9qZWN0O1xuXG5cbiAgICBmdW5jdGlvbiBzZWFyY2hUZXh0Q2hhbmdlKHRleHQpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1RleHQgY2hhbmdlZCB0byAnLCB0ZXh0KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZWxlY3RlZEl0ZW1DaGFuZ2UoaXRlbSkge1xuICAgICAgICBpZiAoIGl0ZW0gPT0gdW5kZWZpbmVkICkge1xuICAgICAgICAgICAgc2VsZi5jYXRlZ29yeSA9ICcnO1xuICAgICAgICAgICAgc2VsZi5zdWJjYXRlZ29yeSA9ICcnO1xuICAgICAgICAgICAgc2VsZi53YXJtSWQgPSAnJztcbiAgICAgICAgICAgIHNlbGYud2VpZ2h0ID0gJyc7XG4gICAgICAgICAgICBzZWxmLml0ZW1fZGVzY3JpcHRpb24gPSAnJztcbiAgICAgICAgICAgIHNlbGYuY29udmVyc2lvbiA9ICcnO1xuICAgICAgICAgICAgc2VsZi5yZXN1bHQgPSAnJztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIG5ld0NhbGN1bGF0aW9uKCkge1xuXG4gICAgICAgIHZhciBjYWxjdWxhdGUgPSB7XG4gICAgICAgICAgICB3YXJtSWQ6IHNlbGYud2FybUlkIHx8IHNlbGYuY2F0ZWdvcnkuc2Vjb25kYXJpZXNbMF0ud2FybV9pZCxcbiAgICAgICAgICAgIHdlaWdodDogcGFyc2VGbG9hdChzZWxmLndlaWdodCkgKiBzZWxmLmNvbnZlcnNpb25cbiAgICAgICAgfTtcblxuICAgICAgICAkaHR0cC5wb3N0KCcvY2FsY3VsYXRpb25zJywgY2FsY3VsYXRlKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG5cbiAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEgPSBNYXRoLmFicyhwYXJzZUZsb2F0KHJlc3BvbnNlLmRhdGEpKTtcblxuICAgICAgICAgICAgaWYocmVzcG9uc2UuZGF0YSA+PSAuMDAwMSkge1xuICAgICAgICAgICAgICAgIHNlbGYucmVzdWx0ID0gTWF0aC5mbG9vcihyZXNwb25zZS5kYXRhICogMTAwMDApIC8gMTAwMDA7XG4gICAgICAgICAgICB9IGVsc2V7XG4gICAgICAgICAgICAgICAgc2VsZi5yZXN1bHQgPSByZXNwb25zZS5kYXRhLnRvRXhwb25lbnRpYWwoMik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNhdmVUb1Byb2plY3QoKXtcbiAgICAgICAgdmFyIGxpbmVJdGVtID0ge1xuICAgICAgICAgICAgY2F0ZWdvcnk6IHNlbGYuY2F0ZWdvcnksXG4gICAgICAgICAgICBzdWJjYXRlZ29yeTogc2VsZi5zdWJjYXRlZ29yeSxcbiAgICAgICAgICAgIHdhcm1fSWQ6IHNlbGYud2FybUlkLFxuICAgICAgICAgICAgd2VpZ2h0OiBwYXJzZUZsb2F0KHNlbGYud2VpZ2h0KSpzZWxmLmNvbnZlcnNpb24sXG4gICAgICAgICAgICB1bml0czogc2VsZi51bml0Lm5hbWUsXG4gICAgICAgICAgICBpdGVtX2Rlc2NyaXB0aW9uOiBzZWxmLml0ZW1fZGVzY3JpcHRpb25cbiAgICAgICAgfTtcbiAgICAgICAgY29uc29sZS5sb2cobGluZUl0ZW0pO1xuICAgICAgICAkaHR0cC5wb3N0KCcvYWRkVG9Qcm9qZWN0JykudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBxdWVyeVNlYXJjaChxdWVyeSkge1xuICAgICAgICByZXR1cm4gcXVlcnkgPyBzZWxmLmxpc3QuZmlsdGVyKGNyZWF0ZUZpbHRlckZvcihxdWVyeSkpIDogc2VsZi5saXN0O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZUZpbHRlckZvcihxdWVyeSkge1xuICAgICAgICB2YXIgbG93ZXJjYXNlUXVlcnkgPSBxdWVyeS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAvL3F1ZXJ5LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgcXVlcnkuc2xpY2UoMSk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBmaWx0ZXJGbihvYmopIHtcbiAgICAgICAgICAgIHJldHVybiAob2JqLnByaW1hcnlfY2F0LmluZGV4T2YobG93ZXJjYXNlUXVlcnkpICE9IC0xKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzdWJtaXRTdWdnZXN0aW9uKCl7XG4gICAgICAgICRodHRwLnBvc3QoJy9zdWdnZXN0aW9uJywgc2VsZi5zdWdnZXN0U3VibWlzc2lvbikudGhlbihmdW5jdGlvbiggcmVzICl7XG4gICAgICAgICAgICAkbWREaWFsb2cuaGlkZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBuZXdTdWdnZXN0aW9uKCBzdWdnZXN0aW9uICl7XG5cbiAgICAgICAgJG1kRGlhbG9nLnNob3coe1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvdmlld3Mvc3VnZ2VzdC1tb2RhbC5odG1sJyxcbiAgICAgICAgICAgIGNsaWNrT3V0c2lkZVRvQ2xvc2U6IHRydWUsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnY2FsY3VsYXRlQ3RybCcsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICdjdHJsJyxcbiAgICAgICAgICAgIGxvY2Fsczoge21hdGVyaWFsOiBzZWxmLnNlYXJjaFRleHR9XG4gICAgICAgIH0pXG5cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVQcm9qZWN0KCkge1xuICAgICAgICAkaHR0cC5wb3N0KCcvcHJvamVjdCcsIHNlbGYucHJvamVjdFN1Ym1pc3Npb24pLnRoZW4oZnVuY3Rpb24ocmVzKXtcbiAgICAgICAgICAgICRtZERpYWxvZy5oaWRlKCk7XG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbmV3UHJvamVjdCggbmV3UHJvamVjdCApe1xuXG4gICAgICAgICRtZERpYWxvZy5zaG93KHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvcHJvamVjdC1tb2RhbC5odG1sJyxcbiAgICAgICAgICAgIGNsaWNrT3V0c2lkZVRvQ2xvc2U6IHRydWUsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnY2FsY3VsYXRlQ3RybCcsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICdjdHJsJ1xuICAgICAgICB9KVxuXG4gICAgfVxuXG59XSk7IiwiLy8gUmVnaXN0ZXIgSFRNTCAtIE1hZGVsaW5lXG5hcHAuY29udHJvbGxlcignY3JlYXRlQWNjb3VudEN0cmwnLCBbJyRzY29wZScsICckaHR0cCcsICckbG9jYXRpb24nLCdzaG93VG9hc3QnLCBmdW5jdGlvbigkc2NvcGUsICRodHRwLCAkbG9jYXRpb24sIHNob3dUb2FzdCkge1xuICAgICRzY29wZS51c2VyID0ge307XG5cbiAgICAkc2NvcGUucHJvY2Vzc0Zvcm0gPSBmdW5jdGlvbiAodXNlcikge1xuICAgICAgICAkaHR0cCh7XG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgIHVybDogJy9yZWdpc3RlcicsXG4gICAgICAgICAgICBkYXRhOiAkc2NvcGUudXNlcixcbiAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbidcbiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcbiAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKCcvbG9naW4nKTtcbiAgICAgICAgICAgIHNob3dUb2FzdC5zaG93VG9hc3QoXCJZb3VyIGFjY291bnQgaGFzIGJlZW4gY3JlYXRlZC5cIik7XG4gICAgICAgIH0sIGZ1bmN0aW9uKGVycil7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgICAgc2hvd1RvYXN0LnNob3dUb2FzdChlcnIuZGF0YS5tZXNzYWdlKTtcbiAgICAgICAgfSlcbiAgICB9O1xuXG59XSk7IiwiYXBwLmRpcmVjdGl2ZSgnbmdDc3ZJbXBvcnQnLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICByZXN0cmljdDogJ0UnLFxuICAgICAgICB0cmFuc2NsdWRlOiB0cnVlLFxuICAgICAgICByZXBsYWNlOiB0cnVlLFxuICAgICAgICBzY29wZTp7XG4gICAgICAgICAgICBjb250ZW50Oic9PycsXG4gICAgICAgICAgICBoZWFkZXI6ICc9PycsXG4gICAgICAgICAgICBoZWFkZXJWaXNpYmxlOiAnPT8nLFxuICAgICAgICAgICAgc2VwYXJhdG9yOiAnPT8nLFxuICAgICAgICAgICAgc2VwYXJhdG9yVmlzaWJsZTogJz0/JyxcbiAgICAgICAgICAgIHJlc3VsdDogJz0/JyxcbiAgICAgICAgICAgIGVuY29kaW5nOiAnPT8nLFxuICAgICAgICAgICAgZW5jb2RpbmdWaXNpYmxlOiAnPT8nXG4gICAgICAgIH0sXG4gICAgICAgIHRlbXBsYXRlOiAnPGRpdj48ZGl2IG5nLXNob3c9XCJoZWFkZXJWaXNpYmxlXCI+PGRpdiBjbGFzcz1cImxhYmVsXCI+SGVhZGVyPC9kaXY+PGlucHV0IHR5cGU9XCJjaGVja2JveFwiIG5nLW1vZGVsPVwiaGVhZGVyXCI+PC9kaXY+JytcbiAgICAgICAgJzxkaXYgbmctc2hvdz1cImVuY29kaW5nICYmIGVuY29kaW5nVmlzaWJsZVwiPjxkaXYgY2xhc3M9XCJsYWJlbFwiPkVuY29kaW5nPC9kaXY+PHNwYW4+e3tlbmNvZGluZ319PC9zcGFuPjwvZGl2PicrXG4gICAgICAgICc8ZGl2IG5nLXNob3c9XCJzZXBhcmF0b3IgJiYgc2VwYXJhdG9yVmlzaWJsZVwiPjxkaXYgY2xhc3M9XCJsYWJlbFwiPlNlcGVyYXRvcjwvZGl2PjxzcGFuPjxpbnB1dCBjbGFzcz1cInNlcGFyYXRvci1pbnB1dFwiIHR5cGU9XCJ0ZXh0XCIgbmctY2hhbmdlPVwiY2hhbmdlU2VwYXJhdG9yXCIgbmctbW9kZWw9XCJzZXBhcmF0b3JcIj48c3Bhbj48L2Rpdj4nK1xuICAgICAgICAnPGRpdj48aW5wdXQgY2xhc3M9XCJidG4gY3RhIGdyYXlcIiB0eXBlPVwiZmlsZVwiLz48L2Rpdj48L2Rpdj4nLFxuICAgICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCkge1xuICAgICAgICAgICAgc2NvcGUuc2VwYXJhdG9yVmlzaWJsZSA9IHNjb3BlLnNlcGFyYXRvclZpc2libGUgfHwgZmFsc2U7XG4gICAgICAgICAgICBzY29wZS5oZWFkZXJWaXNpYmxlID0gc2NvcGUuaGVhZGVyVmlzaWJsZSB8fCBmYWxzZTtcblxuICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KGVsZW1lbnRbMF0ucXVlcnlTZWxlY3RvcignLnNlcGFyYXRvci1pbnB1dCcpKS5vbigna2V5dXAnLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgaWYgKCBzY29wZS5jb250ZW50ICE9IG51bGwgKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb250ZW50ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY3N2OiBzY29wZS5jb250ZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyOiBzY29wZS5oZWFkZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXBhcmF0b3I6IGUudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZW5jb2Rpbmc6IHNjb3BlLmVuY29kaW5nXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLnJlc3VsdCA9IGNzdlRvSlNPTihjb250ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUuJGFwcGx5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGVsZW1lbnQub24oJ2NoYW5nZScsIGZ1bmN0aW9uKG9uQ2hhbmdlRXZlbnQpIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICAgICAgICAgICAgICBzY29wZS5maWxlbmFtZSA9IG9uQ2hhbmdlRXZlbnQudGFyZ2V0LmZpbGVzWzBdLm5hbWU7XG4gICAgICAgICAgICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uKG9uTG9hZEV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLiRhcHBseShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb250ZW50ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNzdjogb25Mb2FkRXZlbnQudGFyZ2V0LnJlc3VsdC5yZXBsYWNlKC9cXHJcXG58XFxyL2csJ1xcbicpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcjogc2NvcGUuaGVhZGVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcGFyYXRvcjogc2NvcGUuc2VwYXJhdG9yXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGUuY29udGVudCA9IGNvbnRlbnQuY3N2O1xuICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGUucmVzdWx0ID0gY3N2VG9KU09OKGNvbnRlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGUucmVzdWx0LmZpbGVuYW1lID0gc2NvcGUuZmlsZW5hbWU7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBpZiAoIChvbkNoYW5nZUV2ZW50LnRhcmdldC50eXBlID09PSBcImZpbGVcIikgJiYgKG9uQ2hhbmdlRXZlbnQudGFyZ2V0LmZpbGVzICE9IG51bGwgfHwgb25DaGFuZ2VFdmVudC5zcmNFbGVtZW50LmZpbGVzICE9IG51bGwpICkgIHtcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnJlYWRBc1RleHQoKG9uQ2hhbmdlRXZlbnQuc3JjRWxlbWVudCB8fCBvbkNoYW5nZUV2ZW50LnRhcmdldCkuZmlsZXNbMF0sIHNjb3BlLmVuY29kaW5nKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIHNjb3BlLmNvbnRlbnQgIT0gbnVsbCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb250ZW50ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNzdjogc2NvcGUuY29udGVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXI6ICFzY29wZS5oZWFkZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VwYXJhdG9yOiBzY29wZS5zZXBhcmF0b3JcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBzY29wZS5yZXN1bHQgPSBjc3ZUb0pTT04oY29udGVudCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdmFyIGNzdlRvSlNPTiA9IGZ1bmN0aW9uKGNvbnRlbnQpIHtcbiAgICAgICAgICAgICAgICB2YXIgbGluZXM9Y29udGVudC5jc3Yuc3BsaXQoJ1xcbicpO1xuICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICAgICAgICAgICAgICB2YXIgc3RhcnQgPSAwO1xuICAgICAgICAgICAgICAgIHZhciBjb2x1bW5Db3VudCA9IGxpbmVzWzBdLnNwbGl0KGNvbnRlbnQuc2VwYXJhdG9yKS5sZW5ndGg7XG5cbiAgICAgICAgICAgICAgICB2YXIgaGVhZGVycyA9IFtdO1xuICAgICAgICAgICAgICAgIGlmIChjb250ZW50LmhlYWRlcikge1xuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzPWxpbmVzWzBdLnNwbGl0KGNvbnRlbnQuc2VwYXJhdG9yKTtcbiAgICAgICAgICAgICAgICAgICAgc3RhcnQgPSAxO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGk9c3RhcnQ7IGk8bGluZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9iaiA9IHt9O1xuICAgICAgICAgICAgICAgICAgICB2YXIgY3VycmVudGxpbmU9bGluZXNbaV0uc3BsaXQobmV3IFJlZ0V4cChjb250ZW50LnNlcGFyYXRvcisnKD8hW15cIl0qXCIoPzooPzpbXlwiXSpcIil7Mn0pKlteXCJdKiQpJykpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIGN1cnJlbnRsaW5lLmxlbmd0aCA9PT0gY29sdW1uQ291bnQgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29udGVudC5oZWFkZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqPTA7IGo8aGVhZGVycy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmpbaGVhZGVyc1tqXV0gPSBjdXJyZW50bGluZVtqXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGs9MDsgazxjdXJyZW50bGluZS5sZW5ndGg7IGsrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmpba10gPSBjdXJyZW50bGluZVtrXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaChvYmopO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfX0pOyIsImFwcC5jb250cm9sbGVyKCdkYXNoYm9hcmRDdHJsJywgWyckbWREaWFsb2cnLCAnJHJvb3RTY29wZScsICckc2NvcGUnLCAnJGh0dHAnLCBmdW5jdGlvbigkbWREaWFsb2csICRyb290U2NvcGUsICRzY29wZSwgJGh0dHApIHtcbiAgICB2YXIgdXNlcj0kcm9vdFNjb3BlLnVzZXI7XG5cblxuICAgIC8vbG9hZCBwcm9qZWN0IGxpc3Qgb24gcGFnZSBsb2FkXG4gICAgJGh0dHAuZ2V0KCcvcHJvamVjdC8nICsgdXNlci5pZCkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAkc2NvcGUucHJvamVjdExpc3QgPSByZXNwb25zZS5kYXRhO1xuICAgICAgICAvL3Jlc3BvbnNlLmRhdGEuZm9yRWFjaChmdW5jdGlvbihpdGVtKXtcbiAgICAgICAgLy8gICAgaXRlbS5wcm9qZWN0X25hbWUgPSBpdGVtLnByaW1hcnlfY2F0LnRvTG93ZXJDYXNlKCk7XG4gICAgfSk7XG4vL3RoaXMgaXMgZm9yIHRoZSByZW1vdmUgcHJvamVjdCBtb2RhbCBhbGVydCBmb3IgcmVtb3ZpbmcgYSBwcm9qZWN0LCBkYXRhIHdpbGwgc3RpbGwgYmUgaW4gZGF0YWJhc2UtLSBzdGlsbCBub3Qgd29ya2luZyBjb3JyZWN0XG5cbiAgICAkc2NvcGUuc2hvd0RlbGV0ZSA9IGZ1bmN0aW9uKGV2KSB7XG5cbiAgICAgICAgY29uc29sZS5sb2coJ0NMSUNLJyk7XG4gICAgICAgIHZhciBjb25maXJtID0gJG1kRGlhbG9nLmNvbmZpcm0oKVxuICAgICAgICAgICAgLnRpdGxlKCdBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gcmVtb3ZlIHlvdXIgcHJvamVjdD8nKVxuICAgICAgICAgICAgLmNvbnRlbnQoJ1RoaXMgaXMgcGVybWFuZW50LicpXG4gICAgICAgICAgICAuYXJpYUxhYmVsKCdSZW1vdmUgcHJvamVjdCBmcm9tIGFjY291bnQgcGVybWFuZW50bHknKVxuICAgICAgICAgICAgLm9rKCdEZWxldGUnKVxuICAgICAgICAgICAgLmNhbmNlbCgnQ2FuY2VsJylcbiAgICAgICAgICAgIC50YXJnZXRFdmVudChldik7XG4gICAgICAgICRtZERpYWxvZy5zaG93KGNvbmZpcm0pLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkc2NvcGUuYWxlcnQgPSAnWW91ciBwcm9qZWN0IGhhcyBiZWVuIHJlbW92ZWQuJztcbiAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkc2NvcGUuYWxlcnQgPSAnWW91ciBwcm9qZWN0IGhhcyBub3QgYmVlbiByZW1vdmVkLic7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAvL25lZWQgdG8gY2hlY2sgaWYgd2UgbmVlZCB0aGlzIVxuLy8gICAgZnVuY3Rpb24gRGlhbG9nQ29udHJvbGxlcigkc2NvcGUsICRtZERpYWxvZykge1xuLy8gICAgJHNjb3BlLmhpZGUgPSBmdW5jdGlvbigpIHtcbi8vICAgICAgICAkbWREaWFsb2cuaGlkZSgpO1xuLy8gICAgfTtcbi8vICAgICRzY29wZS5jYW5jZWwgPSBmdW5jdGlvbigpIHtcbi8vICAgICAgICAkbWREaWFsb2cuY2FuY2VsKCk7XG4vLyAgICB9O1xuLy8gICAgJHNjb3BlLmFuc3dlciA9IGZ1bmN0aW9uKGFuc3dlcikge1xuLy8gICAgICAgICRtZERpYWxvZy5oaWRlKGFuc3dlcik7XG4vLyAgICB9O1xuLy99XG5cbn1dKTsiLCIvLyBMb2dpbiBIVE1MIC0gS2F0ZVxuYXBwLmNvbnRyb2xsZXIoJ2xvZ2luQ3RybCcsIFsnJHNjb3BlJywgJyRodHRwJywgJ2F1dGhTZXJ2aWNlJywgJyRsb2NhdGlvbicsICckcm9vdFNjb3BlJywnc2hvd1RvYXN0JywgZnVuY3Rpb24oJHNjb3BlLCAkaHR0cCwgYXV0aFNlcnZpY2UsICRsb2NhdGlvbiwgJHJvb3RTY29wZSwgc2hvd1RvYXN0KSB7XG4gICAgJHNjb3BlLmxvZ2luID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAkaHR0cCh7XG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgIHVybDogJy9sb2dpbicsXG4gICAgICAgICAgICBkYXRhOiAkc2NvcGUuZm9ybVxuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcbiAgICAgICAgICAgIGF1dGhTZXJ2aWNlLnNhdmVUb2tlbihyZXNwb25zZS5kYXRhLnRva2VuKTtcbiAgICAgICAgICAgICRyb290U2NvcGUudXNlciA9IGF1dGhTZXJ2aWNlLmdldFVzZXIoKTtcbiAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKCcvJyk7XG4gICAgICAgIH0sIGZ1bmN0aW9uKGVycil7XG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgICBzaG93VG9hc3Quc2hvd1RvYXN0KGVyci5kYXRhLm1lc3NhZ2UpO1xuICAgICAgICB9KVxuICAgIH07XG59XSk7IiwiLy8gQ2hhbmdlIE5hdmlnYXRpb24gT3B0aW9ucyB3aXRoIExvZ2luXG5hcHAuY29udHJvbGxlcignbmF2Q3RybCcsIFsnYXV0aFNlcnZpY2UnLCAnJHNjb3BlJywgJyRyb290U2NvcGUnLCAnJGxvY2F0aW9uJywgJyRodHRwJywgZnVuY3Rpb24oYXV0aFNlcnZpY2UsICRzY29wZSwgJHJvb3RTY29wZSwgJGxvY2F0aW9uLCAkaHR0cCl7XG4gICAgJHJvb3RTY29wZS51c2VyID0gYXV0aFNlcnZpY2UuZ2V0VXNlcigpO1xuXG4gICAgaWYoJHJvb3RTY29wZS51c2VyICYmICRyb290U2NvcGUudXNlci51c2VybmFtZSl7XG4gICAgICAgICRsb2NhdGlvbi5wYXRoKCcvJyk7XG4gICAgfVxuXG4gICAgJHNjb3BlLmxvZ291dCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgIGF1dGhTZXJ2aWNlLmxvZ291dCgpO1xuICAgICAgICAkcm9vdFNjb3BlLnVzZXIgPSBhdXRoU2VydmljZS5nZXRVc2VyKCk7XG4gICAgICAgICRsb2NhdGlvbi5wYXRoKCcvJyk7XG4gICAgfVxufV0pO1xuIiwiLy8gUHJvamVjdCBQYWdlIC0gIEtpbS9NYWRlbGVpbmVcbmFwcC5jb250cm9sbGVyKCdwcm9qZWN0c0N0cmwnLCBbJyRtZERpYWxvZycsICckc2NvcGUnLCAnJHJvb3RTY29wZScsICckaHR0cCcsIGZ1bmN0aW9uKCRtZERpYWxvZywgJHNjb3BlLCAkcm9vdFNjb3BlLCAkaHR0cCkge1xuXG4gICAgLy8gU2VsZiBkZWNcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgc2VsZi5wcm9qZWN0TGlzdCA9IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiAyMSxcbiAgICAgICAgICAgICAgICAgICAgcHJvamVjdF9uYW1lOiBcImJlbidzIGhvdXNlXCIsXG4gICAgICAgICAgICAgICAgICAgIHByb2plY3RfZGVzY3JpcHRpb246IFwiUmVtb2RlbFwiLFxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVkX2F0OiBcIjIwMTUtMTAtMTRUMTY6NDI6NDAuODk2WlwiLFxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVkX2F0OiBcIjIwMTUtMTAtMTRUMTY6NDI6NDAuOTAxWlwiLFxuICAgICAgICAgICAgICAgICAgICB1c2VyX2lkOiA0LFxuICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogXCJ3b29kXCIsXG4gICAgICAgICAgICAgICAgICAgIHN1Yl9jYXRlZ29yeTogXCJvYWtcIixcbiAgICAgICAgICAgICAgICAgICAgdW5pdHM6IFwibGJzXCIsXG4gICAgICAgICAgICAgICAgICAgIHdlaWdodDogMTAsXG4gICAgICAgICAgICAgICAgICAgIGNvMl9vZmZzZXQ6IDAuMDMsXG4gICAgICAgICAgICAgICAgICAgIHByb2plY3RfaWQ6IDYsXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1fZGVzY3JpcHRpb246IFwicG9yY2ggc3BpbmRsZXNcIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBpZDogMjAyLFxuICAgICAgICAgICAgICAgICAgICBwcm9qZWN0X25hbWU6IFwiamFtZXMnIGhvdXNlXCIsXG4gICAgICAgICAgICAgICAgICAgIHByb2plY3RfZGVzY3JpcHRpb246IFwiU3VtbWl0IEF2ZSBjYXJyaWFnZSBob3VzZSB0ZWFyZG93biBhbmQgcmVidWlsZFwiLFxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVkX2F0OiBcIjIwMTQtMTAtMTRUMTY6NDI6NDAuODk2WlwiLFxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVkX2F0OiBcIjIwMTQtMTAtMTRUMTY6NDI6NDAuOTAxWlwiLFxuICAgICAgICAgICAgICAgICAgICB1c2VyX2lkOiAyNCxcbiAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnk6IFwiYXNwaGFsdCBzaGluZ2xlc1wiLFxuICAgICAgICAgICAgICAgICAgICBzdWJfY2F0ZWdvcnk6IFwibnVsbFwiLFxuICAgICAgICAgICAgICAgICAgICB1bml0czogXCJsYnNcIixcbiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0OiAxMDAsXG4gICAgICAgICAgICAgICAgICAgIGNvMl9vZmZzZXQ6IDAuMzAzLFxuICAgICAgICAgICAgICAgICAgICBwcm9qZWN0X2lkOiA2LFxuICAgICAgICAgICAgICAgICAgICBpdGVtX2Rlc2NyaXB0aW9uOiBcImRhcmsgYnJvd24gcm9vZiBzaGluZ2xlcy0tMzAgeWVhciBsaWZlLCBzb21lIHdhdGVyIGRhbWFnZVwiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiAyMTEyLFxuICAgICAgICAgICAgICAgICAgICBwcm9qZWN0X25hbWU6IFwia2ltJ3MgYmFyblwiLFxuICAgICAgICAgICAgICAgICAgICBwcm9qZWN0X2Rlc2NyaXB0aW9uOiBcIlJlbW9kZWxcIixcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlZF9hdDogXCIyMDEzLTEwLTE0VDE2OjQyOjQwLjg5NlpcIixcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlZF9hdDogXCIyMDEzLTEwLTE0VDE2OjQyOjQwLjkwMVpcIixcbiAgICAgICAgICAgICAgICAgICAgdXNlcl9pZDogMTQsXG4gICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5OiBcIndvb2QgZmxvb3JpbmdcIixcbiAgICAgICAgICAgICAgICAgICAgc3ViX2NhdGVnb3J5OiBcInBpbmVcIixcbiAgICAgICAgICAgICAgICAgICAgdW5pdHM6IFwibGJzXCIsXG4gICAgICAgICAgICAgICAgICAgIHdlaWdodDogNTAwLFxuICAgICAgICAgICAgICAgICAgICBjbzJfb2Zmc2V0OiAzLjAzLFxuICAgICAgICAgICAgICAgICAgICBwcm9qZWN0X2lkOiA2LFxuICAgICAgICAgICAgICAgICAgICBpdGVtX2Rlc2NyaXB0aW9uOiBcImJhcm4gd29vZFwiXG4gICAgICAgICAgICAgICAgfV07XG5cbiAgICBzZWxmLnJlc3VsdCA9ICcnO1xuICAgIHNlbGYucXVlcnlTZWFyY2ggPSBxdWVyeVNlYXJjaDtcbiAgICBzZWxmLnNlbGVjdGVkSXRlbUNoYW5nZSA9IHNlbGVjdGVkSXRlbUNoYW5nZTtcbiAgICBzZWxmLnNlYXJjaFRleHRDaGFuZ2UgPSBzZWFyY2hUZXh0Q2hhbmdlO1xuICAgIHNlbGYucHJvamVjdFRvdGFsID0gMDtcbiAgICBzZWxmLmRlbGV0ZVByb2plY3RJdGVtID0gZGVsZXRlUHJvamVjdEl0ZW07XG4gICAgc2VsZi5pZCA9IDA7XG5cbmNvbnNvbGUubG9nKHNlbGYucHJvamVjdExpc3QpO1xuXG4gICAgLy9yZWZyZXNoIHByb2plY3QgbGlzdFxuICAgIC8vZnVuY3Rpb24gZ2V0UHJvamVjdExpc3QoKSB7XG4gICAgLy8gICAgJGh0dHAuZ2V0KCcvcHJvamVjdCcsICRyb290U2NvcGUudXNlci5pZCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAvLyAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpO1xuICAgIC8vICAgICAgICBjb25zb2xlLmxvZyhcInVzZXIgaWQ6IFwiLCAkcm9vdFNjb3BlLnVzZXIuaWQpO1xuICAgIC8vICAgICAgICB2YXIgcHJvamVjdExpc3QgPSByZXNwb25zZS5kYXRhO1xuICAgIC8vICAgICAgICBwcm9qZWN0TGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgLy8gICAgICAgICAgICBpdGVtLnByb2plY3RfbmFtZSA9IGl0ZW0ucHJvamVjdF9uYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgLy8gICAgICAgICAgICAvL2l0ZW0ucHJvamVjdF9kZXNjcmlwdGlvbiA9IGl0ZW0ucHJvamVjdF9kZXNjcmlwdGlvbjtcbiAgICAvLyAgICAgICAgICAgIC8vaXRlbS5pdGVtSWQgPSBpdGVtLmlkO1xuICAgIC8vICAgICAgICAgICAgLy9pdGVtLmNvMl9vZmZzZXQgPSBpdGVtLmNvMl9vZmZzZXQ7XG4gICAgLy8gICAgICAgIH0pO1xuICAgIC8vICAgICAgICBzZWxmLnByb2plY3RMaXN0ID0gcHJvamVjdExpc3Q7XG4gICAgLy8gICAgfSk7XG4gICAgLy99XG5cbiAgICAvL2xvYWQgcHJvamVjdCBsaXN0IG9uIHBhZ2UgbG9hZFxuICAgIC8vZ2V0UHJvamVjdExpc3QoKTtcblxuXG4gICAgZnVuY3Rpb24gcXVlcnlTZWFyY2gocXVlcnkpIHtcbiAgICAgICAgcmV0dXJuIHF1ZXJ5ID8gc2VsZi5wcm9qZWN0TGlzdC5maWx0ZXIoY3JlYXRlRmlsdGVyRm9yKHF1ZXJ5KSkgOiBzZWxmLnByb2plY3RMaXN0O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZUZpbHRlckZvcihxdWVyeSkge1xuICAgICAgICB2YXIgbG93ZXJjYXNlUXVlcnkgPSBxdWVyeS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAvL3F1ZXJ5LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgcXVlcnkuc2xpY2UoMSk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBmaWx0ZXJGbihvYmopIHtcbiAgICAgICAgICAgIHJldHVybiAob2JqLnByb2plY3RfbmFtZS5pbmRleE9mKGxvd2VyY2FzZVF1ZXJ5KSAhPSAtMSk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2VhcmNoVGV4dENoYW5nZSh0ZXh0KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdUZXh0IGNoYW5nZWQgdG8gJywgdGV4dCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2VsZWN0ZWRJdGVtQ2hhbmdlKGl0ZW0pIHtcbiAgICAgICAgY29uc29sZS5sb2coJ2l0ZW0nLCBpdGVtKTtcbiAgICAgICAgY29uc29sZS5sb2coJ3NlbGVjdGVkXyBwcm9qZWN0JyxzZWxmLnNlbGVjdGVkX3Byb2plY3QpO1xuICAgICAgICBpZiAoIGl0ZW0gPT0gdW5kZWZpbmVkICkge1xuICAgICAgICAgICAgc2VsZi5zZWxlY3RlZF9wcm9qZWN0ID0gJyc7XG4gICAgICAgICAgICBzZWxmLnByb2plY3RfZGVzY3JpcHRpb24gPSAnJztcbiAgICAgICAgfVxuICAgIH1cblxuICAgICRzY29wZS5zaG93RGVsZXRlID0gZnVuY3Rpb24oZXYsIGlkKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdDTElDSycpO1xuICAgICAgICB2YXIgY29uZmlybSA9ICRtZERpYWxvZy5jb25maXJtKClcbiAgICAgICAgICAgIC50aXRsZSgnQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZSB0aGlzIGl0ZW0/JylcbiAgICAgICAgICAgIC5jb250ZW50KCdUaGlzIHdpbGwgYmUgcGVybWFuZW50LicpXG4gICAgICAgICAgICAuYXJpYUxhYmVsKCdEZWxldGUgaXRlbSBwZXJtYW5lbnRseScpXG4gICAgICAgICAgICAub2soJ0RlbGV0ZScpXG4gICAgICAgICAgICAuY2FuY2VsKCdDYW5jZWwnKVxuICAgICAgICAgICAgLnRhcmdldEV2ZW50KGV2KTtcbiAgICAgICAgJG1kRGlhbG9nLnNob3coY29uZmlybSkudGhlbihmdW5jdGlvbigpe1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJEZWxldGluZ1wiLCBpZCk7XG4gICAgICAgICAgICBzZWxmLmRlbGV0ZVByb2plY3RJdGVtKGlkKTtcbiAgICAgICAgICAgICRzY29wZS5hbGVydCA9ICdZb3VyIGl0ZW0gaGFzIGJlZW4gZGVsZXRlZC4nO1xuICAgICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICRzY29wZS5hbGVydCA9ICdZb3VyIGl0ZW0gaGFzIG5vdCBiZWVuIGRlbGV0ZWQuJztcbiAgICAgICAgfSk7XG4gICAgfTtcbi8vICAgIGZ1bmN0aW9uIERpYWxvZ0NvbnRyb2xsZXIoJHNjb3BlLCAkbWREaWFsb2cpIHtcbi8vICAgICRzY29wZS5oaWRlID0gZnVuY3Rpb24oKSB7XG4vLyAgICAgICAgJG1kRGlhbG9nLmhpZGUoKTtcbi8vICAgIH07XG4vLyAgICAkc2NvcGUuY2FuY2VsID0gZnVuY3Rpb24oKSB7XG4vLyAgICAgICAgJG1kRGlhbG9nLmNhbmNlbCgpO1xuLy8gICAgfTtcbi8vICAgICRzY29wZS5hbnN3ZXIgPSBmdW5jdGlvbihhbnN3ZXIpIHtcbi8vICAgICAgICAkbWREaWFsb2cuaGlkZShhbnN3ZXIpO1xuLy8gICAgfTtcbi8vfVxuXG4gICAgZnVuY3Rpb24gZGVsZXRlUHJvamVjdEl0ZW0oaWQpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJEZWxldGluZy4uLlwiLCBpZCk7XG5cbiAgICAgICAgLy8kaHR0cC51cGRhdGUoJy9wcm9qZWN0Jywgc2VsZi5pZCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgLy9maW5kT25lIGFuZCBkZWxldGUgYnkgaWQgdXNpbmcgcHJvamVjdGxpc3QuaWRcbiAgICAgICAgLy8gICAgY29uc29sZS5sb2coXCJJdGVtIHdhcyBkZWxldGVkLlwiLCByZXNwb25zZSk7XG4gICAgICAgIC8vICAgIHNlbGYuZ2V0UHJvamVjdExpc3QoKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzYXZlUHJvamVjdCgpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJTYXZpbmcuLi5cIiwgc2VsZi5pZCk7XG4gICAgICAgIC8vc2F2ZSBhbGwgcHJvamVjdCBmaWVsZHM/IGhvdyBkbyBJIGV2ZW4gZG8gdGhpcz9cbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gY2FsY3VsYXRlUHJvamVjdFRvdGFsKCkge1xuICAgICAgICBjb25zb2xlLmxvZyhcImNhbGN1bGF0aW5nLi4uXCIpO1xuICAgICAgICBwcm9qZWN0TGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICBwcm9qZWN0VG90YWwgKz0gaXRlbS5jbzJfb2Zmc2V0O1xuICAgICAgICAgICAgY29uc29sZS5sb2cocHJvamVjdFRvdGFsKTtcbiAgICAgICAgcmV0dXJuIHByb2plY3RUb3RhbDtcblxuICAgIH0pXG4gICAgfVxuXG5cblxufV0pOyIsIi8vIFNlcnZpY2VzIGZvciBhdXRoZW50aWNhdGlvblxuYXBwLnNlcnZpY2UoJ2F1dGhTZXJ2aWNlJywgWyckd2luZG93JywgZnVuY3Rpb24gKCR3aW5kb3cpe1xuICAgIHRoaXMucGFyc2VKd3QgPSBmdW5jdGlvbiAodG9rZW4pIHtcbiAgICAgICAgaWYgKHRva2VuKSB7XG4gICAgICAgICAgICB2YXIgYmFzZTY0VXJsID0gdG9rZW4uc3BsaXQoJy4nKVsxXTtcbiAgICAgICAgICAgIHZhciBiYXNlNjQgPSBiYXNlNjRVcmwucmVwbGFjZSgnLScsICcrJykucmVwbGFjZSgnXycsICcvJyk7XG4gICAgICAgICAgICByZXR1cm4gSlNPTi5wYXJzZSgkd2luZG93LmF0b2IoYmFzZTY0KSk7XG4gICAgICAgIH0gZWxzZSByZXR1cm4ge307XG4gICAgfTtcblxuICAgIHRoaXMuc2F2ZVRva2VuID0gZnVuY3Rpb24gKHRva2VuKSB7XG4gICAgICAgICR3aW5kb3cubG9jYWxTdG9yYWdlLmp3dFRva2VuID0gdG9rZW47XG4gICAgICAgIC8vY29uc29sZS5sb2coJ1NhdmVkIHRva2VuOicsJHdpbmRvdy5sb2NhbFN0b3JhZ2Uuand0VG9rZW4pO1xuICAgIH07XG5cbiAgICB0aGlzLmdldFRva2VuID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gJHdpbmRvdy5sb2NhbFN0b3JhZ2Uuand0VG9rZW47XG4gICAgfTtcblxuICAgIHRoaXMuaXNBdXRoZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB0b2tlbiA9IHRoaXMuZ2V0VG9rZW4oKTtcbiAgICAgICAgaWYgKHRva2VuKSB7XG4gICAgICAgICAgICB2YXIgcGFyYW1zID0gdGhpcy5wYXJzZUp3dCh0b2tlbik7XG4gICAgICAgICAgICB2YXIgbm90RXhwaXJlZCA9IE1hdGgucm91bmQobmV3IERhdGUoKS5nZXRUaW1lKCkgLyAxMDAwKSA8PSBwYXJhbXMuZXhwO1xuICAgICAgICAgICAgaWYgKCFub3RFeHBpcmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dvdXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBub3RFeHBpcmVkO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMubG9nb3V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBkZWxldGUgJHdpbmRvdy5sb2NhbFN0b3JhZ2Uuand0VG9rZW47XG4gICAgfTtcblxuICAgIC8vIGV4cG9zZSB1c2VyIGFzIGFuIG9iamVjdFxuICAgIHRoaXMuZ2V0VXNlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VKd3QodGhpcy5nZXRUb2tlbigpKVxuICAgIH07XG59XSk7XG5cbmFwcC5mYWN0b3J5KCdhdXRoSW50ZXJjZXB0b3InLCBbJyRxJywgJyRsb2NhdGlvbicsICdhdXRoU2VydmljZScsIGZ1bmN0aW9uICgkcSwgJGxvY2F0aW9uLCBhdXRoU2VydmljZSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHJlcXVlc3Q6IGZ1bmN0aW9uIChjb25maWcpIHtcbiAgICAgICAgICAgIGNvbmZpZy5oZWFkZXJzID0gY29uZmlnLmhlYWRlcnMgfHwge307XG4gICAgICAgICAgICBpZiAoYXV0aFNlcnZpY2UuaXNBdXRoZWQoKSkge1xuICAgICAgICAgICAgICAgIGNvbmZpZy5oZWFkZXJzLkF1dGhvcml6YXRpb24gPSAnQmVhcmVyICcgKyBhdXRoU2VydmljZS5nZXRUb2tlbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNvbmZpZztcbiAgICAgICAgfSxcbiAgICAgICAgcmVzcG9uc2U6IGZ1bmN0aW9uIChyZXNwb25zZSkge1xuXG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA0MDEpIHtcblxuICAgICAgICAgICAgICAgIC8vIGhhbmRsZSB0aGUgY2FzZSB3aGVyZSB0aGUgdXNlciBpcyBub3QgYXV0aGVudGljYXRlZFxuICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKFwiL2xvZ2luXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlIHx8ICRxLndoZW4ocmVzcG9uc2UpO1xuICAgICAgICB9LCByZXNwb25zZUVycm9yOiBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQwMSkge1xuICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKFwiL2xvZ2luXCIpO1xuXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAkcS5yZWplY3QocmVzcG9uc2UpO1xuICAgICAgICB9XG4gICAgfTtcbn1dKTtcblxuYXBwLnNlcnZpY2UoJ3Nob3dUb2FzdCcsIFsnJG1kVG9hc3QnLCBmdW5jdGlvbigkbWRUb2FzdCl7XG5cbiAgICB0aGlzLnNob3dUb2FzdCA9IGZ1bmN0aW9uKG1lc3NhZ2UpIHtcbiAgICAgICAgJG1kVG9hc3Quc2hvdyhcbiAgICAgICAgICAgICRtZFRvYXN0LnNpbXBsZSgpXG4gICAgICAgICAgICAgICAgLmNvbnRlbnQobWVzc2FnZSlcbiAgICAgICAgICAgICAgICAuaGlkZURlbGF5KDMwMDApXG4gICAgICAgICAgICAgICAgLnBvc2l0aW9uKCd0b3AgcmlnaHQnKVxuICAgICAgICApO1xuICAgIH07XG5cbn1dKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
