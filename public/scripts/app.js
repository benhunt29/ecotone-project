var app=angular.module("ecotoneApp",["ngRoute","ngMaterial","ngMessages"]);app.config(["$mdThemingProvider","$routeProvider","$locationProvider","$httpProvider",function(t,e,r,o){r.html5Mode(!0),t.theme("default").primaryPalette("green").accentPalette("blue").warnPalette("orange"),e.when("/",{templateUrl:"/views/calculator.html",controller:"calculateCtrl"}).when("/login",{templateUrl:"/views/login.html",controller:""}).when("/register",{templateUrl:"/views/register.html",controller:"createAccountCtrl"}).when("/account",{templateUrl:"/views/account.html",controller:""}).when("/dashboard",{templateUrl:"/views/dashboard.html",controller:"projectsCtrl"}).when("/projects",{templateUrl:"/views/project.html",controller:"projectsCtrl"}).when("/about",{templateUrl:"/views/about.html"}).when("/contact",{templateUrl:"/views/contact.html",controller:""}).when("/privacy",{templateUrl:"/views/privacy.html"}).otherwise({redirectTo:"/"})}]),app.controller("calculateCtrl",["$scope","$http",function(t,e){function r(t){var e=angular.lowercase(t);return function(t){return-1!=t.primary_cat.indexOf(e)}}t.newCalculation=function(){console.log(t.selected)},t.querySearch=function(e){return console.log(t.list.filter(r(e))),e?t.list.filter(r(e)):t.list},e.get("/materials").then(function(e){console.log(e),t.list=e.data,e.data.forEach(function(t){t.primary_cat=t.primary_cat.toLowerCase()})}),t.unit=["lbs","kilos","tons","metric tons"]}]),app.controller("createAccountCtrl",["$scope","$http",function(t,e){t.user={},t.processForm=function(r){console.log("Posting..."),e({method:"POST",url:"/newUser",data:t.user,dataType:"json"}).then(function(t){console.log(t),alert("Your account has been created.")})}}]),app.controller("projectsCtrl",["$scope","$http",function(t,e){e({method:"POST",url:"http://www.w3schools.com/angular/customers.php"}).then(function(e){t.names=e.records}),e({method:"GET",url:"http://www.w3schools.com/angular/customers.php"}).then(function(e){t.names=e.records})}]),app.service("authService",["$window",function(t){this.parseJwt=function(e){if(e){var r=e.split(".")[1],o=r.replace("-","+").replace("_","/");return JSON.parse(t.atob(o))}return{}},this.saveToken=function(e){t.localStorage.jwtToken=e,console.log("Saved token:",t.localStorage.jwtToken)},this.getToken=function(){return t.localStorage.jwtToken},this.isAuthed=function(){var t=this.getToken();if(t){var e=this.parseJwt(t),r=Math.round((new Date).getTime()/1e3)<=e.exp;return r||this.logout(),r}return!1},this.logout=function(){delete t.localStorage.jwtToken},this.getUser=function(){return this.parseJwt(this.getToken())}}]),app.factory("authInterceptor",["$q","$location","authService",function(t,e,r){return{request:function(t){return t.headers=t.headers||{},r.isAuthed()&&(t.headers.Authorization="Bearer "+r.getToken()),t},response:function(r){return 401===r.status&&e.path("/login"),r||t.when(r)},responseError:function(r){return 401===r.status?e.path("/login"):console.log(r),t.reject(r)}}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdHMvYXBwLmpzIl0sIm5hbWVzIjpbImFwcCIsImFuZ3VsYXIiLCJtb2R1bGUiLCJjb25maWciLCIkbWRUaGVtaW5nUHJvdmlkZXIiLCIkcm91dGVQcm92aWRlciIsIiRsb2NhdGlvblByb3ZpZGVyIiwiJGh0dHBQcm92aWRlciIsImh0bWw1TW9kZSIsInRoZW1lIiwicHJpbWFyeVBhbGV0dGUiLCJhY2NlbnRQYWxldHRlIiwid2FyblBhbGV0dGUiLCJ3aGVuIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwib3RoZXJ3aXNlIiwicmVkaXJlY3RUbyIsIiRzY29wZSIsIiRodHRwIiwiY3JlYXRlRmlsdGVyRm9yIiwicXVlcnkiLCJsb3dlcmNhc2VRdWVyeSIsImxvd2VyY2FzZSIsIm9iaiIsInByaW1hcnlfY2F0IiwiaW5kZXhPZiIsIm5ld0NhbGN1bGF0aW9uIiwiY29uc29sZSIsImxvZyIsInNlbGVjdGVkIiwicXVlcnlTZWFyY2giLCJsaXN0IiwiZmlsdGVyIiwiZ2V0IiwidGhlbiIsInJlc3BvbnNlIiwiZGF0YSIsImZvckVhY2giLCJpdGVtIiwidG9Mb3dlckNhc2UiLCJ1bml0IiwidXNlciIsInByb2Nlc3NGb3JtIiwibWV0aG9kIiwidXJsIiwiZGF0YVR5cGUiLCJhbGVydCIsIm5hbWVzIiwicmVjb3JkcyIsInNlcnZpY2UiLCIkd2luZG93IiwidGhpcyIsInBhcnNlSnd0IiwidG9rZW4iLCJiYXNlNjRVcmwiLCJzcGxpdCIsImJhc2U2NCIsInJlcGxhY2UiLCJKU09OIiwicGFyc2UiLCJhdG9iIiwic2F2ZVRva2VuIiwibG9jYWxTdG9yYWdlIiwiand0VG9rZW4iLCJnZXRUb2tlbiIsImlzQXV0aGVkIiwicGFyYW1zIiwibm90RXhwaXJlZCIsIk1hdGgiLCJyb3VuZCIsIkRhdGUiLCJnZXRUaW1lIiwiZXhwIiwibG9nb3V0IiwiZ2V0VXNlciIsImZhY3RvcnkiLCIkcSIsIiRsb2NhdGlvbiIsImF1dGhTZXJ2aWNlIiwicmVxdWVzdCIsImhlYWRlcnMiLCJBdXRob3JpemF0aW9uIiwic3RhdHVzIiwicGF0aCIsInJlc3BvbnNlRXJyb3IiLCJyZWplY3QiXSwibWFwcGluZ3MiOiJBQUFBLEdBQUlBLEtBQU1DLFFBQVFDLE9BQU8sY0FBZSxVQUFXLGFBQWMsY0FFakVGLEtBQUlHLFFBQVEscUJBQXNCLGlCQUFrQixvQkFBcUIsZ0JBQWlCLFNBQVNDLEVBQW9CQyxFQUFnQkMsRUFBbUJDLEdBQ3RKRCxFQUFrQkUsV0FBVSxHQUc1QkosRUFBbUJLLE1BQU0sV0FDcEJDLGVBQWUsU0FDZkMsY0FBYyxRQUNkQyxZQUFhLFVBR2xCUCxFQUFlUSxLQUFLLEtBRVpDLFlBQWEseUJBQ2JDLFdBQVksa0JBQ2JGLEtBQUssVUFFSkMsWUFBYSxvQkFDYkMsV0FBWSxLQUNiRixLQUFLLGFBRUpDLFlBQWEsdUJBQ2JDLFdBQVksc0JBQ2JGLEtBQUssWUFFSkMsWUFBYSxzQkFDYkMsV0FBWSxLQUNiRixLQUFLLGNBRUpDLFlBQWEsd0JBQ2JDLFdBQVksaUJBQ2JGLEtBQUssYUFFSkMsWUFBYSxzQkFDYkMsV0FBWSxpQkFDYkYsS0FBSyxVQUVKQyxZQUFhLHNCQUNkRCxLQUFLLFlBRUpDLFlBQWEsc0JBQ2JDLFdBQVksS0FDYkYsS0FBSyxZQUVKQyxZQUFhLHdCQUNkRSxXQUNDQyxXQUFZLFNBK0JwQmpCLElBQUllLFdBQVcsaUJBQWtCLFNBQVUsUUFBUyxTQUFTRyxFQUFRQyxHQTZDakUsUUFBU0MsR0FBZ0JDLEdBQ3JCLEdBQUlDLEdBQWlCckIsUUFBUXNCLFVBQVVGLEVBRXZDLE9BQU8sVUFBa0JHLEdBRXJCLE1BQW1ELElBQTNDQSxFQUFJQyxZQUFZQyxRQUFRSixJQWhEeENKLEVBQU9TLGVBQWlCLFdBQ3BCQyxRQUFRQyxJQUFJWCxFQUFPWSxXQWlCdkJaLEVBQU9hLFlBQVksU0FBU1YsR0FFeEIsTUFEQU8sU0FBUUMsSUFBSVgsRUFBT2MsS0FBS0MsT0FBT2IsRUFBZ0JDLEtBQ3hDQSxFQUFRSCxFQUFPYyxLQUFLQyxPQUFPYixFQUFnQkMsSUFBVUgsRUFBT2MsTUFJdkViLEVBQU1lLElBQUksY0FBY0MsS0FBSyxTQUFTQyxHQUNsQ1IsUUFBUUMsSUFBSU8sR0FDWmxCLEVBQU9jLEtBQU9JLEVBQVNDLEtBQ3ZCRCxFQUFTQyxLQUFLQyxRQUFRLFNBQVNDLEdBQzVCQSxFQUFLZCxZQUFjYyxFQUFLZCxZQUFZZSxrQkFLM0N0QixFQUFPdUIsTUFDSCxNQUNBLFFBQ0EsT0FDQSxrQkFpQlp6QyxJQUFJZSxXQUFXLHFCQUFzQixTQUFVLFFBQVMsU0FBU0csRUFBUUMsR0FDckVELEVBQU93QixRQUVQeEIsRUFBT3lCLFlBQWMsU0FBVUQsR0FDM0JkLFFBQVFDLElBQUksY0FDWlYsR0FDSXlCLE9BQVEsT0FDUkMsSUFBSyxXQUNMUixLQUFNbkIsRUFBT3dCLEtBQ2JJLFNBQVUsU0FDWFgsS0FBSyxTQUFVQyxHQUNkUixRQUFRQyxJQUFJTyxHQUNaVyxNQUFNLHdDQU1sQi9DLElBQUllLFdBQVcsZ0JBQWlCLFNBQVUsUUFBUyxTQUFTRyxFQUFRQyxHQUNoRUEsR0FDSXlCLE9BQVEsT0FDUkMsSUFBSyxtREFDTlYsS0FBSyxTQUFVQyxHQUNkbEIsRUFBTzhCLE1BQVFaLEVBQVNhLFVBRzVCOUIsR0FDSXlCLE9BQVEsTUFDUkMsSUFBSyxtREFDTlYsS0FBSyxTQUFVQyxHQUNkbEIsRUFBTzhCLE1BQVFaLEVBQVNhLGFBS2hDakQsSUFBSWtELFFBQVEsZUFBZ0IsVUFBVyxTQUFVQyxHQUM3Q0MsS0FBS0MsU0FBVyxTQUFVQyxHQUN0QixHQUFJQSxFQUFPLENBQ1AsR0FBSUMsR0FBWUQsRUFBTUUsTUFBTSxLQUFLLEdBQzdCQyxFQUFTRixFQUFVRyxRQUFRLElBQUssS0FBS0EsUUFBUSxJQUFLLElBQ3RELE9BQU9DLE1BQUtDLE1BQU1ULEVBQVFVLEtBQUtKLElBQzVCLFVBR1hMLEtBQUtVLFVBQVksU0FBVVIsR0FDdkJILEVBQVFZLGFBQWFDLFNBQVdWLEVBQ2hDMUIsUUFBUUMsSUFBSSxlQUFlc0IsRUFBUVksYUFBYUMsV0FHcERaLEtBQUthLFNBQVcsV0FDWixNQUFPZCxHQUFRWSxhQUFhQyxVQUdoQ1osS0FBS2MsU0FBVyxXQUNaLEdBQUlaLEdBQVFGLEtBQUthLFVBQ2pCLElBQUlYLEVBQU8sQ0FDUCxHQUFJYSxHQUFTZixLQUFLQyxTQUFTQyxHQUN2QmMsRUFBYUMsS0FBS0MsT0FBTSxHQUFJQyxPQUFPQyxVQUFZLE1BQVNMLEVBQU9NLEdBSW5FLE9BSEtMLElBQ0RoQixLQUFLc0IsU0FFRk4sRUFFUCxPQUFPLEdBSWZoQixLQUFLc0IsT0FBUyxpQkFDSHZCLEdBQVFZLGFBQWFDLFVBSWhDWixLQUFLdUIsUUFBVSxXQUNYLE1BQU92QixNQUFLQyxTQUFTRCxLQUFLYSxnQkFJbENqRSxJQUFJNEUsUUFBUSxtQkFBb0IsS0FBTSxZQUFhLGNBQWUsU0FBVUMsRUFBSUMsRUFBV0MsR0FDdkYsT0FDSUMsUUFBUyxTQUFVN0UsR0FLZixNQUpBQSxHQUFPOEUsUUFBVTlFLEVBQU84RSxZQUNwQkYsRUFBWWIsYUFDWi9ELEVBQU84RSxRQUFRQyxjQUFnQixVQUFZSCxFQUFZZCxZQUVwRDlELEdBRVhpQyxTQUFVLFNBQVVBLEdBT2hCLE1BTHdCLE9BQXBCQSxFQUFTK0MsUUFHVEwsRUFBVU0sS0FBSyxVQUVaaEQsR0FBWXlDLEVBQUdoRSxLQUFLdUIsSUFDNUJpRCxjQUFlLFNBQVVqRCxHQU94QixNQU53QixPQUFwQkEsRUFBUytDLE9BQ1RMLEVBQVVNLEtBQUssVUFHZnhELFFBQVFDLElBQUlPLEdBRVR5QyxFQUFHUyxPQUFPbEQiLCJmaWxlIjoic2NyaXB0cy9hcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ2Vjb3RvbmVBcHAnLCBbJ25nUm91dGUnLCAnbmdNYXRlcmlhbCcsICduZ01lc3NhZ2VzJ10pO1xuXG5hcHAuY29uZmlnKFsnJG1kVGhlbWluZ1Byb3ZpZGVyJywgJyRyb3V0ZVByb3ZpZGVyJywgJyRsb2NhdGlvblByb3ZpZGVyJywgJyRodHRwUHJvdmlkZXInLCBmdW5jdGlvbigkbWRUaGVtaW5nUHJvdmlkZXIsICRyb3V0ZVByb3ZpZGVyLCAkbG9jYXRpb25Qcm92aWRlciwgJGh0dHBQcm92aWRlcil7XG4gICAgJGxvY2F0aW9uUHJvdmlkZXIuaHRtbDVNb2RlKHRydWUpO1xuXG4gICAgLy9zZXQgdGhlbWUgYW5kIGNvbG9yIHBhbGV0dGVcbiAgICAkbWRUaGVtaW5nUHJvdmlkZXIudGhlbWUoJ2RlZmF1bHQnKVxuICAgICAgICAucHJpbWFyeVBhbGV0dGUoJ2dyZWVuJylcbiAgICAgICAgLmFjY2VudFBhbGV0dGUoJ2JsdWUnKVxuICAgICAgICAud2FyblBhbGV0dGUgKCdvcmFuZ2UnKTtcblxuICAgIC8vcm91dGVzIGZvciB2aWV3c1xuICAgICRyb3V0ZVByb3ZpZGVyLndoZW4oJy8nLFxuICAgICAgICB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy92aWV3cy9jYWxjdWxhdG9yLmh0bWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogJ2NhbGN1bGF0ZUN0cmwnXG4gICAgICAgIH0pLndoZW4oJy9sb2dpbicsXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL3ZpZXdzL2xvZ2luLmh0bWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogJydcbiAgICAgICAgfSkud2hlbignL3JlZ2lzdGVyJyxcbiAgICAgICAge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvdmlld3MvcmVnaXN0ZXIuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnY3JlYXRlQWNjb3VudEN0cmwnXG4gICAgICAgIH0pLndoZW4oJy9hY2NvdW50JyxcbiAgICAgICAge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvdmlld3MvYWNjb3VudC5odG1sJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICcnXG4gICAgICAgIH0pLndoZW4oJy9kYXNoYm9hcmQnLFxuICAgICAgICB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy92aWV3cy9kYXNoYm9hcmQuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAncHJvamVjdHNDdHJsJ1xuICAgICAgICB9KS53aGVuKCcvcHJvamVjdHMnLFxuICAgICAgICB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy92aWV3cy9wcm9qZWN0Lmh0bWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogJ3Byb2plY3RzQ3RybCdcbiAgICAgICAgfSkud2hlbignL2Fib3V0JyxcbiAgICAgICAge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvdmlld3MvYWJvdXQuaHRtbCdcbiAgICAgICAgfSkud2hlbignL2NvbnRhY3QnLFxuICAgICAgICB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy92aWV3cy9jb250YWN0Lmh0bWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogJydcbiAgICAgICAgfSkud2hlbignL3ByaXZhY3knLFxuICAgICAgICB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy92aWV3cy9wcml2YWN5Lmh0bWwnXG4gICAgICAgIH0pLm90aGVyd2lzZSh7XG4gICAgICAgICAgICByZWRpcmVjdFRvOiAnLydcbiAgICAgICAgfSk7XG5cbiAgICAvLyRodHRwUHJvdmlkZXIuaW50ZXJjZXB0b3JzLnB1c2goJ2F1dGhJbnRlcmNlcHRvcicpO1xufV0pO1xuXG4vLyBDYWxjdWxhdG9yIEhUTUwgLSBLYXRlICsgTWFkZWxpbmVcbi8vYXBwLmNvbnRyb2xsZXIoJ2NhbGN1bGF0ZUN0cmwnLCBbJyRzY29wZScsICckaHR0cCcsIGZ1bmN0aW9uKCRzY29wZSwgJGh0dHApe1xuLy8gICAgLy9NXG4vLyAgICAkc2NvcGUuY2FsY3VsYXRlID0ge307XG4vLyAgICAkc2NvcGUubGlzdCA9IHt9O1xuLy8gICAgbG9hZENhdGVnb3JpZXMoKTtcblxuICAgIC8vS1xuICAgIC8vJHNjb3BlLm1ham9yID0gW1xuICAgIC8vICAgICdDYXRlZ29yeSAxJyxcbiAgICAvLyAgICAnQ2F0ZWdvcnkgMicsXG4gICAgLy8gICAgJ0NhdGVnb3J5IDMnXG4gICAgLy9dO1xuICAgIC8vJHNjb3BlLnN1YiA9IFtcbiAgICAvLyAgICAnU3ViLWNhdGVnb3J5IDEnLFxuICAgIC8vICAgICdTdWItY2F0ZWdvcnkgMicsXG4gICAgLy8gICAgJ1N1Yi1jYXRlZ29yeSAzJ1xuICAgIC8vXTtcbiAgICAvLyRzY29wZS51bml0ID0gW1xuICAgIC8vICAgICdsYnMnLFxuICAgIC8vICAgICd0b25zJyxcbiAgICAvLyAgICAna2cnXG4gICAgLy9dO1xuXG4gICAgLy9NLy9kZXNpZ25hdGUgY29udHJvbGxlclxuICAgIGFwcC5jb250cm9sbGVyKCdjYWxjdWxhdGVDdHJsJywgWyckc2NvcGUnLCAnJGh0dHAnLCBmdW5jdGlvbigkc2NvcGUsICRodHRwKSB7XG5cbiAgICAgICAgJHNjb3BlLm5ld0NhbGN1bGF0aW9uID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS5zZWxlY3RlZCk7XG4gICAgICAgIH07XG4gICAgICAgLy8gbG9hZENhdGVnb3JpZXMoKTtcblxuLy9sb2FkIGNhdGVnb3JpZXMgbGlzdCBvbiBwYWdlIGxvYWRcbi8vICAgICAgICAkaHR0cCh7XG4vLyAgICAgICAgICAgICBtZXRob2Q6ICdHZXQnLFxuLy8gICAgICAgICAgICAgdXJsOiAnL21hdGVyaWFscycsXG4vLyAgICAgICAgICAgICBkYXRhOiByZXNwb25zZSxcbi8vICAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbidcbi8vICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbi8vICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcbi8vICAgICAgICAgICAgICRzY29wZS5saXN0ID0gcmVzcG9uc2U7XG4vLyAgICAgICAgIH0pO1xuXG5cbi8vYXV0b2NvbXBsZXRlIGZ1bmN0aW9uYWxpdHlcbiAgICAgICAgJHNjb3BlLnF1ZXJ5U2VhcmNoPWZ1bmN0aW9uKHF1ZXJ5KSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUubGlzdC5maWx0ZXIoY3JlYXRlRmlsdGVyRm9yKHF1ZXJ5KSkpO1xuICAgICAgICAgICAgcmV0dXJuIHF1ZXJ5ID8gJHNjb3BlLmxpc3QuZmlsdGVyKGNyZWF0ZUZpbHRlckZvcihxdWVyeSkpIDogJHNjb3BlLmxpc3Q7XG4gICAgICAgIH07XG5cbi8vbG9hZCBQcmltYXJ5IGNhdGVnb3JpZXMgbGlzdCBvbiBwYWdlIGxvYWRcbiAgICAgICAgJGh0dHAuZ2V0KCcvbWF0ZXJpYWxzJykudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpO1xuICAgICAgICAgICAgJHNjb3BlLmxpc3QgPSByZXNwb25zZS5kYXRhO1xuICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pe1xuICAgICAgICAgICAgICAgaXRlbS5wcmltYXJ5X2NhdCA9IGl0ZW0ucHJpbWFyeV9jYXQudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuLy9sb2FkIHRoZSB1bml0c1xuICAgICAgICAkc2NvcGUudW5pdCA9IFtcbiAgICAgICAgICAgICdsYnMnLFxuICAgICAgICAgICAgJ2tpbG9zJyxcbiAgICAgICAgICAgICd0b25zJyxcbiAgICAgICAgICAgICdtZXRyaWMgdG9ucydcbiAgICAgICAgXTtcblxuXG5cbi8vQ3JlYXRlIGZpbHRlciBmdW5jdGlvbiBmb3IgYSBxdWVyeSBzdHJpbmdcbiAgICAgICAgZnVuY3Rpb24gY3JlYXRlRmlsdGVyRm9yKHF1ZXJ5KSB7XG4gICAgICAgICAgICB2YXIgbG93ZXJjYXNlUXVlcnkgPSBhbmd1bGFyLmxvd2VyY2FzZShxdWVyeSk7XG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKHF1ZXJ5KTtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiBmaWx0ZXJGbihvYmopIHtcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKG9iai5wcmltYXJ5X2NhdCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChvYmoucHJpbWFyeV9jYXQuaW5kZXhPZihsb3dlcmNhc2VRdWVyeSkgIT0gLTEpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1dKTtcblxuLy8gTG9naW4gSFRNTCAtIE1hZGVsZWluZVxuYXBwLmNvbnRyb2xsZXIoJ2NyZWF0ZUFjY291bnRDdHJsJywgWyckc2NvcGUnLCAnJGh0dHAnLCBmdW5jdGlvbigkc2NvcGUsICRodHRwKSB7XG4gICAgJHNjb3BlLnVzZXIgPSB7fTtcblxuICAgICRzY29wZS5wcm9jZXNzRm9ybSA9IGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiUG9zdGluZy4uLlwiKTtcbiAgICAgICAgJGh0dHAoe1xuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICB1cmw6ICcvbmV3VXNlcicsXG4gICAgICAgICAgICBkYXRhOiAkc2NvcGUudXNlcixcbiAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbidcbiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcbiAgICAgICAgICAgIGFsZXJ0KFwiWW91ciBhY2NvdW50IGhhcyBiZWVuIGNyZWF0ZWQuXCIpXG4gICAgICAgIH0pXG4gICAgfTtcbn1dKTtcblxuLy8gUHJvamVjdCBIVE1MIC0gRGFzaGJvYXJkIEhUTUwgLSBLaW1cbmFwcC5jb250cm9sbGVyKCdwcm9qZWN0c0N0cmwnLCBbJyRzY29wZScsICckaHR0cCcsIGZ1bmN0aW9uKCRzY29wZSwgJGh0dHApIHtcbiAgICAkaHR0cCh7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICB1cmw6ICdodHRwOi8vd3d3Lnczc2Nob29scy5jb20vYW5ndWxhci9jdXN0b21lcnMucGhwJ1xuICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICRzY29wZS5uYW1lcyA9IHJlc3BvbnNlLnJlY29yZHM7XG4gICAgfSk7XG5cbiAgICAkaHR0cCh7XG4gICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgIHVybDogJ2h0dHA6Ly93d3cudzNzY2hvb2xzLmNvbS9hbmd1bGFyL2N1c3RvbWVycy5waHAnXG4gICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgJHNjb3BlLm5hbWVzID0gcmVzcG9uc2UucmVjb3JkcztcbiAgICB9KTtcbn1dKTtcblxuLy8gU2VydmljZXMgZm9yIGF1dGhlbnRpY2F0aW9uXG5hcHAuc2VydmljZSgnYXV0aFNlcnZpY2UnLCBbJyR3aW5kb3cnLCBmdW5jdGlvbiAoJHdpbmRvdyl7XG4gICAgdGhpcy5wYXJzZUp3dCA9IGZ1bmN0aW9uICh0b2tlbikge1xuICAgICAgICBpZiAodG9rZW4pIHtcbiAgICAgICAgICAgIHZhciBiYXNlNjRVcmwgPSB0b2tlbi5zcGxpdCgnLicpWzFdO1xuICAgICAgICAgICAgdmFyIGJhc2U2NCA9IGJhc2U2NFVybC5yZXBsYWNlKCctJywgJysnKS5yZXBsYWNlKCdfJywgJy8nKTtcbiAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKCR3aW5kb3cuYXRvYihiYXNlNjQpKTtcbiAgICAgICAgfSBlbHNlIHJldHVybiB7fTtcbiAgICB9O1xuXG4gICAgdGhpcy5zYXZlVG9rZW4gPSBmdW5jdGlvbiAodG9rZW4pIHtcbiAgICAgICAgJHdpbmRvdy5sb2NhbFN0b3JhZ2Uuand0VG9rZW4gPSB0b2tlbjtcbiAgICAgICAgY29uc29sZS5sb2coJ1NhdmVkIHRva2VuOicsJHdpbmRvdy5sb2NhbFN0b3JhZ2Uuand0VG9rZW4pO1xuICAgIH07XG5cbiAgICB0aGlzLmdldFRva2VuID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gJHdpbmRvdy5sb2NhbFN0b3JhZ2Uuand0VG9rZW47XG4gICAgfTtcblxuICAgIHRoaXMuaXNBdXRoZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB0b2tlbiA9IHRoaXMuZ2V0VG9rZW4oKTtcbiAgICAgICAgaWYgKHRva2VuKSB7XG4gICAgICAgICAgICB2YXIgcGFyYW1zID0gdGhpcy5wYXJzZUp3dCh0b2tlbik7XG4gICAgICAgICAgICB2YXIgbm90RXhwaXJlZCA9IE1hdGgucm91bmQobmV3IERhdGUoKS5nZXRUaW1lKCkgLyAxMDAwKSA8PSBwYXJhbXMuZXhwO1xuICAgICAgICAgICAgaWYgKCFub3RFeHBpcmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dvdXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBub3RFeHBpcmVkO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMubG9nb3V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBkZWxldGUgJHdpbmRvdy5sb2NhbFN0b3JhZ2Uuand0VG9rZW47XG4gICAgfTtcblxuICAgIC8vIGV4cG9zZSB1c2VyIGFzIGFuIG9iamVjdFxuICAgIHRoaXMuZ2V0VXNlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VKd3QodGhpcy5nZXRUb2tlbigpKVxuICAgIH07XG59XSk7XG5cbmFwcC5mYWN0b3J5KCdhdXRoSW50ZXJjZXB0b3InLCBbJyRxJywgJyRsb2NhdGlvbicsICdhdXRoU2VydmljZScsIGZ1bmN0aW9uICgkcSwgJGxvY2F0aW9uLCBhdXRoU2VydmljZSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHJlcXVlc3Q6IGZ1bmN0aW9uIChjb25maWcpIHtcbiAgICAgICAgICAgIGNvbmZpZy5oZWFkZXJzID0gY29uZmlnLmhlYWRlcnMgfHwge307XG4gICAgICAgICAgICBpZiAoYXV0aFNlcnZpY2UuaXNBdXRoZWQoKSkge1xuICAgICAgICAgICAgICAgIGNvbmZpZy5oZWFkZXJzLkF1dGhvcml6YXRpb24gPSAnQmVhcmVyICcgKyBhdXRoU2VydmljZS5nZXRUb2tlbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNvbmZpZztcbiAgICAgICAgfSxcbiAgICAgICAgcmVzcG9uc2U6IGZ1bmN0aW9uIChyZXNwb25zZSkge1xuXG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA0MDEpIHtcblxuICAgICAgICAgICAgICAgIC8vIGhhbmRsZSB0aGUgY2FzZSB3aGVyZSB0aGUgdXNlciBpcyBub3QgYXV0aGVudGljYXRlZFxuICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKFwiL2xvZ2luXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlIHx8ICRxLndoZW4ocmVzcG9uc2UpO1xuICAgICAgICB9LCByZXNwb25zZUVycm9yOiBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQwMSkge1xuICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKFwiL2xvZ2luXCIpO1xuXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAkcS5yZWplY3QocmVzcG9uc2UpO1xuICAgICAgICB9XG4gICAgfTtcbn1dKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
