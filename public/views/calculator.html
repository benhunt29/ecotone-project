<h2>Calculate Your CO<sub>2</sub> Offset</h2>
    <form ng-submit="$event.preventDefault()">
        <md-content layout="column" layout-align="space-between center">

        <md-autocomplete
            md-selected-item="ctrl.category"
            md-selected-item-change="ctrl.selectedItemChange(item)"
            md-search-text="ctrl.searchText"
            md-search-text-change="ctrl.searchTextChange(ctrl.searchText)"
            md-items="item in ctrl.querySearch(ctrl.searchText)"
            md-item-text="item.primary_cat"
            md-min-length="0"
            md-floating-label="Material type"
            layout-fill >
           
            <md-item-template>
                <span md-highlight-text="ctrl.searchText" md-highlight-flags="^i">
                    {{item.primary_cat}}
                </span>
            </md-item-template>
            
            <md-not-found >
                <div ng-click="ctrl.newSuggestion()">
                    No material matches {{ ctrl.searchText }}
                    <a >Create a new one!</a>
                </div>
            </md-not-found>
        </md-autocomplete>
        
        <md-input-container ng-show="ctrl.category.secondaries[0].secondary_cat != null" layout="column" layout-align="end center" layout-fill flex>
            <md-select ng-model="ctrl.warmId" placeholder="Subcategory" layout-fill layout-align="center">
                <md-option ng-repeat="subcategory in ctrl.category.secondaries" ng-value="subcategory.warm_id">
                    {{subcategory.secondary_cat}}
                </md-option>
            </md-select>
        </md-input-container>
        
        <div layout layout-sm="column" layout-align="space-between end" layout-fill>
            <md-input-container flex>
                <label>Weight</label>
                <input ng-model="ctrl.weight" type="text">
            </md-input-container>
        <md-select ng-model="ctrl.conversion" placeholder="Select units" flex>
            <md-option ng-repeat="unit in ctrl.units" ng-value="unit.conversion" > 
                {{ unit.name }}
            </md-option>
        </md-select>
        </div>


        <md-button class="md-accent md-raised" ng-click="ctrl.newCalculation()" type="submit" value="Save">Submit</md-button>

        <p ng-show="ctrl.result">Your Estimated CO<sub>2</sub> Offset is {{ctrl.result}} metric tons.</p>

        </md-content>
    </form>
